window.__require=function e(t,o,a){function i(c,r){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var d="function"==typeof __require&&__require;if(!r&&d)return d(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+c+"'")}}var l=o[c]={exports:{}};t[c][0].call(l.exports,function(e){return i(t[c][1][e]||e)},l,l.exports,e,t,o,a)}return o[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<a.length;c++)i(a[c]);return i}({Ad:[function(e,t,o){"use strict";cc._RF.push(t,"2cd70Qd8cpK4pX5i5MEFXaD","Ad"),Object.defineProperty(o,"__esModule",{value:!0});e("./wx"),e("./ws");var a,i=e("./Global"),n=0,c=!0,r=null;o.posShowBanner=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=!0)};o.hideCurrentBanner=function(){},o.refreshCurrentBanner=function(){if(n++,a&&n>=i.default.config.banner_click_time)return n=0,void o.posShowBanner(a,!0)},o.hasVideoAd=function(){return c},o.posShowVideo=function(e,t,o){c=!1,console.log("NO VIDEO AD"),t&&t()};o.posShowInterAd=function(e){},o.posLoadInterAd=function(e){},o.posShowGamePortal=function(e){},o.posLoadGamePortal=function(e){},o.showGameClub=function(){if(i.default.config.show_GameClub);},o.hideGameClub=function(){if(i.default.config.show_GameClub)return r&&r.hide(),r},cc._RF.pop()},{"./Global":"Global","./ws":"ws","./wx":"wx"}],Const:[function(e,t,o){"use strict";cc._RF.push(t,"f962dFVGHJLT65ZSk+4AH0p","Const"),Object.defineProperty(o,"__esModule",{value:!0}),o.VERSION="1.0.88",o.minSize=8,o.maxQuestionId=2800,o.maxItemBankNum=27,o.recoveryInterval=9e5,o.maxStrengthNum=5,o.animationSpeed=.25,o.BannerPos={random_pos1:"",random_pos2:""},o.box_rate=[{name:"xxjb_jb",weight:20,number:10},{name:"xjb_jb",weight:22,number:20},{name:"zjb_jb",weight:14,number:60},{name:"djb_jb",weight:7,number:200},{name:"tl1_tl",weight:25,number:1},{name:"tl2_tl",weight:10,number:2},{name:"tl4_tl",weight:2,number:4},{name:"sj",weight:0,number:0}],o.ordinary_rate=[{icon:1,lab:"\u91d1\u5e01",type:"jb",weight:30,number:20},{icon:1,lab:"\u91d1\u5e01",type:"jb",weight:20,number:40},{icon:1,lab:"\u91d1\u5e01",type:"jb",weight:20,number:60},{icon:1,lab:"\u91d1\u5e01",type:"jb",weight:10,number:80},{icon:1,lab:"\u91d1\u5e01",type:"jb",weight:5,number:100},{icon:0,lab:"\u4f53\u529b",type:"tl",weight:10,number:2},{icon:0,lab:"\u4f53\u529b",type:"tl",weight:5,number:3}],o.rare_rate=[{icon:0,lab:"\u4f53\u529b",type:"tl",weight:30,number:2},{icon:1,lab:"\u91d1\u5e01",type:"jb",weight:30,number:200},{icon:3,lab:"\u63d0\u793a\u5361",type:"tsk",weight:20,number:1},{icon:4,lab:"\u52a0\u65f6\u5361",type:"jsk",weight:20,number:1}],o.precious_rate=[{icon:2,lab:"\u732b\u54aa",type:"mm",weight:100,number:""},{icon:5,lab:"\u65f6\u88c5",type:"sz",weight:0,number:1}],o.cat=["cat1","cat2","cat3","cat4","cat5","cat6","cat7","cat8"],o.extra_rate=[{name:"xxjb_jb",weight:40,number:200},{name:"xjb_jb",weight:20,number:300},{name:"tl2_tl",weight:30,number:2},{name:"tl4_tl",weight:10,number:400}],o.rate=[{ratio:14},{ratio:13},{ratio:12},{ratio:12},{ratio:10},{ratio:10},{ratio:10},{ratio:8},{ratio:8},{ratio:3}],o.catConfig={1:[{part:"1",count:240}],2:[{part:"1",count:480,totalCount:720},{part:"2",count:720,totalCount:1440},{part:"3",count:960,totalCount:2400},{part:"4",count:1200,totalCount:3600}],3:[{part:"1",count:1440,totalCount:5040},{part:"2",count:1680,totalCount:6720},{part:"3",count:1920,totalCount:8640},{part:"4",count:2160,totalCount:10800}],4:[{part:"1",count:2400,totalCount:13200},{part:"2",count:2640,totalCount:15840},{part:"3",count:2880,totalCount:18720},{part:"4",count:3120,totalCount:21840}],5:[{part:"1",count:3360,totalCount:25200},{part:"2",count:3600,totalCount:28800},{part:"3",count:3840,totalCount:32640},{part:"4",count:4080,totalCount:36720}],6:[{part:"1",count:4320,totalCount:41040},{part:"2",count:4560,totalCount:45600},{part:"3",count:4800,totalCount:50400},{part:"4",count:5040,totalCount:55440}],7:[{part:"1",count:5280,totalCount:60720},{part:"2",count:5520,totalCount:66240},{part:"3",count:5760,totalCount:72e3},{part:"4",count:6e3,totalCount:78e3}],8:[{part:"1",count:6240,totalCount:84240},{part:"2",count:6480,totalCount:90720},{part:"3",count:6720,totalCount:97440},{part:"4",count:6960,totalCount:104400}],9:[{part:"1",count:7200,totalCount:111600},{part:"2",count:7440,totalCount:119040},{part:"3",count:7680,totalCount:126720},{part:"4",count:7920,totalCount:134640}]},o.charge=[{energy_10:{energy:10}},{hint_10:{hint:10}},{overtime_10:{overtime:10}},{no_ad:{energy:5,hint:5,overtime:5}},{no_ad_large:{energy:16,hint:16,overtime:16}},{no_ad_vip1:{energy:36,hint:36,overtime:36}},{no_ad_vip2:{energy:88,hint:88,overtime:88}},{no_ad_vip3:{energy:188,hint:188,overtime:188}}],o.moneyConf={energy_10:6,hint_10:6,overtime_10:6,no_ad:30,no_ad_large:68,no_ad_vip1:128,no_ad_vip2:388,no_ad_vip3:648},o.iconNameMap={left1:{nodeName:"leftIconNode1",arrName:"left1_arr",index:"_index_left1",show:!0},left2:{nodeName:"leftIconNode2",arrName:"left2_arr",index:"_index_left2",show:!0},right1:{nodeName:"rightIconNode1",arrName:"right1_arr",index:"_index_right1",show:!0},right2:{nodeName:"rightIconNode2",arrName:"right2_arr",index:"_index_right2",show:!0},fortune_Left:{nodeName:"fortune_LeftNode",arrName:"fortune_Left_arr",index:"_index_fortune_Left",show:!1},fortune_right:{nodeName:"fortune_rightNode",arrName:"fortune_right_arr",index:"_index_fortune_right",show:!1},spirit_Left:{nodeName:"spirit_LeftNode",arrName:"spirit_Left_arr",index:"_index_spirit_Left",show:!1},spirit_right:{nodeName:"spirit_rightNode",arrName:"spirit_right_arr",index:"_index_spirit_right",show:!1},Offline_Left1:{nodeName:"Offline_left1Node",arrName:"Offline_left1_arr",index:"_index_Offline_left1",show:!1},Offline_Left2:{nodeName:"Offline_left2Node",arrName:"Offline_left2_arr",index:"_index_Offline_left2",show:!1},Offline_right1:{nodeName:"Offline_right1Node",arrName:"Offline_right1_arr",index:"_index_Offline_right1",show:!1},Offline_right2:{nodeName:"Offline_right2Node",arrName:"Offline_right2_arr",index:"_index_Offline_right2",show:!1},Setup1:{nodeName:"SetupNode1",arrName:"Setup1_arr",index:"_index_Setup1",show:!1},Setup2:{nodeName:"SetupNode2",arrName:"Setup2_arr",index:"_index_Setup2",show:!1},Setup3:{nodeName:"SetupNode3",arrName:"Setup3_arr",index:"_index_Setup3",show:!1},Setup4:{nodeName:"SetupNode4",arrName:"Setup4_arr",index:"_index_Setup4",show:!1}},cc._RF.pop()},{}],Event_Mgr:[function(e,t,o){"use strict";cc._RF.push(t,"a237fj9Ee1F5opNJJ+76+3F","Event_Mgr"),Object.defineProperty(o,"__esModule",{value:!0});o.default={events_map:{},init:function(){},on:function(e,t,o,a){this.events_map[e]||(this.events_map[e]=[]),this.events_map[e].push({caller:t,func:o,is_once:a})},once:function(e,t,o){this.on(e,t,o,!0)},off:function(e,t,o){if(this.events_map[e]){for(var a=this.events_map[e],i=0;i<a.length;i++){var n=a[i];if(n.caller==t&&n.func==o){a.splice(i,1);break}}a.length<=0&&(this.events_map[e]=null)}},offAll:function(){this.events_map={}},emit:function(e,t){var o=this;this.events_map[e]&&this.events_map[e].forEach(function(a){a.func.call(a.caller,t),a.is_once&&o.off(e,a.caller,a.func)})}},cc._RF.pop()},{}],Global:[function(e,t,o){"use strict";cc._RF.push(t,"2bda1LfLF5CJrB06XDGcCpB","Global"),Object.defineProperty(o,"__esModule",{value:!0});o.default={gameData:{musicEnabled:!0,soundEnabled:!0,updateTimestamp:0,videoCount:0,lastVideoTimestamp:0,shareCount:0,lastShareTimestamp:0,level:1,insertAdCount:0,dif_strength:1,dif_lastTime:0,dif_unlockLevel:0,hammerCount:0,OneHammer:!1,glod:100,muban_num:720,box_num:0,has_ship:!1,catPro:.21,catRate:0,ship:1,part:0,catTips:!1,catBtnTips:!1,ship_pao:!1,hint_num:0,hint_click_num:0,overtime_num:0,no_ad:!1,no_ad_large:!1,no_ad_vip1:!1,no_ad_vip2:!1,no_ad_vip3:!1,no_ad_day:1,no_ad_large_day:1,rota_num:1,rota_coefficient:1,CatScene:{ship1:{cat0:"cat0"},ship2:{cat0:null,cat1:null,cat2:null,cat3:null,cat4:null},ship3:{cat0:null,cat1:null,cat2:null,cat3:null,cat4:null},ship4:{cat0:null,cat1:null,cat2:null,cat3:null,cat4:null},ship5:{cat0:null,cat1:null,cat2:null,cat3:null,cat4:null}},cat:["cat0"],ship_part_un:{ship1:{0:null},ship2:{0:null,1:null,2:null,3:null},ship3:{0:null,1:null,2:null,3:null},ship4:{0:null,1:null,2:null,3:null},ship5:{0:null,1:null,2:null,3:null}}},config:{show_GameClub:!1,show_screenad:!1,deny_shield:!1,share_first:!1,allow_share:!0,allow_video:!0,share_number:50,video_number:1e5,share_time:2,banner_time:180,share_delay:4,online:!0,show_idiom:!1,difference_idiom:!1,oldfirst_vedio:2,radius:150,debug:!1,allow_pay:!0,deny_allowpay:!1,in_time_allowpay1:!0,in_time_allowpay2:!0,allow_revive:!0,banner_delay:1,banner_delay_ratio:.8,share_fail:"'\u64cd\u4f5c\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5",sharefail_cancel:"\u77e5\u9053\u4e86",sharefail_retry:"\u91cd\u65b0\u53d1\u9001",distance_iphonex:0,banner_click_time:1,charge:[],moneyConf:{},mission_time:80,firstshare_fail:!1,share_energy:1,energy_time:6e5,first_energy:5,newplayer_energy:1,newgift_energy:2,show_guide:!0,newplayer_gift:!0,hammer_rate:.15,show_hammer:!0,chest_json:[],show_dl:!0,offlinec_energy:1,offlinechest:!0,offlineTime:18e5,honorc_energy:1,show_honorchest:!0,showLabel:!1,code:!1,nature_deny_share:!1,ship1_back:"\u597d\u53ef\u7231\u7684\u5c0f\u732b\u54aa",ship2_back:"\u7ee7\u7eed\u95ef\u5173\u83b7\u5f97\u66f4\u591a\u7684\u55b5\u5427",fake_share:!0,count:{fullcount:150,zerocount:50},unlock_number:10,glod:100,fake_fail:"\u5206\u4eab\u5931\u8d25,\u8bf7\u6362\u4e2a\u7fa4",portal_switch:!1,show_zhuanpan:!0,energy_top:20,receive_wood:.1,Guidance_button:!1,catgold:2e3,games:{},shares:{},videos:{},banners:{}},user:{channel:null,invite:null},audio:{volume:.5}},cc._RF.pop()},{}],Grade:[function(e,t,o){"use strict";cc._RF.push(t,"40ce08kIntA6rP5sm+9VwAW","Grade"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Global"),i=e("./ScrollViewBetter"),n=e("./Event_Mgr"),c=e("../different/passPage"),r=e("./iosAd"),s=cc._decorator,d=s.ccclass,l=s.property,u=function(e){function t(){var t=e.call(this)||this;return t.gradeBox=null,t.gradeList=null,t.scrollView=null,t.stars=null,t.starTex=null,t.light1=null,t.light2=null,t.gradeUpBox=null,t.victory=null,t.confirm=null,t.babble=null,t.pao=null,t.gradeIdx=0,t.starNum=0,t.upStarIdx=0,t.pos="home",o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.start=function(){var e=this;this.confirm.on(cc.Node.EventType.TOUCH_START,function(t){e.gradeUpBox.active=!1})},t.prototype.initGrade=function(){var e=this;cc.loader.loadRes("grade/grade",function(t,o){t&&console.error("loadRes grading json error:",t),e.gradeJson=o.json,console.log("json",e.gradeJson),e.gradeIdx=0;for(var i=a.default.gameData.level,n=!0,c=0;c<e.gradeJson.length;c++){if(i<=e.gradeJson[c].upStar*e.gradeJson[c].star){e.starNum=Math.ceil(i/e.gradeJson[c].upStar),e.upStarIdx=(i-1)%e.gradeJson[c].upStar,e.gradeIdx=c,n=!1;break}i-=e.gradeJson[c].upStar*e.gradeJson[c].star}0==e.gradeIdx&&(e.starNum--,e.gradeJson[e.gradeIdx].star--),n&&(e.gradeIdx=e.gradeJson.length-1,e.starNum=Math.floor(e.gradeJson[e.gradeIdx].star),e.upStarIdx=0),e.updateGrade(),e.gradeUpBox.getChildByName("confirm").on(cc.Node.EventType.TOUCH_START,function(t){e.hideGradeUp()}),e.gradeBox.getChildByName("icon").getChildByName("iconclick").on(cc.Node.EventType.TOUCH_START,function(t){e.babble.active=!1,e.updateGradeList(),r.default.instance.hideBanner(),e.gradeList.active=!0}),e.initGradeList()})},t.prototype.initGradeList=function(){var e=this;this.gradeIdxList=[0];for(var t=1;t<this.gradeJson.length;t++)this.gradeJson[t].level!==this.gradeJson[t-1].level&&this.gradeIdxList.push(t);var o=this.gradeIdxList.length,a=["grade/gradeBottom","grade/bottom","grade/arrow","grade/arrow2","grade/gradeLight1","grade/gradeLight2"];for(t=1;t<=o;t++)a.push("grade/grade"+t+"_icon");cc.loader.loadResArray(a,function(t,n){t&&console.error("error",t),e.scrollView.getComponent(i.default).createItems(Math.ceil(o),function(t,i){var n=e.gradeJson[e.gradeIdx].level-1;i==n?(t.getChildByName("arrow").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes(a[2])),t.getChildByName("bottom").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes(a[0]))):(t.getChildByName("arrow").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes(a[3])),t.getChildByName("bottom").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes(a[1]))),t.getChildByName("light").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes(i>n?a[5]:a[4])),t.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("grade/grade"+(i+1)+"_icon")),t.getChildByName("icon").color=i>n?new cc.Color(0,0,0):new cc.Color(255,255,255);var c=e.gradeJson[e.gradeIdxList[i]].name;t.getChildByName("title").getComponent(cc.Label).string=+c[c.length-1]?c.substr(0,c.length-1):c,t.getChildByName("msg").getComponent(cc.Label).string="\u5b8c\u6210\u5173\u5361"+e.gradeJson[e.gradeIdxList[i]].unlockLvl,t.getChildByName("upArrow").active=i!=o-1},0)}),this.gradeList.getChildByName("close").on(cc.Node.EventType.TOUCH_START,function(t){e.gradeList.active=!1,"pass"==e.pos&&n.default.emit("showPassProgress"),r.default.instance.showBanner()})},t.prototype.updateGradeList=function(){this.scrollView.getComponent(i.default).updateItemsContent(),this.scrollView.getComponent(cc.ScrollView).scrollTo(cc.v2(0,(this.gradeJson[this.gradeIdx].level-1)/(this.gradeIdxList.length-1)),.5)},t.prototype.addGrade=function(e){var t=this;void 0===e&&(e="home"),this.showGrade(e);var o=!1,i=!1;this.gradeIdx<this.gradeJson.length-1&&(this.upStarIdx++,this.upStarIdx>=this.gradeJson[this.gradeIdx].upStar&&(this.upStarIdx=0,this.starNum++,o=!0,this.starNum>this.gradeJson[this.gradeIdx].star&&(this.starNum=1,this.gradeIdx++,this.gradeIdx=Math.min(this.gradeJson.length-1,this.gradeIdx),this.gradeJson[this.gradeIdx].level!==this.gradeJson[this.gradeIdx-1].level&&this.gradeIdx!==this.gradeJson.length-1&&(i=!0)))),this.updateGrade(e,o);var s=function(){a.default.config.show_hammer&&a.default.gameData.hammerCount>=3&&!i?n.default.emit("progOpen"):(r.default.instance.showBanner(),!i&&c.default.instance.showBtn(),i||a.default.gameData.ship_part_un.ship1[0]&&n.default.emit("showCatbtn","pass"),console.log("Event_Mgr.emit('showNextBtn')111"),!i&&a.default.config.show_honorchest&&a.default.honorNum>=2&&(cc.find("Canvas/panel/giftPanel").getComponent("giftPanel").open({source:"honor",pos:"honorchest"}),a.default.honorNum=0))};this.victory.stopAllActions(),this.victory.scale=.5,this.victory.active=!0,this.victory.runAction(cc.sequence(cc.scaleTo(.3,1.3),cc.scaleTo(.15,1),cc.callFunc(function(){o?t.effAddStar(function(){i?t.scheduleOnce(function(){t.showGradeUp()},1):(0==t.gradeIdx&&(t.pao.stopAllActions(),t.scheduleOnce(function(){t.pao.active=!0,t.pao.scale=0,t.pao.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.1,1)))},.7),t.scheduleOnce(function(){t.pao.active=!1},3)),s&&s())}):s&&s()})))},t.prototype.updateGrade=function(e,t){var o=this;void 0===e&&(e="home"),void 0===t&&(t=!1),console.log("\u5173\u5361\u6570:",a.default.gameData.level,"\u6bb5\u4f4d\u7d22\u5f15:",this.gradeIdx,"\u661f\u661f\u6570:",this.starNum+"/"+this.gradeJson[this.gradeIdx].star,"\u661f\u661f\u589e\u52a0\u8ba1\u6570:",this.upStarIdx,"\u5173\u5361\u914d\u7f6e:",this.gradeJson[this.gradeIdx]);var i=["grade/grade"+this.gradeJson[this.gradeIdx].level+"_icon","grade/grade"+this.gradeJson[this.gradeIdx].level,"grade/star","grade/nostar"];1==this.gradeIdx&&1==this.starNum&&0==this.upStarIdx&&(this.babble.active=!0);var n=+this.gradeJson[this.gradeIdx].name[this.gradeJson[this.gradeIdx].name.length-1];n&&i.push("grade/num"+n),cc.loader.loadResArray(i,function(a,i){if(a&&console.error("loadRes grading assets error:",a),o.gradeBox.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i[0]),o.gradeBox.getChildByName("titleTex").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i[1]),n?(o.gradeBox.getChildByName("titleNum").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i[4]),o.gradeBox.getChildByName("titleNum").active=!0,o.gradeBox.getChildByName("titleTex").x=-15):(o.gradeBox.getChildByName("titleNum").active=!1,o.gradeBox.getChildByName("titleTex").x=0),o.gradeIdx<o.gradeJson.length-1){var c=(o.gradeJson[o.gradeIdx].star-o.starNum+1)*o.gradeJson[o.gradeIdx].upStar-o.upStarIdx;o.gradeBox.getChildByName("msg").getComponent(cc.Label).string="\u8fd8\u5dee"+c+"\u5173\u664b\u5347"+o.gradeJson[o.gradeIdx+1].name}else o.gradeBox.getChildByName("msg").getComponent(cc.Label).string="\u5df2\u5230\u8fbe\u6700\u9ad8\u6bb5\u4f4d";if(o.gradeJson[o.gradeIdx].star<=5){for(var r=1;r<=5;r++)o.stars.getChildByName(r+"").scale=1,o.stars.getChildByName(r+"").active=r<=o.gradeJson[o.gradeIdx].star,o.stars.getChildByName(r+"").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(r<=o.starNum?i[2]:i[3]);o.stars.x=-40*(o.gradeJson[o.gradeIdx].star-1),o.starTex.active=!1}else{for(r=1;r<=5;r++)o.stars.getChildByName(r+"").scale=1,o.stars.getChildByName(r+"").active=r<=1,r<=1&&(o.stars.getChildByName(r+"").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i[2]));o.stars.x=-40,o.starTex.getComponent(cc.Label).string="x "+o.starNum,o.starTex.active=!0}o.starNum>0&&o.starNum<=5&&t&&(o.stars.getChildByName(Math.floor(o.starNum)+"").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i[3])),o.showGrade(e)})},t.prototype.lightRotate=function(){this.light1.angle+=1.25,this.light2.angle-=1},t.prototype.showGrade=function(e){void 0===e&&(e="home"),this.gradeBox.stopAllActions(),this.gradeBox.getChildByName("icon").stopAllActions(),this.pos=e,"home"==e?(this.victory.active=!1,this.gradeBox.y=100,this.gradeBox.getChildByName("icon").runAction(cc.sequence(cc.moveTo(.4,0,220),cc.moveTo(.4,0,200)).repeatForever())):(this.gradeBox.y=-35,this.gradeBox.getChildByName("icon").runAction(cc.sequence(cc.moveTo(.4,0,220),cc.moveTo(.4,0,200)).repeatForever())),this.gradeBox.active=!0},t.prototype.hideGrade=function(){this.gradeBox.active=!1,this.unschedule(this.lightRotate),this.node.stopAllActions(),this.gradeBox.getChildByName("icon").stopAllActions()},t.prototype.effAddStar=function(e){var t;(t=this.starNum<=5?this.stars.getChildByName(this.starNum+""):this.stars.getChildByName("1")).getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(cc.loader.getRes("grade/star")),t.scale=0,t.stopAllActions(),t.runAction(cc.sequence(cc.scaleTo(.4,2.15),cc.scaleTo(.2,1),cc.callFunc(function(){e&&e()})))},t.prototype.showGradeUp=function(){var e=this;this.unschedule(this.lightRotate),this.schedule(this.lightRotate,.02,cc.macro.REPEAT_FOREVER);var t=["grade/grade"+this.gradeJson[this.gradeIdx].level+"_icon","grade/grade"+this.gradeJson[this.gradeIdx].level],o=+this.gradeJson[this.gradeIdx].name[this.gradeJson[this.gradeIdx].name.length-1];o&&t.push("grade/num"+o),cc.loader.loadResArray(t,function(t,a){t&&console.error("loadRes grading assets error:",t),e.gradeUpBox.getChildByName("icon").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a[0]),e.gradeUpBox.getChildByName("titleTex").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a[1]),o?(e.gradeUpBox.getChildByName("titleNum").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(a[2]),e.gradeUpBox.getChildByName("titleNum").active=!0,e.gradeUpBox.getChildByName("titleTex").x=-15):(e.gradeUpBox.getChildByName("titleNum").active=!1,e.gradeUpBox.getChildByName("titleTex").x=0),e.gradeUpBox.active=!0})},t.prototype.hideGradeUp=function(){this.unschedule(this.lightRotate),a.default.config.show_hammer?(n.default.emit("showPassProgress"),a.default.gameData.hammerCount>=3?(n.default.emit("openPassHammer"),r.default.instance.hideBanner()):r.default.instance.showBanner()):r.default.instance.showBanner(),a.default.config.show_honorchest&&a.default.honorNum>=2&&(cc.find("Canvas/panel/giftPanel").getComponent("giftPanel").open({source:"honor",pos:"honorchest"}),a.default.honorNum=0),c.default.instance.showBtn(),a.default.gameData.ship_part_un.ship1[0]&&n.default.emit("showCatbtn","pass"),console.log("Event_Mgr.emit('showNextBtn')222"),this.gradeUpBox.active=!1},__decorate([l(cc.Node)],t.prototype,"gradeBox",void 0),__decorate([l(cc.Node)],t.prototype,"gradeList",void 0),__decorate([l(cc.Node)],t.prototype,"scrollView",void 0),__decorate([l(cc.Node)],t.prototype,"stars",void 0),__decorate([l(cc.Node)],t.prototype,"starTex",void 0),__decorate([l(cc.Node)],t.prototype,"light1",void 0),__decorate([l(cc.Node)],t.prototype,"light2",void 0),__decorate([l(cc.Node)],t.prototype,"gradeUpBox",void 0),__decorate([l(cc.Node)],t.prototype,"victory",void 0),__decorate([l(cc.Node)],t.prototype,"confirm",void 0),__decorate([l(cc.Node)],t.prototype,"babble",void 0),__decorate([l(cc.Node)],t.prototype,"pao",void 0),t=o=__decorate([d],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../different/passPage":"passPage","./Event_Mgr":"Event_Mgr","./Global":"Global","./ScrollViewBetter":"ScrollViewBetter","./iosAd":"iosAd"}],Loading:[function(e,t,o){"use strict";cc._RF.push(t,"0ebd25Y85NFtbR3BNGfcVj0","Loading"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Global"),i=e("../common/utils"),n=e("../StartPageControl"),c=e("../different/giftPanel"),r=e("./Event_Mgr"),s=e("./iosAd"),d=cc._decorator,l=d.ccclass,u=(d.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){a.default.different={},o.LoadingInstance=this},t.prototype.start=function(){this.loadGameData(),this.onGameDataLoaded(),r.default.on("updateGame",this,this.updateGameData)},t.prototype.loadGameData=function(){var e=JSON.parse(cc.sys.localStorage.getItem("gameData"));e?(a.default.isNewUser=!1,a.default.gameData=Object.assign(a.default.gameData,e)):(a.default.isNewUser=!0,this.updateGameData(!0)),i.isSameDay(Date.now(),a.default.gameData.updateTimestamp)||(a.default.gameData.insertAdCount=0,a.default.gameData.rota_num=1,a.default.gameData.rota_coefficient=1,a.default.gameData.hint_click_num=0),console.log("Global",a.default)},t.prototype.onGameDataLoaded=function(){i.isSameDay(Date.now(),a.default.gameData.updateTimestamp)||(a.default.gameData.insertAdCount=0,a.default.gameData.rota_num=1,a.default.gameData.rota_coefficient=1,a.default.gameData.hint_click_num=0),console.log("onGameDataLoaded",a.default.gameData),a.default.gameData.updateTimestamp<=0?a.default.gameData.updateTimestamp=Date.now():a.default.gameData.updateTimestamp,a.default.gameData.dif_lastTime<=0?a.default.gameData.dif_lastTime=Date.now():a.default.gameData.dif_lastTime,this.offlineRestore("dif_strength",a.default.config.first_energy,a.default.config.energy_time,"dif_lastTime"),a.default.isNewUser&&(a.default.gameData.dif_strength=a.default.config.newplayer_energy),cc.sys.OS_IOS||(a.default.gameData.dif_strength=15,a.default.gameData.level=3),a.default.config.allow_pay=!1,1!=a.default.gameData.level&&(a.default.gameData.level-1)%a.default.config.unlock_number==0&&(a.default.unlockNext=a.default.gameData.level),cc.find("Canvas/panel/strengthUI").active=!0,cc.find("Canvas/panel/strengthUI/strengthBG").active=!0,cc.find("Canvas/panel/GlodUI").active=!0,cc.find("Canvas/panel/GlodUI/glodBG").active=!0,this.createGame(),console.log("\u521d\u59cb\u5316\u5b8c\u6e38\u620f\u4f53\u529b",a.default.gameData.dif_strength),this.offLine30(),a.default.gameData.ship_part_un.ship1[0]&&r.default.emit("showCatbtn","home"),a.default.config.show_zhuanpan&&r.default.emit("showcatZhuanbtn"),r.default.emit("hideZhuanBtn"),r.default.emit("showRed"),s.default.instance.showBanner(),this.updateGameData(!0)},t.prototype.createGame=function(){n.default.instance.initGrade(),n.default.instance.init()},t.prototype.updateGameData=function(e){void 0===e&&(e=!1),a.default.gameData.updateTimestamp=Date.now(),a.default.gameData.dif_lastTime=Date.now(),console.log("updateGameData",a.default.gameData),cc.sys.localStorage.setItem("gameData",JSON.stringify(a.default.gameData))},t.prototype.offLine30=function(){if(a.default.config.offlinechest&&!a.default.isNewUser){var e=Date.now()-a.default.gameData.updateTimestamp;console.log("\u662f\u5426\u79bb\u7ebf30\u5206\u949f==",e/1e3/60),e>=a.default.config.offlineTime&&c.default.instance.open({source:"offline",pos:"offlinechest"})}},t.prototype.offlineRestore=function(e,t,o,i,n){var c=a.default.gameData[e]||0,r=t-a.default.gameData[e],s=r*o,d=(new Date).getTime(),l=d-a.default.gameData.updateTimestamp;if(console.log("\u79bb\u7ebf\u6062\u590d","\u79bb\u7ebf\u65f6\u95f4\uff1a",l,"\u6062\u590d\u65f6\u95f4",o),r>0)if(l>=s)console.log("\u8fdb\u4e86\u5417"),a.default.gameData[i]=0,c=t,a.default.gameData[e]=c,a.default.gameData[i]=Date.now();else{var u=Math.floor(l/o);console.log("\u767b\u5165\u79bb\u7ebf\u6062\u590dxh","\u79bb\u7ebf\u65f6\u95f4\uff1a",l,"\u5269\u4f59\u4f53\u529b",a.default.gameData[e],"\u53ef\u6062\u590d\u4f53\u529b\u6570",u,a.default.gameData[i],Date.now()),(c+=u)>=t?("onshow"!=n&&(c=t),a.default.gameData[e]=c,a.default.gameData[i]=Date.now()):(a.default.gameData[e]=c,a.default.gameData[i]=d-l%o)}},t.prototype.buyService=function(){var e={},t=a.default.config.charge,o=!1,i=function(a){o=!0,e={};for(var i=0;i<t.length;i++)for(var n in t[i])"energy_10"!=n&&"hint_10"!=n&&"overtime_10"!=n&&n==a&&(e.energy_num=t[i][n].energy,e.hint_num=t[i][n].hint,e.overtime_num=t[i][n].overtime)};if(a.default.gameData.no_ad_vip3)i("no_ad_vip3");else if(a.default.gameData.no_ad_vip2)i("no_ad_vip2");else if(a.default.gameData.no_ad_vip1)i("no_ad_vip1");else if(a.default.gameData.no_ad_large){if(a.default.gameData.no_ad_large_day+=1,a.default.gameData.no_ad_large_day>=30)return a.default.gameData.no_ad_large_day=0,void(a.default.gameData.no_ad_large=!1);i("no_ad_large")}else if(a.default.gameData.no_ad){if(a.default.gameData.no_ad_day+=1,a.default.gameData.no_ad_day>=30)return a.default.gameData.no_ad_day=0,void(a.default.gameData.no_ad=!1);i("no_ad")}o&&(r.default.emit("addWelfare",e),r.default.emit("receiveFun",e)),console.log("\u767b\u5165\u662f\u5426\u83b7\u53d6\u793c\u5305\uff1a",e,a.default.gameData)},t.prototype.isVip=function(){a.default.gameData.no_ad_vip3?a.default.VIP=!0:a.default.gameData.no_ad_vip2?a.default.VIP=!0:a.default.gameData.no_ad_vip1?a.default.VIP=!0:a.default.gameData.no_ad_large?a.default.VIP=!0:a.default.gameData.no_ad&&(a.default.VIP=!0)},t=o=__decorate([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../StartPageControl":"StartPageControl","../common/utils":"utils","../different/giftPanel":"giftPanel","./Event_Mgr":"Event_Mgr","./Global":"Global","./iosAd":"iosAd"}],Lottery:[function(e,t,o){"use strict";cc._RF.push(t,"fa5ffyogTJPJI7F1uFg8L99","Lottery"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../common/Global"),i=e("../common/utils"),n=e("../common/Event_Mgr"),c=e("../common/Const"),r=e("../common/receive"),s=e("./passPage"),d=e("../common/iosAd"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=e.call(this)||this;return t.hammerNode=null,t.hammerPrefab=null,t.progressBar=null,t.boxPrefab=null,t.box_lottery=null,t.box_hammer=null,t.addHammerBtn=null,t.close_hammerbtn=null,t.receiveNode=null,t.oneBtn=null,t.doubleBtn=null,t.openboxAnim=null,t.prog_box=null,t.prog_qipao=null,t.openOneHammerNode=null,t.jb=null,t.tl=null,t.cz=null,t.hammerPos_arr=[],t.gfit={},t.kk=!1,t.curr_box_num=0,t.extraNodeIcon=null,t.extraNum=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){a.default.honorNum=0,this.reset(),n.default.on("showPassProgress",this,this.showPassProgress),n.default.on("hidePassProgress",this,this.hidePassProgress),n.default.on("showGameHammer",this,this.showGameHammer),n.default.on("hideGameHammer",this,this.hideGameHammer),n.default.on("hammer_reset",this,this.reset),n.default.on("randomHammer",this,this.randomHammer),n.default.on("openPassHammer",this,this.openPassHammer),n.default.on("hidePassHammer",this,this.hidePassHammer),n.default.on("updatePassProgress",this,this.updatePassProgress),n.default.on("progOpen",this,this.passProgressAnim),this.close_hammerbtn.on(cc.Node.EventType.TOUCH_START,this.hidePassHammer,this),this.oneBtn.on(cc.Node.EventType.TOUCH_START,this.oneReceive,this),this.doubleBtn.on(cc.Node.EventType.TOUCH_START,this.doubleReceive,this),this.addHammerBtn.on(cc.Node.EventType.TOUCH_START,this.addHammer,this),this.prog_box.on(cc.Node.EventType.TOUCH_START,this.prog_box_click,this)},t.prototype.reset=function(){this.hammerPos_arr=[];for(var e=a.default.gameData.hammerCount,t=0;t<this.hammerNode.childrenCount;t++){var o=this.hammerNode.children[t].children[0];e>0?(o.active=!0,e--):o.active=!1}this.gfit={},this.updatePassProgress(a.default.gameData.hammerCount),console.log("\u9524\u5b50reset==",a.default.gameData.hammerCount,e)},t.prototype.start=function(){},t.prototype.randomHammer=function(e,t){if(!(this.hammerPos_arr.length>=3||a.default.gameData.hammerCount>=3))if(Math.random()<=a.default.config.hammer_rate)this.hammerPos_arr.push(e);else if(a.default.gameData.level<=3&&5==t){var o=i.goRepetition(this.hammerPos_arr,["spot1","spot2","spot3","spot4","spot5"]);this.hammerPos_arr.push(o[0])}},t.prototype.showGameHammer=function(e){a.default.gameData.hammerCount>0&&(this.hammerNode.active=!0),e&&this.hammerPos_arr.indexOf(e.name)>=0&&(this.hammerNode.active=!0,this.hammerAction(e))},t.prototype.hideGameHammer=function(){this.hammerNode.active=!1},t.prototype.passProgressAnim=function(){this.progressBar.progress=.6,this.kk=!0},t.prototype.update=function(e){if(this.kk){if(this.progressBar.progress>=1)return this.openPassHammer(),void(this.kk=!1);this.progressBar.progress+=e}},t.prototype.openPassHammer=function(){for(var e=0;e<this.box_hammer.childrenCount;e++)this.box_hammer.children[e].children[0].active=!0;this.curr_box_num=0;var t=i.getRandom(c.extra_rate),o=t.name;o=o.split("_")[1],this.extraName=o,this.extraNodeIcon.spriteFrame=this[o],this.extraNum.string="x"+t.number,this.extracount=t.number,this.close_hammerbtn.active=!1,this.addHammerBtn.active=!1,d.default.instance.hideBanner(),this.box_lottery.active=!0;var a=this.box_lottery.getChildByName("lott");a.scale=0;var n=a.getChildByName("box_content");n.removeAllChildren(),this.createBox(n),a.runAction(cc.sequence(cc.scaleTo(.25,1.2),cc.scaleTo(.1,1),cc.callFunc(function(){})))},t.prototype.hidePassHammer=function(){this.box_lottery.active=!1,console.log("\u5173\u95ed\u5b9d\u7bb1\u6253\u5f00\u5e7f\u544a"),d.default.instance.showBanner(),n.default.emit("showNextBtn"),s.default.instance.showBtn(),a.default.gameData.ship_part_un.ship1[0]&&n.default.emit("showCatbtn","pass")},t.prototype.createBox=function(e){for(var t=0;t<9;t++){var o=cc.instantiate(this.boxPrefab);o.on(cc.Node.EventType.TOUCH_START,this.clickBox,this),e.addChild(o),o.children[0].runAction(cc.sequence(cc.moveTo(.5,0,5),cc.moveTo(.5,0,-5),cc.moveTo(.5,0,5),cc.moveTo(.5,0,-5)).repeatForever())}},t.prototype.clickBox=function(e){var t=this;if(a.default.gameData.hammerCount<=0)n.default.emit("openTips","\u9524\u5b50\u4e0d\u591f\u54e6\uff0c\u53ef\u770b\u89c6\u9891\u83b7\u53d6");else{var o=e.target;o.off(cc.Node.EventType.TOUCH_START);var r=[];r=c.box_rate,console.log("\u7bb1\u5b50==",o.name,"\u914d\u7f6e\uff1a",r);var s=i.getRandom(r),d=s.name;d=d.split("_")[1],o.children[0].active=!1,o.children[1].getComponent(cc.Sprite).spriteFrame=this[d],o.children[1].active=!0,o.children[1].children[0].getComponent(cc.Label).string="x"+s.number,this.addNum(d,s.number),this.curr_box_num++,a.default.gameData.hammerCount--;var l=cc.instantiate(this.openboxAnim);o.addChild(l),l.active=!0;var u=a.default.gameData.hammerCount,h=this.receiveNode.getChildByName("ui"),f=h.getChildByName("gfit").children[2-u];f.getComponent(cc.Sprite).spriteFrame=this[d],f.children[0].getComponent(cc.Label).string="x"+s.number,this.box_hammer.children[u].children[0].active=!1,a.default.gameData.hammerCount<=0&&this.scheduleOnce(function(){t.receiveNode.active=!0,h.scale=0,h.runAction(cc.scaleTo(.2,1))},.5)}},t.prototype.addNum=function(e,t){this.gfit[e]?this.gfit[e]+=t:this.gfit[e]=t},t.prototype.hammerAction=function(e){var t=this;if(!(a.default.gameData.hammerCount>=3)){var o=cc.instantiate(this.hammerPrefab);o.parent=e.parent,o.position=e.position,o.scale=1.6;var n=i.localConvertLocalPointAR(o.parent,this.hammerNode.children[a.default.gameData.hammerCount]);this.updateHammer();var c=a.default.gameData.hammerCount;o.runAction(cc.sequence(cc.moveTo(1,n),cc.callFunc(function(){o.destroy(),t.hammerNode.children[c-1].children[0].active=!0,a.default.gameData.OneHammer||(t.openOneHammer(),a.default.gameData.OneHammer=!0)})))}},t.prototype.updateHammer=function(){a.default.gameData.hammerCount+=1,a.default.gameData.hammerCount>=3&&(a.default.gameData.hammerCount=3,a.default.honorNum=0),this.updatePassProgress(a.default.gameData.hammerCount)},t.prototype.updatePassProgress=function(e){switch(e){case 0:this.progressBar.progress=0,this.progressBar.node.children[1].children[0].active=!1,this.progressBar.node.children[2].children[0].active=!1,this.progressBar.node.children[3].children[0].active=!1;break;case 1:this.progressBar.progress=.3,this.progressBar.node.children[1].children[0].active=!0;break;case 2:this.progressBar.progress=.6,this.progressBar.node.children[2].children[0].active=!0}},t.prototype.showPassProgress=function(){this.progressBar.node.active=!0},t.prototype.hidePassProgress=function(){this.progressBar.node.active=!1},t.prototype.receiveFun=function(e){var t=this;for(var o in this.gfit)if("jb"==o){var a=this.gfit[o]*e;n.default.emit("addGlodAcion",{node:this.receiveNode,number:a})}else if("tl"==o){a=this.gfit[o]*e;n.default.emit("addStrength",a)}this.close_hammerbtn.active=!0,this.addHammerBtn.active=!0,this.receiveNode.active=!1,this.reset(),this.curr_box_num>=9&&(this.curr_box_num=0,this.addHammerBtn.active=!1,r.default.instance.openRev({sp:[this[this.extraName]],lab:[this.extracount],title:"\u606d\u559c\u989d\u5916\u83b7\u5f97",type:this.extraName,cb:function(){t.hidePassHammer()}},1,"box"))},t.prototype.oneReceive=function(){this.receiveFun(1)},t.prototype.doubleReceive=function(){var e=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){d.default.instance.showIosVideo(function(){e.receiveFun(2)})}else this.receiveFun(2)},t.prototype.addHammer=function(){var e=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){d.default.instance.showIosVideo(function(){e.close_hammerbtn.active=!1,e.addHammerBtn.active=!1,a.default.gameData.hammerCount=3;for(var t=0;t<e.box_hammer.childrenCount;t++)e.box_hammer.children[t].children[0].active=!0})}else{this.close_hammerbtn.active=!1,this.addHammerBtn.active=!1,a.default.gameData.hammerCount=3;for(var t=0;t<this.box_hammer.childrenCount;t++)this.box_hammer.children[t].children[0].active=!0}},t.prototype.prog_box_click=function(){a.default.gameData.hammerCount>=3||(this.prog_qipao.stopAllActions(),this.prog_qipao.scale=0,this.prog_qipao.active=!0,this.prog_qipao.runAction(cc.sequence(cc.scaleTo(.35,1.3),cc.scaleTo(.15,1),cc.delayTime(2),cc.scaleTo(.35,1.3),cc.scaleTo(.15,0))))},t.prototype.openOneHammer=function(){var e=this.openOneHammerNode.children[0];e.scale=0,this.openOneHammerNode.active=!0,i.commonAction(e)},t.prototype.closeOneHammer=function(){this.openOneHammerNode.active=!1},__decorate([h(cc.Node)],t.prototype,"hammerNode",void 0),__decorate([h(cc.Prefab)],t.prototype,"hammerPrefab",void 0),__decorate([h(cc.ProgressBar)],t.prototype,"progressBar",void 0),__decorate([h(cc.Prefab)],t.prototype,"boxPrefab",void 0),__decorate([h(cc.Node)],t.prototype,"box_lottery",void 0),__decorate([h(cc.Node)],t.prototype,"box_hammer",void 0),__decorate([h(cc.Node)],t.prototype,"addHammerBtn",void 0),__decorate([h(cc.Node)],t.prototype,"close_hammerbtn",void 0),__decorate([h(cc.Node)],t.prototype,"receiveNode",void 0),__decorate([h(cc.Node)],t.prototype,"oneBtn",void 0),__decorate([h(cc.Node)],t.prototype,"doubleBtn",void 0),__decorate([h(cc.Node)],t.prototype,"openboxAnim",void 0),__decorate([h(cc.Node)],t.prototype,"prog_box",void 0),__decorate([h(cc.Node)],t.prototype,"prog_qipao",void 0),__decorate([h(cc.Node)],t.prototype,"openOneHammerNode",void 0),__decorate([h(cc.SpriteFrame)],t.prototype,"jb",void 0),__decorate([h(cc.SpriteFrame)],t.prototype,"tl",void 0),__decorate([h(cc.SpriteFrame)],t.prototype,"cz",void 0),__decorate([h(cc.Sprite)],t.prototype,"extraNodeIcon",void 0),__decorate([h(cc.Label)],t.prototype,"extraNum",void 0),t=o=__decorate([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../common/Const":"Const","../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/receive":"receive","../common/utils":"utils","./passPage":"passPage"}],Navigator:[function(e,t,o){"use strict";cc._RF.push(t,"fec02t+11ZDD6lPnDmr5MNT","Navigator"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Ws"),i=e("./Global"),n=e("./Event_Mgr"),c=e("./Const"),r=cc._decorator,s=r.ccclass,d=r.property,l=function(e){function t(){var t=e.call(this)||this;return t.drawerNode=null,t.drawerPanelNode=null,t.drawerBackgroundNode=null,t.drawerOpenButtonNode=null,t.drawerCloseButtonNode=null,t.drawerContentNode=null,t.draweIconPrefab=null,t.moregameNode=null,t.moregamePanelNode=null,t.moregameBackgroundNode=null,t.moregameOpenButtonNode=null,t.moregameCloseButtonNode=null,t.moregameContentNode=null,t.moregameIconPrefab=null,t.homeIconNodeList=[],t.iconNode=null,t.rightIconNode1=null,t.rightIconNode2=null,t.leftIconNode1=null,t.leftIconNode2=null,t.fortune_LeftNode=null,t.fortune_rightNode=null,t.spirit_LeftNode=null,t.spirit_rightNode=null,t.Offline_left1Node=null,t.Offline_left2Node=null,t.Offline_right1Node=null,t.Offline_right2Node=null,t.SetupNode1=null,t.SetupNode2=null,t.SetupNode3=null,t.SetupNode4=null,t.NavigatorIcon=null,t.homeIcon=[],t.outBtn=null,t.blacktBtn=null,t.outPanelNode=null,t.outContentNode=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){},t.prototype.hideDrawer=function(){this.drawerNode.active=!1,this.rightIconNode1.active=!1,this.rightIconNode2.active=!1,this.leftIconNode1.active=!1,this.leftIconNode2.active=!1,this.iconNode.active=!1},t.prototype.showDrawer=function(e){this.drawerNode.active=!0,this.rightIconNode1.active=i.default[c.iconNameMap.right1.arrName]&&i.default[c.iconNameMap.right1.arrName].length>0||!1,this.rightIconNode2.active=i.default[c.iconNameMap.right2.arrName]&&i.default[c.iconNameMap.right2.arrName].length>0||!1,this.leftIconNode1.active=i.default[c.iconNameMap.left1.arrName]&&i.default[c.iconNameMap.left1.arrName].length>0||!1,this.leftIconNode2.active=i.default[c.iconNameMap.left2.arrName]&&i.default[c.iconNameMap.left2.arrName].length>0||!1,"GoHome"==e?this.iconNode.active=!1:"game"==e&&(i.default.config.show_dl?(this.drawerNode.active=!1,this.rightIconNode1.active=!1,this.rightIconNode2.active=!1,this.leftIconNode1.active=!1,this.leftIconNode2.active=!1,this.iconNode.active=!0):this.iconNode.active=!1)},t.prototype.showSpirit=function(){this.spirit_LeftNode.active=i.default[c.iconNameMap.spirit_Left.arrName]&&i.default[c.iconNameMap.spirit_Left.arrName].length>0||!1,this.spirit_rightNode.active=i.default[c.iconNameMap.spirit_right.arrName]&&i.default[c.iconNameMap.spirit_right.arrName].length>0||!1},t.prototype.hideSpirit=function(){this.spirit_LeftNode.active=!1,this.spirit_rightNode.active=!1},t.prototype.showOffline=function(){this.Offline_left1Node.active=i.default[c.iconNameMap.Offline_Left1.arrName]&&i.default[c.iconNameMap.Offline_Left1.arrName].length>0||!1,this.Offline_left2Node.active=i.default[c.iconNameMap.Offline_Left2.arrName]&&i.default[c.iconNameMap.Offline_Left2.arrName].length>0||!1,this.Offline_right1Node.active=i.default[c.iconNameMap.Offline_right1.arrName]&&i.default[c.iconNameMap.Offline_right1.arrName].length>0||!1,this.Offline_right2Node.active=i.default[c.iconNameMap.Offline_right2.arrName]&&i.default[c.iconNameMap.Offline_right2.arrName].length>0||!1},t.prototype.hideOffline=function(){this.Offline_left1Node.active=!1,this.Offline_left2Node.active=!1,this.Offline_right1Node.active=!1,this.Offline_right2Node.active=!1},t.prototype.showFortune=function(){this.fortune_LeftNode.active=i.default[c.iconNameMap.fortune_Left.arrName]&&i.default[c.iconNameMap.fortune_Left.arrName].length>0||!1,this.fortune_rightNode.active=i.default[c.iconNameMap.fortune_right.arrName]&&i.default[c.iconNameMap.fortune_right.arrName].length>0||!1},t.prototype.hideFortune=function(){this.fortune_LeftNode.active=!1,this.fortune_rightNode.active=!1},t.prototype.showSetup=function(){this.SetupNode1.active=i.default[c.iconNameMap.Setup1.arrName]&&i.default[c.iconNameMap.Setup1.arrName].length>0||!1,this.SetupNode2.active=i.default[c.iconNameMap.Setup2.arrName]&&i.default[c.iconNameMap.Setup2.arrName].length>0||!1,this.SetupNode3.active=i.default[c.iconNameMap.Setup3.arrName]&&i.default[c.iconNameMap.Setup3.arrName].length>0||!1,this.SetupNode4.active=i.default[c.iconNameMap.Setup4.arrName]&&i.default[c.iconNameMap.Setup4.arrName].length>0||!1},t.prototype.hideSetup=function(){this.SetupNode1.active=!1,this.SetupNode2.active=!1,this.SetupNode3.active=!1,this.SetupNode4.active=!1},t.prototype.initDrawer=function(e){var t=this,o=i.default.config.games[e];o&&o.length?(this.drawerOpenButtonNode&&(this.drawerOpenButtonNode.active=!0,this.drawerOpenButtonNode.on(cc.Node.EventType.TOUCH_END,function(){t.openDrawer(e)})),this.drawerCloseButtonNode&&(this.drawerCloseButtonNode.active=!1,this.drawerCloseButtonNode.on(cc.Node.EventType.TOUCH_END,function(){t.closeDrawer(e)})),this.drawerBackgroundNode&&(this.drawerBackgroundNode.active=!1),this.drawerNode.active=!0):this.drawerNode.active=!1},t.prototype.initDrawerIcons=function(e){var t=this;this.drawerContentNode.removeAllChildren(),a.default.getGameAd({pos:e,count:i.default.config.games[e].length,success:function(o){var a=o.data,n=0,c=a.length;i.default.config.code&&(c*=2);for(var r=function(o){o==a.length&&(n=0);var c=a[n],r=c.icon;if(o>=a.length){if(!c.image)return"continue";r=c.image}var s=cc.instantiate(t.draweIconPrefab);i.default.config.showLabel&&(s.getChildByName("titleLabel").getComponent(cc.Label).string=c.title),cc.loader.load(r,function(e,t){e||(s.getChildByName("iconImage").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))});var d=s.getChildByName("tips");d.active=!0,d.getChildByName("tipsLabel").getComponent(cc.Label).string=Math.random()>.5?"NEW":"\u70ed\u95e8",s.on(cc.Node.EventType.TOUCH_END,function(){t.onIconClick(e,c)}),t.drawerContentNode.addChild(s),n++},s=0;s<c;s++)r(s)}})},t.prototype.openDrawer=function(e){var t=this;if(n.default.emit("hideCatBtn","home"),n.default.emit("hideIcon"),!this.drawerPanelAction||this.drawerPanelAction.isDone()){this.initDrawerIcons(e),this.drawerBackgroundNode&&(this.drawerBackgroundNode.active=!0);var o=this.drawerOffset||this.drawerPanelNode.width;this.drawerPanelAction=this.drawerPanelNode.runAction(cc.sequence(cc.moveBy(.5,cc.v2(o-81,0)),cc.callFunc(function(){t.drawerOpenButtonNode&&(t.drawerOpenButtonNode.active=!1),t.drawerCloseButtonNode&&(t.drawerCloseButtonNode.active=!0)})))}},t.prototype.closeDrawer=function(e){var t=this;if(!this.drawerPanelAction||this.drawerPanelAction.isDone()){a.default.hideGameAd(e);var o=this.drawerOffset||this.drawerPanelNode.width;this.drawerPanelAction=this.drawerPanelNode.runAction(cc.sequence(cc.moveBy(.5,cc.v2(81-o,0)),cc.callFunc(function(){t.drawerOpenButtonNode&&(t.drawerOpenButtonNode.active=!0),t.drawerCloseButtonNode&&(t.drawerCloseButtonNode.active=!1),t.drawerBackgroundNode&&(t.drawerBackgroundNode.active=!1),i.default.gameData.ship_part_un.ship1[0]&&n.default.emit("showCatbtn","home"),n.default.emit("showIcon")})))}},t.prototype.initMoregame=function(e){var t=this,o=i.default.config.games[e];o&&o.length?(this.moregameOpenButtonNode&&(this.moregameOpenButtonNode.active=!0,this.moregameOpenButtonNode.on(cc.Node.EventType.TOUCH_END,function(){t.openMoregame(e)})),this.moregameCloseButtonNode&&(this.moregameCloseButtonNode.active=!1,this.moregameCloseButtonNode.on(cc.Node.EventType.TOUCH_END,function(){t.closeMoregame(e)})),this.moregameBackgroundNode&&(this.moregameBackgroundNode.active=!1),this.moregameNode.active=!0):this.moregameNode.active=!1},t.prototype.initMoregameIcons=function(e){var t=this;this.moregameContentNode.removeAllChildren(),a.default.getGameAd({pos:e,count:i.default.config.games[e].length,success:function(o){for(var a=o.data,i=function(o){var i=a[o],n=cc.instantiate(t.moregameIconPrefab);n.getChildByName("titleLabel").getComponent(cc.Label).string=i.title,cc.loader.load(i.icon,function(e,t){e||(n.getChildByName("iconImage").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))});var c=n.getChildByName("tips");c.active=!0,c.getChildByName("tipsLabel").getComponent(cc.Label).string=Math.random()>.5?"NEW":"\u70ed\u95e8",n.on(cc.Node.EventType.TOUCH_END,function(){t.onIconClick(e,i)}),t.moregameContentNode.addChild(n)},n=0;n<a.length;n++)i(n)}})},t.prototype.openMoregame=function(e){this.initMoregameIcons(e),this.moregameOpenButtonNode&&(this.moregameOpenButtonNode.active=!1),this.moregameCloseButtonNode&&(this.moregameCloseButtonNode.active=!0),this.moregameBackgroundNode&&(this.moregameBackgroundNode.active=!0),this.moregamePanelNode.active=!0},t.prototype.closeMoregame=function(e){a.default.hideGameAd(e),this.moregameOpenButtonNode&&(this.moregameOpenButtonNode.active=!0),this.moregameCloseButtonNode&&(this.moregameCloseButtonNode.active=!1),this.moregameBackgroundNode&&(this.moregameBackgroundNode.active=!1),this.moregamePanelNode.active=!1},t.prototype.initHomeIcons=function(e){var t=this;if(e&&e.length){for(var o=[],n=0,c=e;n<c.length;n++){var r=c[n],s=i.default.config.games[r],d=s&&s.length?s.length:1;o.push({pos:r,count:d})}a.default.fetchGameAd({data:o,success:function(o){for(var a=o.data,i=[],n=0,c=e;n<c.length;n++){var r=c[n];i.push(a[r])}t.iconInfosList=i,t.currentIconInfoMap={};for(var s=function(o){var a=t.homeIconNodeList[o];if(!a)return"continue";a.active=!0;var i=o;a.on(cc.Node.EventType.TOUCH_END,function(){var a=t.currentIconInfoMap[i];a&&t.onIconClick(e[o],a)})},d=0;d<t.homeIconNodeList.length&&d<t.iconInfosList.length;d++)s(d);t.scheduleRefreshHomeIcons()}})}},t.prototype.scheduleRefreshHomeIcons=function(){var e=this;this.refreshHomeIcons(),this.schedule(function(){e.refreshHomeIcons()},3,cc.macro.REPEAT_FOREVER)},t.prototype.refreshHomeIcons=function(){for(var e=0;e<this.homeIconNodeList.length&&e<this.iconInfosList.length;e++){var t=this.homeIconNodeList[e];if(t){var o=this.iconInfosList[e],a=this.getRandom(o);if(this.currentIconInfoMap[e]=a,a){t.active=!0;var i=t.getChildByName("iconImage").getComponent(cc.Sprite);this.loadSpriteFrame(i,a),t.getChildByName("titleLabel").getComponent(cc.Label).string=a.title||""}else t.active=!1}}},t.prototype.loadSpriteFrame=function(e,t){var o=this;this.iconCache||(this.iconCache={}),this.iconCache[t.icon]?e.spriteFrame=this.iconCache[t.icon]:cc.loader.load(t.icon,function(a,i){if(!a){var n=new cc.SpriteFrame(i);o.iconCache[t.icon]=n,e.spriteFrame=n}})},t.prototype.getRandom=function(e){return e&&e.length?e[this.randomIndex(e)]:null},t.prototype.randomIndex=function(e){var t=[],o=0;if(e&&e.length)for(var a=0;a<e.length;a++){var i=e[a],n=Number(i.weight)||0;t[a]=[o,o+n],o+=n}if(o>0){var c=Math.random()*o;for(a=0;a<t.length;a++){var r=t[a];if(r[0]<=c&&c<r[1])return a}}return 0},t.prototype.onIconClick=function(e,t,o){void 0===o&&(o=!0),a.default.tapGameAd({pos:e,ad:t,redirect:o})},t.prototype.getForIcon=function(e,t){var o=this;i.default[c.iconNameMap[t].arrName]=[],i.default[c.iconNameMap[t].index]=0,this[c.iconNameMap[t].nodeName].on(cc.Node.EventType.TOUCH_START,function(){o.onIconClick(e,i.default[c.iconNameMap[t].arrName][i.default[c.iconNameMap[t].index]])},this),a.default.getGameAd({pos:e,count:30,success:function(e){if(console.log("getGameAd "+t+" success",e),i.default[c.iconNameMap[t].arrName]=e.data||[],e.data&&!(i.default[c.iconNameMap[t].arrName].length<=0))if(o[c.iconNameMap[t].nodeName].active=c.iconNameMap[t].show,1!=i.default[c.iconNameMap[t].arrName].length)o.schedule(function(){i.default[c.iconNameMap[t].index]++,i.default[c.iconNameMap[t].index]>i.default[c.iconNameMap[t].arrName].length-1&&(i.default[c.iconNameMap[t].index]=0);var e=i.default[c.iconNameMap[t].arrName][i.default[c.iconNameMap[t].index]].icon;o.ramdonBottomIcon(e,o[c.iconNameMap[t].nodeName],t)},3);else{var a=i.default[c.iconNameMap[t].arrName][i.default[c.iconNameMap[t].index]].icon;o.ramdonBottomIcon(a,o[c.iconNameMap[t].nodeName],t)}},fail:function(e){console.log("getGameAd"+t+" fail",e)}})},t.prototype.ramdonBottomIcon=function(e,t,o){var a=this;cc.loader.load(e,function(e,n){e?console.log(e):(t.getChildByName("iconImage").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n),i.default.config.showLabel&&(t.getChildByName("titleLabel").getComponent(cc.Label).string=a[o+"_arr"][a["_index_"+o]].title||""))})},t.prototype.getIcon=function(){var e=this;a.default.getGameAd({pos:"default",count:10,success:function(t){if(t.data){e.icon_arr=t.data;for(var o=function(t){var o=e.iconNode.children[t];if(!o)return{value:void 0};var a=e.icon_arr[t].icon;e.loadSpriteFrame1(o.getComponent(cc.Sprite),a),o.active=!0,e.iconJitter(),e.schedule(function(){e.iconJitter()},2.5),o.on(cc.Node.EventType.TOUCH_END,function(){var o=e.icon_arr[t];o&&e.onIconClick("default",o)})},a=0;a<e.icon_arr.length;a++){var i=o(a);if("object"==typeof i)return i.value}}},fail:function(e){console.log("getGameAdleft fail",e)}})},t.prototype.loadSpriteFrame1=function(e,t){cc.loader.load(t,function(t,o){if(!t){var a=new cc.SpriteFrame(o);e.spriteFrame=a}})},t.prototype.iconJitter=function(){for(var e=0;e<this.iconNode.children.length;e++){if(!(t=this.iconNode.children[e]))return;t.stopAllActions(),t.active&&t.runAction(cc.sequence(cc.rotateTo(.1,-10),cc.rotateTo(.2,10),cc.rotateTo(.1,0)))}for(e=0;e<this.NavigatorIcon.children.length;e++){if(!(t=this.NavigatorIcon.children[e]))return;"outPanel"!=t.name&&(t.stopAllActions(),t.active&&t.runAction(cc.sequence(cc.rotateTo(.1,-10),cc.rotateTo(.2,10),cc.rotateTo(.1,0))))}for(e=0;e<this.homeIcon.length;e++){var t;if(!(t=this.homeIcon[e]))return;t.stopAllActions(),t.active&&t.runAction(cc.sequence(cc.rotateTo(.1,-10),cc.rotateTo(.2,10),cc.rotateTo(.1,0)))}},t.prototype.openOut=function(){this.outContentNode.childrenCount<=0||(this.outPanelNode.active=!0)},t.prototype.closeOut=function(){this.outPanelNode.active=!1},t.prototype.initOutIcons=function(e){var t=this;i.default.config.Guidance_button?i.default.config.games[e]&&i.default.config.games[e].length>0&&(this.outContentNode.removeAllChildren(),a.default.getGameAd({pos:e,count:i.default.config.games[e].length,success:function(o){var a=o.data||[];if(!(a.length<=0)){var n=0,c=a.length;i.default.config.code&&(c*=2);for(var r=function(o){o==a.length&&(n=0);var c=a[n],r=c.icon;if(o>=a.length){if(!c.image)return"continue";r=c.image}var s=cc.instantiate(t.draweIconPrefab),d=s.getChildByName("iconImage");d.width=130,d.height=130,i.default.config.showLabel&&(s.getChildByName("titleLabel").getComponent(cc.Label).string=c.title),cc.loader.load(r,function(e,t){e||(s.getChildByName("iconImage").getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))});var l=s.getChildByName("tips");l.active=!0,l.getChildByName("tipsLabel").getComponent(cc.Label).string=Math.random()>.5?"NEW":"\u70ed\u95e8",s.on(cc.Node.EventType.TOUCH_END,function(){t.onIconClick(e,c)}),t.outContentNode.addChild(s),n++},s=0;s<c;s++)r(s)}}})):this.outBtn.active=!1},__decorate([d(cc.Node)],t.prototype,"drawerNode",void 0),__decorate([d(cc.Node)],t.prototype,"drawerPanelNode",void 0),__decorate([d(cc.Node)],t.prototype,"drawerBackgroundNode",void 0),__decorate([d(cc.Node)],t.prototype,"drawerOpenButtonNode",void 0),__decorate([d(cc.Node)],t.prototype,"drawerCloseButtonNode",void 0),__decorate([d(cc.Node)],t.prototype,"drawerContentNode",void 0),__decorate([d(cc.Prefab)],t.prototype,"draweIconPrefab",void 0),__decorate([d(cc.Node)],t.prototype,"moregameNode",void 0),__decorate([d(cc.Node)],t.prototype,"moregamePanelNode",void 0),__decorate([d(cc.Node)],t.prototype,"moregameBackgroundNode",void 0),__decorate([d(cc.Node)],t.prototype,"moregameOpenButtonNode",void 0),__decorate([d(cc.Node)],t.prototype,"moregameCloseButtonNode",void 0),__decorate([d(cc.Node)],t.prototype,"moregameContentNode",void 0),__decorate([d(cc.Prefab)],t.prototype,"moregameIconPrefab",void 0),__decorate([d(cc.Node)],t.prototype,"iconNode",void 0),__decorate([d(cc.Node)],t.prototype,"rightIconNode1",void 0),__decorate([d(cc.Node)],t.prototype,"rightIconNode2",void 0),__decorate([d(cc.Node)],t.prototype,"leftIconNode1",void 0),__decorate([d(cc.Node)],t.prototype,"leftIconNode2",void 0),__decorate([d(cc.Node)],t.prototype,"fortune_LeftNode",void 0),__decorate([d(cc.Node)],t.prototype,"fortune_rightNode",void 0),__decorate([d(cc.Node)],t.prototype,"spirit_LeftNode",void 0),__decorate([d(cc.Node)],t.prototype,"spirit_rightNode",void 0),__decorate([d(cc.Node)],t.prototype,"Offline_left1Node",void 0),__decorate([d(cc.Node)],t.prototype,"Offline_left2Node",void 0),__decorate([d(cc.Node)],t.prototype,"Offline_right1Node",void 0),__decorate([d(cc.Node)],t.prototype,"Offline_right2Node",void 0),__decorate([d(cc.Node)],t.prototype,"SetupNode1",void 0),__decorate([d(cc.Node)],t.prototype,"SetupNode2",void 0),__decorate([d(cc.Node)],t.prototype,"SetupNode3",void 0),__decorate([d(cc.Node)],t.prototype,"SetupNode4",void 0),__decorate([d(cc.Node)],t.prototype,"NavigatorIcon",void 0),__decorate([d(cc.Node)],t.prototype,"homeIcon",void 0),__decorate([d(cc.Node)],t.prototype,"outBtn",void 0),__decorate([d(cc.Node)],t.prototype,"blacktBtn",void 0),__decorate([d(cc.Node)],t.prototype,"outPanelNode",void 0),__decorate([d(cc.Node)],t.prototype,"outContentNode",void 0),t=o=__decorate([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./Const":"Const","./Event_Mgr":"Event_Mgr","./Global":"Global","./Ws":"ws"}],PanelRoulette:[function(e,t,o){"use strict";cc._RF.push(t,"cb30bldDYxEooy3nf8tkdCJ","PanelRoulette");var a=1,i=2,n=3;cc.Class({extends:cc.Component,properties:{table:{default:null,type:cc.Node,displayName:"\u8f6c\u76d8\u76d8\u5b50"},panel:{default:null,type:cc.Node,displayName:"\u9762\u677f"},background:{default:null,type:cc.Node,displayName:"\u80cc\u666f"},freeTurnButtonNode:{default:null,type:cc.Node,displayName:"\u514d\u8d39\u8f6c\u6309\u94ae"},shareTurnButtonNode:{default:null,type:cc.Node,displayName:"\u8f6c\u53d1\u8f6c\u6309\u94ae"},videoTurnButtonNode:{default:null,type:cc.Node,displayName:"\u89c6\u9891\u8f6c\u6309\u94ae"},closeButtonNode:{default:null,type:cc.Node,displayName:"\u5173\u95ed\u6309\u94ae"},pointer:{default:null,type:cc.Node,displayName:"\u6307\u9488"},prizeItemsNode:{default:null,type:cc.Node,displayName:"\u5956\u54c1\u7236\u8282\u70b9"},tipsLab:{default:null,type:cc.Label,displayName:"\u672c\u6b21\u8f6c\u52a8\u9700\u8981\u91d1\u5e01\u6570"},itemLength:{default:10,type:cc.Integer,displayName:"\u5956\u54c1\u6570\u91cf"},defaultAngle:{default:0,type:cc.Integer,displayName:"\u521d\u59cb\u89d2\u5ea6"},speed:{default:50,type:cc.Float,displayName:"\u8f6c\u52a8\u901f\u5ea6"},decTimer:{default:2,type:cc.Float,displayName:"\u51cf\u901f\u8f6c\u52a8\u65f6\u95f4"},duration:{default:1,type:cc.Float,displayName:"\u6700\u5c11\u65cb\u8f6c\u5708\u6570\u5bf9\u5e94\u65f6\u957f"},minRounds:{default:10,type:cc.Float,displayName:"\u6700\u5c11\u65cb\u8f6c\u5708\u6570"},_targetIndex:0},onLoad:function(){this.bindButtons()},enableCollision:function(){cc.director.getCollisionManager().enabled=!0},disableCollision:function(){cc.director.getCollisionManager().enabled=!1},bindButtons:function(){var e=this;this.freeTurnButtonNode.on(cc.Node.EventType.TOUCH_END,function(){e._onFreeCallback?e._onFreeCallback(e.startTurn.bind(e)):e.startTurn()}),this.shareTurnButtonNode.on(cc.Node.EventType.TOUCH_END,function(){e._onShareCallback&&e._onShareCallback(e.startTurn.bind(e))}),this.videoTurnButtonNode.on(cc.Node.EventType.TOUCH_END,function(){e._onVideoCallback&&e._onVideoCallback(e.startTurn.bind(e))}),this.closeButtonNode.on(cc.Node.EventType.TOUCH_END,function(){e._onCloseCallback&&!1===e._onCloseCallback()||e.closePanel()})},setOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.changeButton(e.buttonType),this._prizeList=e.prizeList,this.showPrizeList(this._prizeList),this._onCloseCallback=e.onClose,this._onTurnEndCallback=e.onTurnEnd,this._onFreeCallback=e.onFree,this._onShareCallback=e.onShare,this._onVideoCallback=e.onVideo},showPrizeList:function(){for(var e=0;e<this.prizeItemsNode.childrenCount;e++){var t=this.getPrize(e),o=this.prizeItemsNode.children[e];o.getChildByName("itemImage").getComponent(cc.Sprite).spriteFrame=t.spriteFrame,o.getChildByName("itemLabel").getComponent(cc.Label).string=t.label}},getPrize:function(e){var t=this._prizeList;return t[e%t.length]},openPanel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.tipsLab.string="x"+e.coin,this.setOption(e),this.node.active=!0},closePanel:function(){this.node.active=!1},showFreeButton:function(){this.freeTurnButtonNode.active=!0,this.shareTurnButtonNode.active=!1,this.videoTurnButtonNode.active=!1},showShareButton:function(){this.freeTurnButtonNode.active=!1,this.shareTurnButtonNode.active=!0,this.videoTurnButtonNode.active=!1},showVideoButton:function(){this.freeTurnButtonNode.active=!1,this.shareTurnButtonNode.active=!1,this.videoTurnButtonNode.active=!0},hideAllButtons:function(){this.freeTurnButtonNode.active=!1,this.shareTurnButtonNode.active=!1,this.videoTurnButtonNode.active=!1},changeButton:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(this._buttonType=e,this._buttonType){case a:this.showFreeButton();break;case i:this.showShareButton();break;case n:this.showVideoButton();break;default:this.hideAllButtons()}},onCollisionEnter:function(){var e=this,t=(Date.now()-this.collisionTimestamp)/1e3;this.collisionTimestamp=Date.now(),this.pointer.stopAllActions(),this.pointer.rotation=0,this.pointer.runAction(cc.sequence(cc.rotateBy(t,90*(this.duration-t)),cc.rotateBy(t,90*-(this.duration-t)),cc.rotateBy(.3,10),cc.rotateBy(.3,-10),cc.delayTime(.5),cc.callFunc(function(){e.endTurn()})))},endTurn:function(){if(this.isTurning&&(this.isTurning=!1,this._onTurnEndCallback)){var e=this._onTurnEndCallback(this._targetIndex,this._buttonType);this.changeButton(e.buttonType),this.tipsLab.string="x"+e.coin}},startTurn:function(){this.hideAllButtons(),this.turnTo(this.randomTargetIndex())},turnTo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.isTurning){this.isTurning=!0,this.collisionTimestamp=Date.now(),this.table.rotation=this.defaultAngle;var o=360/this.itemLength;this._targetIndex=t,this.table.rotation%=360,this.table.rotation-=360;var a=this._targetIndex*-o-this.table.rotation;a%360>-90&&(a-=360),a>-90&&(a-=360),a-=o/2-5,this.table.runAction(cc.sequence(cc.rotateBy(this.duration,360*this.minRounds),cc.rotateBy(2,a).easing(cc.easeCubicActionOut()),cc.rotateBy(1,o/2-5+this.defaultAngle),cc.callFunc(function(){e.endTurn()})))}},randomTargetIndex:function(e){var t=e||this._prizeList,o=[],a=0;if(t&&t.length)for(var i=0;i<t.length;i++){var n=t[i].ratio||0;o[i]=[a,a+n],a+=n}if(a>0)for(var c=Math.random()*a,r=0;r<o.length;r++){var s=o[r];if(s[0]<=c&&c<s[1])return r}return 0}}),cc._RF.pop()},{}],Reward:[function(e,t,o){"use strict";cc._RF.push(t,"43407rnnzdK1qE8r9TS1s2E","Reward"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Global"),i=(e("./ws"),e("./Ad")),n=(e("./wx"),e("./utils")),c=cc._decorator,r=c.ccclass,s=(c.property,function(e){function t(){var t=e.call(this)||this;return t.shareTimestampMap={},t.lastShareTimestamp=0,t.lastLoadVideo=0,t.five=!1,t.indexcount=5,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){},t.prototype.start=function(){console.log("Reward onAwake()"),this.indexcount=n.getRandomValues(2,6)||5},t.prototype.reward=function(e){var t=e.pos,o=e.query,a=e.success,i=e.fail,n=e.complete;console.log(7878,this.isShareState(t)),this.isShareState(t)?this.share({pos:t,query:o,success:a,fail:i,complete:n}):this.video({pos:t,success:a,fail:i,complete:n})},t.prototype.share=function(e){e.pos,e.query;var t=e.success,o=(e.fail,e.complete);return console.log("Laya.Browser.onMiniGame = false"),t&&t(),void(o&&o())},t.prototype.video=function(e){e.pos;var t=e.success,o=(e.fail,e.complete);return console.log("Laya.Browser.onMiniGame = false"),t&&t(),void(o&&o())},t.prototype.allowShare=function(e){var t=a.default.config[e+"_allow_share"];return"boolean"==typeof t?t:a.default.config.allow_share},t.prototype.allowVideo=function(e){if(!a.default.config.allow_video)return a.default.config.allow_video;var t=a.default.config[e+"_video"];return console.log("\u89c6\u9891=================",t),"boolean"==typeof t?t:a.default.config.allow_video},t.prototype.isOnline=function(){return a.default.config.online},t.prototype.isShareFirst=function(e){var t=a.default.config[e+"_allow_share_first"];return"boolean"==typeof t?t:a.default.config.share_first},t.prototype.getShareCount=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return(!a.default.gameData.lastShareTimestamp||a.default.gameData.lastShareTimestamp<t)&&(a.default.gameData.shareCount=0),a.default.gameData.shareCount},t.prototype.isOverShare=function(){return a.default.config.share_number&&a.default.config.share_number<=this.getShareCount()},t.prototype.getVideoCount=function(){var e=new Date,t=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();return(!a.default.gameData.lastVideoTimestamp||a.default.gameData.lastVideoTimestamp<t)&&(a.default.gameData.videoCount=0),a.default.gameData.videoCount},t.prototype.isOverVideo=function(){return a.default.config.video_number&&a.default.config.video_number<=this.getVideoCount()},t.prototype.hasVideo=function(){return i.hasVideoAd()},t.prototype.isShareState=function(e){return!(!this.isOnline()||!this.allowShare(e))&&(!this.allowVideo(e)||!this.hasVideo()||(this.isShareFirst(e)&&!this.isOverShare()||this.isOverVideo()))},t.prototype.showText=function(){},t=o=__decorate([r],t)}(cc.Component));o.default=s,cc._RF.pop()},{"./Ad":"Ad","./Global":"Global","./utils":"utils","./ws":"ws","./wx":"wx"}],ScrollViewBetter:[function(e,t,o){"use strict";cc._RF.push(t,"295aehvfpdClobfncd0OzVH","ScrollViewBetter"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemPrefab=null,t.contentNode=null,t.viewNode=null,t.spacing=0,t.firstPadding=0,t.lastPadding=0,t.vertical=!0,t.topToBottom=!0,t.leftToRight=!0,t}return __extends(t,e),t.prototype.createItems=function(e,t,o){var a=this;void 0===o&&(o=0),this.itemHeight=this.itemPrefab.data.height,this.itemWidth=this.itemPrefab.data.width,this.initItemCallback=t,this.itemListSize=e,this.contentNode.removeAllChildren(),this.vertical?(this.contentNode.height=this.firstPadding+this.itemListSize*(this.itemHeight+this.spacing)+this.lastPadding,this.contentNode.width=this.itemListSize*this.itemWidth,this.innerItemCount=Math.floor(this.viewNode.height/(this.itemHeight+this.spacing))+2):(this.contentNode.height=this.itemListSize*this.itemHeight,this.contentNode.width=this.firstPadding+this.itemListSize*(this.itemWidth+this.spacing)+this.lastPadding,this.innerItemCount=Math.floor(this.viewNode.width/(this.itemWidth+this.spacing))+2),this.outerItemCount=2*Math.floor(this.innerItemCount/2),this.totalItemCount=this.innerItemCount+this.outerItemCount,o>=e&&(o=e-1),o<0&&(o=0),this.startItemIndex=o,this.firstItemIndex=o-this.outerItemCount/2,this.vertical?this.topToBottom?this.contentNode.y=this.viewNode.height/2-this.contentNode.height/2+o*(this.itemHeight+this.spacing):this.contentNode.y=-(this.viewNode.height/2-this.contentNode.height/2+o*(this.itemHeight+this.spacing)):this.leftToRight?this.contentNode.x=-(this.viewNode.width/2-this.contentNode.width/2+o*(this.itemWidth+this.spacing)):this.contentNode.x=this.viewNode.width/2-this.contentNode.width/2+o*(this.itemWidth+this.spacing);var i=this.viewNode.convertToWorldSpaceAR(cc.v2(0,0));this.topLimitPosY=i.y+this.totalItemCount*(this.itemHeight+this.spacing)/2,this.bottomLimitPosY=i.y-this.totalItemCount*(this.itemHeight+this.spacing)/2,this.leftLimitPosX=i.x-this.totalItemCount*(this.itemWidth+this.spacing)/2,this.rightLimitPosX=i.x+this.totalItemCount*(this.itemWidth+this.spacing)/2,this.itemNodeList=[];for(var n=this.firstItemIndex;n<this.totalItemCount+this.firstItemIndex;n++){var c=cc.instantiate(this.itemPrefab);c.parent=this.contentNode,this.setItem(c,n),this.itemNodeList.push(c)}this.node.off("scrolling"),this.node.on("scrolling",function(){a.updateItemsPos()})},t.prototype.setItem=function(e,t){this.vertical?this.topToBottom?e.y=this.contentNode.height/2-(this.firstPadding+t*(this.itemHeight+this.spacing)+this.itemHeight/2):e.y=-(this.contentNode.height/2-(this.firstPadding+t*(this.itemHeight+this.spacing)+this.itemHeight/2)):this.leftToRight?e.x=-(this.contentNode.width/2-(this.firstPadding+t*(this.itemWidth+this.spacing)+this.itemWidth/2)):e.x=this.contentNode.width/2-(this.firstPadding+t*(this.itemWidth+this.spacing)+this.itemWidth/2),t<0||t>=this.itemListSize?e.active=!1:(e.active=!0,this.initItemCallback(e,t))},t.prototype.updateItemsContent=function(){var e=this;this.itemNodeList.forEach(function(t,o){t.active&&e.initItemCallback(t,o+e.firstItemIndex)})},t.prototype.updateItemsPos=function(){if(this.itemNodeList&&this.itemNodeList.length){var e=this.itemNodeList[0],t=this.itemNodeList[this.itemNodeList.length-1],o=e.convertToWorldSpaceAR(cc.v2(0,0)),a=t.convertToWorldSpaceAR(cc.v2(0,0)),i=!1,n=!1;if(this.vertical?this.topToBottom?(i=o.y>this.topLimitPosY,n=a.y<this.bottomLimitPosY):(i=o.y<this.bottomLimitPosY,n=a.y>this.topLimitPosY):this.leftToRight?(i=o.x<this.leftLimitPosX,n=a.x>this.rightLimitPosX):(i=o.x>this.rightLimitPosX,n=a.x<this.leftLimitPosX),i){this.setItem(e,this.firstItemIndex+this.totalItemCount),this.firstItemIndex++;var c=this.itemNodeList.shift();this.itemNodeList.push(c)}else if(n){this.setItem(t,this.firstItemIndex-1),this.firstItemIndex--;c=this.itemNodeList.pop();this.itemNodeList.unshift(c)}}},__decorate([n(cc.Prefab)],t.prototype,"itemPrefab",void 0),__decorate([n(cc.Node)],t.prototype,"contentNode",void 0),__decorate([n(cc.Node)],t.prototype,"viewNode",void 0),__decorate([n],t.prototype,"spacing",void 0),__decorate([n],t.prototype,"firstPadding",void 0),__decorate([n],t.prototype,"lastPadding",void 0),__decorate([n],t.prototype,"vertical",void 0),__decorate([n],t.prototype,"topToBottom",void 0),__decorate([n],t.prototype,"leftToRight",void 0),t=__decorate([i],t)}(cc.Component);o.default=c,cc._RF.pop()},{}],StartPageControl:[function(e,t,o){"use strict";cc._RF.push(t,"c625a8gTkVPO7Vo2BlDya+N","StartPageControl"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./common/Global"),i=(e("./common/wx"),e("./common/Ad"),e("./common/Grade")),n=e("./common/utils"),c=e("./different/dif_strength"),r=e("./common/setting"),s=e("./common/Event_Mgr"),d=e("./common/Const"),l=e("./different/unlock"),u=e("./different/dif_game"),h=e("./common/iosAd"),f=cc._decorator,p=f.ccclass,m=f.property,g=function(e){function t(){var t=e.call(this)||this;return t.startBtn=null,t.gameList=null,t.animtionNode=null,t.strengthIconNode=null,t.loadPage=null,t.progressBar=null,t.dif_startBtn=null,t.serviceBtn=null,t.giftBtn=null,t.rankBtn=null,t.vesionLab=null,t.isStartGame=!0,t.initStart=0,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.init=function(){this.vesionLab.string=d.VERSION,this.initStart=0,this.initDifferent()},t.prototype.initDifferent=function(){this.initStart=.3,u.default.instance.initGameData()},t.prototype.onLoad=function(){this.serviceBtn.on(cc.Node.EventType.TOUCH_START,this.service,this),this.rankBtn.on(cc.Node.EventType.TOUCH_START,this.showLab,this),this.giftBtn.on(cc.Node.EventType.TOUCH_START,this.giftBuy,this)},t.prototype.update=function(e){this.progressBar.progress>=this.initStart||(this.progressBar.progress+=e)},t.prototype.PlayGameOnclick=function(e){this.isStartGame&&(this.isStartGame=!1,a.default.gameData.level%a.default.config.unlock_number==0&&(a.default.unlockNext=a.default.gameData.level+1),a.default.gameData.level==a.default.unlockNext?l.default.instance.openUnlock("home"):this.startFunc())},t.prototype.startFunc=function(){var e=this;c.default.instance.consumeStrength(function(){e.strengthAction(e.startBtn,function(){e.isStartGame=!0,e.start_diff(),a.default.gameData.dif_unlockLevel=a.default.gameData.level})},function(){e.isStartGame=!0,e.strengthInsufficient()})},t.prototype.PlayIdiomGameOnclick=function(){var e=this;cc.find("Canvas/GameNode").getChildByName("idiom")?(cc.find("Canvas/GameNode").getChildByName("idiom").active=!0,this.node.active=!1):cc.loader.loadRes("GamePrefab/idiom",function(t,o){var a=cc.instantiate(o);e.gameList.addChild(a),e.node.active=!1})},t.prototype.settingFun=function(){r.default.instance.open()},t.prototype.giftBuy=function(){a.default.config.allow_pay&&s.default.emit("openBuy")},t.prototype.service=function(){},t.prototype.showLab=function(){},t.prototype.initGrade=function(){i.default.instance.initGrade()},t.prototype.addGrade=function(e){void 0===e&&(e="home"),i.default.instance.addGrade(e)},t.prototype.showGrade=function(e){void 0===e&&(e="home"),i.default.instance.showGrade(e)},t.prototype.hideGrade=function(){i.default.instance.hideGrade()},t.prototype.gradeUpBox=function(){return i.default.instance.gradeUpBox.active},t.prototype.start_diff=function(){cc.find("Canvas/panel/strengthUI/strengthBG").active=!1,cc.find("Canvas/panel/GlodUI/glodBG").active=!1,this.hideGrade();var e=cc.find("Canvas/GameNode").getChildByName("different");e?(e.active=!0,this.node.active=!1,e.getChildByName("game").getComponent("dif_game").startGame()):this.initDifferent();h.default.instance.hideBanner(),s.default.emit("hideDrawer"),s.default.emit("hideCatBtn"),s.default.emit("hideIcon")},t.prototype.strengthAction=function(e,t){var o=this,a=n.worldConvertLocalPointAR(this.animtionNode,n.localConvertWorldPointAR(e)),i=192,c=-333;this.animtionNode.active=!0,this.strengthIconNode.setPosition(cc.v2(0,0));var r=[cc.v2((a.x+i)/3+200,(a.y+c)/3+200),cc.v2((a.x+i)/2+100,(a.y+c)/2+100),cc.v2(a.x,a.y)],s=cc.bezierTo(.8,r),d=cc.callFunc(function(){o.animtionNode.active=!1,t&&t()}),l=cc.sequence(s,d);this.strengthIconNode.runAction(l)},t.prototype.strengthInsufficient=function(){c.default.instance.openStrengthDeficiency("zbt_energy")},__decorate([m(cc.Node)],t.prototype,"startBtn",void 0),__decorate([m(cc.Node)],t.prototype,"gameList",void 0),__decorate([m(cc.Node)],t.prototype,"animtionNode",void 0),__decorate([m(cc.Node)],t.prototype,"strengthIconNode",void 0),__decorate([m(cc.Node)],t.prototype,"loadPage",void 0),__decorate([m(cc.ProgressBar)],t.prototype,"progressBar",void 0),__decorate([m(cc.Button)],t.prototype,"dif_startBtn",void 0),__decorate([m(cc.Node)],t.prototype,"serviceBtn",void 0),__decorate([m(cc.Node)],t.prototype,"giftBtn",void 0),__decorate([m(cc.Node)],t.prototype,"rankBtn",void 0),__decorate([m(cc.Label)],t.prototype,"vesionLab",void 0),t=o=__decorate([p],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./common/Ad":"Ad","./common/Const":"Const","./common/Event_Mgr":"Event_Mgr","./common/Global":"Global","./common/Grade":"Grade","./common/iosAd":"iosAd","./common/setting":"setting","./common/utils":"utils","./common/wx":"wx","./different/dif_game":"dif_game","./different/dif_strength":"dif_strength","./different/unlock":"unlock"}],blackWin:[function(e,t,o){"use strict";cc._RF.push(t,"d58a0qeJKFBC6f4yCZWQj5J","blackWin"),Object.defineProperty(o,"__esModule",{value:!0});e("../common/wx");var a=e("./dif_audio"),i=e("../StartPageControl"),n=(e("../common/Ad"),e("../different/dif_game")),c=e("../common/Global"),r=e("../common/Event_Mgr"),s=e("../common/iosAd"),d=cc._decorator,l=d.ccclass,u=(d.property,function(e){function t(){var t=e.call(this)||this;return o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.openSelf=function(){this.node.active=!0,a.default.instance.musicBtn.children[0].active=c.default.gameData.musicEnabled,a.default.instance.soundEffBtn.children[0].active=c.default.gameData.soundEnabled,r.default.emit("showSetup")},t.prototype.continueGameOnclick=function(){this.node.active=!1,n.default.instance.isPlaying=!0,a.default.instance.playBgm(),r.default.emit("hideSetup"),r.default.emit("showGameHammer")},t.prototype.quitGameOnclick=function(){a.default.instance.stopPlayBgm(),cc.find("Canvas/StartPage").active=!0,this.node.active=!1,i.default.instance.showGrade("home"),cc.find("Canvas/panel/strengthUI/strengthBG").active=!0,cc.find("Canvas/panel/GlodUI/glodBG").active=!0,s.default.instance.showBanner(),r.default.emit("hidePassProgress"),r.default.emit("showDrawer","GoHome"),c.default.gameData.ship_part_un.ship1[0]&&r.default.emit("showCatbtn","home"),r.default.emit("hideZhuanBtn"),r.default.emit("showRed"),r.default.emit("hideSetup"),r.default.emit("hideGameHammer"),r.default.emit("showIcon")},t.prototype.idiom_btn=function(){cc.find("Canvas/GameNode").getChildByName("different").active=!1,cc.loader.loadRes("GamePrefab/idiom",function(e,t){var o=cc.instantiate(t);cc.find("Canvas/GameNode").addChild(o)})},t=o=__decorate([l],t)}(cc.Component));o.default=u,cc._RF.pop()},{"../StartPageControl":"StartPageControl","../common/Ad":"Ad","../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/wx":"wx","../different/dif_game":"dif_game","./dif_audio":"dif_audio"}],buyPanel:[function(e,t,o){"use strict";cc._RF.push(t,"9ef06VmJdVJXabanKGJxVhF","buyPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Event_Mgr"),i=e("./utils"),n=e("./ws"),c=e("./wx"),r=e("./Global"),s=e("./Ad"),d=e("./Const"),l=cc._decorator,u=l.ccclass,h=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.buyUi=null,t.closeBtn=null,t.receive=null,t.giftNode=[],t.gfitIcon=[],t.Labs=[],t.resh=!0,t.to_pay=!1,t}return __extends(t,e),t.prototype.onLoad=function(){a.default.on("openBuy",this,this.openBuy),a.default.on("addWelfare",this,this.addWelfare),a.default.on("initLab",this,this.initLab),a.default.on("receiveFun",this,this.receiveFun),this.closeBtn.on(cc.Node.EventType.TOUCH_START,this.colseUi,this),this.resh=!0},t.prototype.start=function(){},t.prototype.initLab=function(){for(var e=r.default.config.charge,t=0;t<this.Labs.length;t++){var o=e[t];if(o)for(var a in o)"energy_10"==a&&(this.Labs[t].string="\u8d2d\u4e70"+(o[a].energy-4)+"\u70b9\u4f53\u529b"),"hint_10"==a&&(this.Labs[t].string="\u8d2d\u4e70"+(o[a].hint-4)+"\u5f20\u63d0\u793a\u5361"),"overtime_10"==a&&(this.Labs[t].string="\u8d2d\u4e70"+(o[a].overtime-4)+"\u5f20\u52a0\u65f6\u5361"),"no_ad"!=a&&"no_ad_large"!=a||(this.Labs[t].string="vip\u4eab\u514d\u5e7f\u544a\uff08banner\u548c\u63d2\u5c4f\uff09\n\u6bcf\u65e5\u9996\u6b21\u767b\u5165\u83b7\u5f97\u4f53\u529b"+o[a].energy+"\u70b9\n\u63d0\u793a\u5361"+o[a].hint+"\u5f20\u52a0\u65f6\u5361"+o[a].overtime+"\u5f20\n\u6301\u7eed30\u5929"),"no_ad_vip1"!=a&&"no_ad_vip2"!=a&&"no_ad_vip3"!=a||(this.Labs[t].string="vip\u4eab\u514d\u5e7f\u544a\uff08banner\u548c\u63d2\u5c4f\uff09\n\u6bcf\u65e5\u9996\u6b21\u767b\u5165\u83b7\u5f97\u4f53\u529b"+o[a].energy+"\u70b9\n\u63d0\u793a\u5361"+o[a].hint+"\u5f20\u52a0\u65f6\u5361"+o[a].overtime+"\u5f20\n\u7ec8\u8eab\u514d\u8d39")}},t.prototype.openBuy=function(){s.hideGameClub(),this.buyUi.active=!0,i.commonAction(this.buyUi.getChildByName("bg"),.3,.1)},t.prototype.colseUi=function(){s.showGameClub(),this.buyUi.active=!1},t.prototype.buyProps=function(e){var t=this,o=(r.default.config.moneyConf||d.moneyConf)[e];console.log("\u8c03\u8d77\u652f\u4ed8==",e,o),c.default.navigateToMiniProgram({appId:"wxd05bdef855ed9bda",path:"pages/index/index",extraData:{to_pay:!0,money:o,key:e},success:function(e){t.to_pay=!0,console.log("\u8c03\u8d77\u652f\u4ed8\u6253\u5f00\u6210\u529f",t.to_pay,o)}})},t.prototype.checkBuyArticle=function(e){var t=e.key,o={};try{for(var i=r.default.config.charge||d.charge,n=0;n<i.length;n++){var c=i[n];for(var s in c){var l=c[s];l.energy&&(o.energy_num=l.energy),l.hint&&(o.hint_num=l.hint),l.overtime&&(o.overtime_num=l.overtime);break}}switch(console.log("\u68c0\u6d4b\u8d2d\u4e70\u7684\u5546\u54c1==",t,o,i),t){case"energy_10":a.default.emit("addStrength",o.energy_num),a.default.emit("updateGame",!0),console.log("\u589e\u52a0\u4f53\u529b\uff1a",o.energy_num,r.default.gameData.dif_strength);break;case"hint_10":r.default.gameData.hint_num+=o.hint_num,a.default.emit("updateGame",!0),console.log("\u589e\u52a0\u63d0\u793a\uff1a",o.hint_num,r.default.gameData.hint_num);break;case"overtime_10":r.default.gameData.overtime_num+=o.overtime_num,a.default.emit("updateGame",!0),console.log("\u589e\u52a0\u5ef6\u65f6\uff1a",o.overtime_num,r.default.gameData.overtime_num);break;case"no_ad":r.default.gameData.no_ad=!0,r.default.gameData.no_ad_day=1,this.addWelfare(o);break;case"no_ad_large":r.default.gameData.no_ad_large=!0,r.default.gameData.no_ad_large_day=1,this.addWelfare(o);break;case"no_ad_vip1":case"no_ad_vip2":case"no_ad_vip3":r.default.gameData.no_ad_vip3=!0,this.addWelfare(o)}this.receiveFun(o)}catch(e){console.log("\u5546\u54c1\u8fd4\u56de\u6570\u636e\u9519\u8bef")}},t.prototype.buyBtn=function(e,t){this.getBuyArticle({key:t,data:'{"energy": 5,"hint":5,"overtime":5}'})},t.prototype.buy=function(e){n.default.requestMPPayment({title:"\u7b49\u5f85\u5ba2\u670d\u53d1\u56de\u7684\u5145\u503c\u94fe\u63a5\u5145\u503c",pos:e,image:"https://ws-oss.lesscool.cn/ws/fb20a8b1d9f5e3c7b8ac2b7706a5ac5f.png"})},t.prototype.reshBuy=function(){this.resh&&(this.resh=!1)},t.prototype.getBuyArticle=function(e){var t=e.key,o={};try{var i=JSON.parse(e.data);switch(i.energy&&(o.energy_num=i.energy),i.hint&&(o.hint_num=i.hint),i.overtime&&(o.overtime_num=i.overtime),console.log("\u68c0\u6d4b\u8d2d\u4e70\u7684\u5546\u54c1==",t,o),t){case"energy_10":a.default.emit("addStrength",i.energy),a.default.emit("updateGame",!0);break;case"hint_10":r.default.gameData.hint_num+=i.hint,a.default.emit("updateGame",!0);break;case"overtime_10":r.default.gameData.overtime_num+=i.overtime,a.default.emit("updateGame",!0);break;case"no_ad":r.default.gameData.no_ad=!0,r.default.gameData.no_ad_day=1,this.addWelfare(o);break;case"no_ad_large":r.default.gameData.no_ad_large=!0,r.default.gameData.no_ad_large_day=1,this.addWelfare(o);break;case"no_ad_vip1":case"no_ad_vip2":case"no_ad_vip3":r.default.gameData.no_ad_vip3=!0,this.addWelfare(o)}this.receiveFun(o)}catch(e){console.log("\u5546\u54c1\u8fd4\u56de\u6570\u636e\u9519\u8bef")}},t.prototype.addWelfare=function(e){r.default.VIP=!0,a.default.emit("addStrength",e.energy_num),r.default.gameData.hint_num+=e.hint_num,r.default.gameData.overtime_num+=e.overtime_num,a.default.emit("updateGame",!0)},t.prototype.receiveFun=function(e){console.log("\u793c\u7269\u6536\u53d6\u6210\u529f",r.default.gameData,r.default.VIP),a.default.emit("ovtimeIcon"),this.receive.active=!0;var t=this.receive.getChildByName("ui");if(e.energy_num&&e.hint_num&&e.overtime_num){var o=this.giftNode[0];o.spriteFrame=this.gfitIcon[0],o.node.children[0].getComponent(cc.Label).string=e.energy_num,o.node.active=!0,t.children[0].active=!0,(c=this.giftNode[1]).spriteFrame=this.gfitIcon[1],c.node.children[0].getComponent(cc.Label).string=e.hint_num,c.node.active=!0,t.children[1].active=!0;var n=this.giftNode[2];n.spriteFrame=this.gfitIcon[2],n.node.children[0].getComponent(cc.Label).string=e.overtime_num,n.node.active=!0,cc.callFunc,t.children[2].active=!0}else{t.children[0].active=!1,t.children[2].active=!1,this.giftNode[0].node.active=!1,this.giftNode[2].node.active=!1;var c=this.giftNode[1];for(var s in e){var d="";"energy_num"==s&&(c.spriteFrame=this.gfitIcon[0],d=e.energy_num),"hint_num"==s&&(c.spriteFrame=this.gfitIcon[1],d=e.hint_num),"overtime_num"==s&&(c.spriteFrame=this.gfitIcon[2],d=e.overtime_num),c.node.children[0].getComponent(cc.Label).string=d}}i.commonAction(t,.3,.1)},t.prototype.closeReceive=function(){this.receive.active=!1},__decorate([h(cc.Node)],t.prototype,"buyUi",void 0),__decorate([h(cc.Node)],t.prototype,"closeBtn",void 0),__decorate([h(cc.Node)],t.prototype,"receive",void 0),__decorate([h(cc.Sprite)],t.prototype,"giftNode",void 0),__decorate([h(cc.SpriteFrame)],t.prototype,"gfitIcon",void 0),__decorate([h(cc.Label)],t.prototype,"Labs",void 0),t=__decorate([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"./Ad":"Ad","./Const":"Const","./Event_Mgr":"Event_Mgr","./Global":"Global","./utils":"utils","./ws":"ws","./wx":"wx"}],cat:[function(e,t,o){"use strict";cc._RF.push(t,"86e34RCLGlPfa6i+0KI4V4C","cat"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=a.property,c=e("../common/utils"),r=e("../common/Event_Mgr"),s=e("../common/Global"),d=e("../common/Const"),l=e("../common/receive"),u=e("./getGift"),h=(e("../common/ws"),e("../common/iosAd")),f=function(e){function t(){var t=e.call(this)||this;return t.catNode=null,t.pro_bg=null,t.pro_tc=null,t.pro_lab=null,t.clickLab=null,t.doublebutton=null,t.particle=null,t.startNode=null,t.startlab=null,t.catBtn=null,t.upLvBtn=null,t.upLvBtnImg=null,t.upLvBtnLab=null,t.pageview=null,t.shipNode=null,t.upgrade_ske=null,t.tips=null,t.catBtntips=null,t.closeBtn=null,t.num=0,t.currPro=0,t.over=!1,t.openboxAnim=null,t.no_unshipNode=null,t.cabinetNode=null,t.cabinetCats=null,t.shipPageView=null,t.rouIcon=[],t.coinNode=null,t.coinUi=null,t._onVideoCallback=null,t.zhuanBtn=null,t.catZhuanBtn=null,t.cabinetBtn=null,t.reds=[],t.buyCatPanel=null,t.buyCatUi=null,t.buyCatTitle=null,t.buyCatBox=null,t.buyCatSucc=null,t.buyCatBtns=null,t.buyCatCoin=null,t.leftArrow=null,t.rightArrow=null,t.shipcabinetPageView=null,t.shipcabinetContent=null,t.openCabinetParts=!1,t.t=0,t.currClickAddPos=null,t.openCabinet=!1,t.repeat=0,t.avg=0,t.isReceive=!1,t.passOpencat=!1,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){r.default.on("openCat",this,this.open),r.default.on("showCatbtn",this,this.showCatBtn),r.default.on("hideCatBtn",this,this.hideCatBtn),r.default.on("showZhuanbtn",this,this.showZhuanbtn),r.default.on("showcatZhuanbtn",this,this.catZhuanbtn),r.default.on("hideZhuanBtn",this,this.hideZhuanBtn),r.default.on("showRed",this,this.showRed),r.default.on("mubanByRate",this,this.mubanByRate),this.catNode.getChildByName("mask").on(cc.Node.EventType.TOUCH_START,this.maskClick,this),this.catBtn.on(cc.Node.EventType.TOUCH_START,this.catClick,this),this.closeBtn.on(cc.Node.EventType.TOUCH_START,this.closeCat,this),this.upLvBtn.on(cc.Node.EventType.TOUCH_START,this.updateLv,this),this.shipPageView.node.on("page-turning",this.pageTurningEvent,this)},t.prototype.pageTurningEvent=function(e){var t=this.shipPageView.getCurrentPageIndex();0==t?(this.cabinetBtn.active=!1,this.leftArrow.active=!1,this.upLvBtn.active=!1,1==s.default.gameData.ship&&(this.upLvBtn.active=s.default.gameData.box_num>0)):(this.leftArrow.active=!0,this.cabinetBtn.active=!0,this.upLvBtn.active=!0),this.closeShipParts(),t>=s.default.gameData.ship?(this.rightArrow.active=!1,this.cabinetBtn.active=!1,this.upLvBtn.active=!1):this.rightArrow.active=!0,this.upbtnAction(),this.checkCatPos(t+1,!0)},t.prototype.start=function(){},t.prototype.open=function(e){var t=this;if(this.pro_bg.scale=1,this.pro_bg.position=cc.v2(0,0),this.doublebutton.active=!1,this.t=e.num,this.startlab.string=e.numstr,s.default.gameData.ship_part_un.ship5[3])r.default.emit("openPass");else{this.catNode.active=!0;var o=this.catNode.getChildByName("ui");o.scale=0,o.runAction(cc.sequence(cc.scaleTo(.3,1.5),cc.scaleTo(.1,1),cc.callFunc(function(){t.init(e.num)})))}},t.prototype.init=function(e){var t=this;this.clickLab.active=!1,this.upLvBtnLab.string="x"+s.default.gameData.box_num,this.scheduleOnce(function(){t.pro_tc.getComponent(cc.Sprite).fillRange=s.default.gameData.catPro,t.pro_lab.string=Math.floor(100*s.default.gameData.catPro)+"%",t.particleMove(e)},.1)},t.prototype.getUnShip=function(){for(var e=s.default.gameData.ship_part_un,t={dlv:1,xlv:"0"},o=1;o<=5;o++){for(var a=e["ship"+o],i=!1,n=0;n<4;n++){var c=a[n];if(1==o&&1==n)break;if(1!=c&&"ok"!=c){t.xlv=n,i=!0;break}}if(i)break;t.dlv++}return t},t.prototype.particleMove=function(e){var t=this,o=1;e>=60?o=3:e>=30&&(o=2);var a=this.getUnShip();this.repeat=4*o;var i=e/100*(s.default.config.count.fullcount-s.default.config.count.zerocount)+s.default.config.count.zerocount,n=d.catConfig[a.dlv][a.xlv].count,c=i/n*.8;this.currPro=s.default.gameData.catPro,s.default.gameData.catRate+=i/n,this.avg=c/this.repeat;var r=1-this.currPro;if(c>r){var l=c-r;this.repeat-=Math.floor(l/this.avg)}for(var u=0;u<this.repeat;u++)this.scheduleOnce(function(){t.createParticle(.6,t.repeat,c,e,t.avg)},.2*u)},t.prototype.createParticle=function(e,t,o,a,i){var n=this,r=cc.instantiate(this.particle);r.parent=this.startNode,r.scale=.8,r.x=Math.random()>.5?r.x+100*Math.random()/2*-1:r.x+100*Math.random()/2;var d=c.localConvertLocalPointAR(this.startNode,this.pro_bg),l=r.position,u=cc.v2(2*(Math.random()-.5)*400,d.y/2),h=cc.instantiate(this.openboxAnim);h.y=80,h.scale=1.1,this.pro_bg.addChild(h),this.jtime(a/t),r.runAction(cc.sequence(cc.spawn(cc.bezierTo(e+.1,[l,u,d]),cc.scaleTo(e+.1,2)),cc.callFunc(function(){n.pro_bg.stopAllActions(),n.pro_bg.runAction(cc.sequence(cc.scaleTo(.1,1.1,.92),cc.scaleTo(.1,1))),h.active=!0,r.destroy(),n.num++,n.num==t&&(s.default.gameData.catPro+=o,s.default.gameData.catTips||(n.tips.active=!0,n.tips.scale=0,n.tips.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.1,1))),s.default.gameData.catTips=!0),n.num=0,n.over=!0,n.clickLab.active=!0,n.doublebutton.active=!0),n.updatePro(i)})))},t.prototype.jtime=function(e){this.t-=e,this.t<=0&&(this.t=0,this.startlab.string="00:00");var t=c.CountdownFun(this.t);this.startlab.string=t.minStr},t.prototype.updatePro=function(e){if(this.pro_tc.getComponent(cc.Sprite).fillRange+=e,this.currPro+=e,this.currPro>=1&&(this.currPro=1,this.pro_tc.getComponent(cc.Sprite).fillRange=1),this.pro_lab.string=Math.floor(100*this.currPro)+"%",s.default.gameData.catPro>=1||s.default.gameData.catRate>=1){s.default.gameData.catPro=.21,s.default.gameData.catRate=0,s.default.gameData.box_num++;var t=this.getUnShip();s.default.gameData.ship_part_un["ship"+t.dlv][t.xlv]="ok",console.log("up_getUnShip \u8fdb\u5ea6\u5df2\u6ee1\u5347\u7ea7",t,s.default.gameData.ship_part_un)}},t.prototype.doublePoint=function(){var e=this;if(this.doublebutton.active=!1,this.clickLab.active=!1,this.over=!1,cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){h.default.instance.showIosVideo(function(){e.receivePoint()},function(){e.clickLab.active=!0,e.over=!0})}else this.receivePoint()},t.prototype.receivePoint=function(){for(var e=this,t=function(t){o.scheduleOnce(function(){e.pro_bg.runAction(cc.sequence(cc.scaleTo(.1,1.1,.92),cc.scaleTo(.1,1),cc.callFunc(function(){t==e.repeat-1&&(s.default.gameData.catPro+=e.avg*e.repeat,s.default.gameData.catRate+=e.avg*e.repeat,e.clickLab.active=!0,e.over=!0),e.updatePro(e.avg)})))},.2*t)},o=this,a=0;a<this.repeat;a++)t(a)},t.prototype.mubanByRate=function(e){void 0===e&&(e=0);var t=this.getUnShip(),o=d.catConfig[t.dlv][t.xlv].count,a=e/o*.8;s.default.gameData.catPro+=a,s.default.gameData.catRate+=e/o,this.updatePro(s.default.gameData.catPro),this.upLvBtnLab.string="x"+s.default.gameData.box_num,this.isReceive&&this.checkShipParts(),this.isReceive=!1},t.prototype.updateLv=function(){var e=this,t=this.shipPageView.getCurrentPageIndex();if(s.default.gameData.box_num<=0||s.default.gameData.box_num<=0&&t+1<s.default.gameData.ship)this.openShipParts();else{if(this.upLvBtn.active=!1,s.default.gameData.part<d.catConfig[s.default.gameData.ship].length-1)s.default.gameData.part+=1;else{s.default.gameData.ship+=1,s.default.gameData.part=0;var o=this.no_unshipNode.getChildByName("ship"+(s.default.gameData.ship+1));o&&(o.removeFromParent(),this.shipPageView.addPage(o),o.active=!0,o.getChildByName("mask").active=!0)}s.default.gameData.ship<=5&&s.default.gameData.part<=3&&(s.default.gameData.ship_part_un["ship"+s.default.gameData.ship][s.default.gameData.part]=!0),this.shipNode.runAction(cc.sequence(cc.callFunc(function(){e.upgrade_ske.active=!0,e.upgrade_ske.getComponent(dragonBones.ArmatureDisplay).playAnimation("upgrade",1)}),cc.delayTime(.8),cc.callFunc(function(){var t=e.shipNode.getChildByName("ship"+s.default.gameData.ship);if(t){t.active=!0,t.getChildByName("mask").active=!1;var o=t.getChildByName("dikuang"),a=o.getChildByName("bg_tc").getComponent(cc.Sprite),i=o.getChildByName("jd_lab").getComponent(cc.Label);if(a.fillRange=(s.default.gameData.part+1)/4,i.string=s.default.gameData.part+1+"/4",e.scheduleOnce(function(){e.shipPageView.scrollToPage(s.default.gameData.ship-1,.5),e.checkShipParts()}),t)t.getChildByName("parts").getComponent(cc.Animation).play();if(t.getChildByName("parts").getChildByName("part"+s.default.gameData.part).active=!0,(4==s.default.gameData.ship||5==s.default.gameData.ship)&&s.default.gameData.part>0&&(t.getChildByName("parts").getChildByName("part0").active=!1),5==s.default.gameData.ship&&3==s.default.gameData.part&&(s.default.gameData.box_num=0),e.upLvBtn.active=!0,e.upbtnAction(),e.upLvBtnLab.string="x"+s.default.gameData.box_num,!s.default.gameData.catBtnTips){e.qipao(),s.default.gameData.catBtnTips=!0,e.closeBtn.active=!0;var n=e.upLvBtn.getChildByName("finger");n.stopAllActions(),n.active=!1}}}))),s.default.gameData.box_num>0&&s.default.gameData.box_num--,console.log("\u5347\u7ea7\u573a\u666f ship:",s.default.gameData.ship,"part:",s.default.gameData.part,"box_num:",s.default.gameData.box_num)}},t.prototype.upbtnAction=function(){this.upLvBtn.stopAllActions(),s.default.gameData.box_num>0&&this.upLvBtn.runAction(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1)).repeatForever())},t.prototype.maskClick=function(){var e=this;if(this.over)if(this.tips.active=!1,this.over=!1,this.clickLab.active=!1,this.num=0,this.currPro>=1){var t=c.localConvertLocalPointAR(this.pro_bg,this.catBtn);this.pro_bg.runAction(cc.sequence(cc.spawn(cc.moveTo(1,t),cc.scaleTo(1,.5)),cc.callFunc(function(){e.AnimCb(),e.pro_tc.getComponent(cc.Sprite).fillRange=0,e.currPro=0,e.pro_lab.string="0%"})))}else this.AnimCb()},t.prototype.AnimCb=function(){r.default.emit("openPass"),this.currPro>=1&&(this.pro_tc.getComponent(cc.Sprite).fillRange=0,this.currPro=0,this.pro_lab.string="0%"),this.catNode.active=!1},t.prototype.showCatBtn=function(e){"home"==e?(this.catBtn.y=-97,this.catBtntips.y=30,this.passOpencat=!1):(this.catBtn.y=-283,this.catBtntips.y=-170,this.passOpencat=!0),0!=s.default.gameData.box_num&&0==this.catBtntips.active&&(this.catBtntips.active=!0,this.catBtntips.scale=0,this.catBtntips.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.1,1)))),this.catBtn.active=!0},t.prototype.hideCatBtn=function(){this.catBtn.active=!1,this.catBtntips.active=!1},t.prototype.showZhuanbtn=function(){this.zhuanBtn.active=!0},t.prototype.catZhuanbtn=function(){this.catZhuanBtn.active=!0},t.prototype.hideZhuanBtn=function(){this.zhuanBtn.active=!1},t.prototype.catClick=function(){var e=this;r.default.emit("hideIcon"),h.default.instance.hideBanner(),s.default.config.show_zhuanpan||(this.catZhuanBtn.active=!1),this.closeBtn.active=!1,this.catBtntips.active=!1,this.pageview.active=!0,this.chackCabinet();for(var t=1;t<=s.default.gameData.ship;t++){var o=this.shipNode.getChildByName("ship"+t);if(!o){var a,i=this.no_unshipNode.getChildByName("ship"+t);if(i)if(i.removeFromParent(),this.shipPageView.addPage(i),(o=this.shipNode.getChildByName("ship"+t)).getChildByName("mask").active=!1,t>=s.default.gameData.ship)(a=this.no_unshipNode.getChildByName("ship"+(t+1)))&&(a.removeFromParent(),this.shipPageView.addPage(a),a.active=!0,a.getChildByName("mask").active=!0)}if(o){o.active=!0;var n=o.getChildByName("parts"),d=o.getChildByName("dikuang"),l=d.getChildByName("bg_tc").getComponent(cc.Sprite),u=d.getChildByName("jd_lab").getComponent(cc.Label),f=null;if(n.getComponent(cc.Animation).play(),1!=t){var p=3;t==s.default.gameData.ship&&(p=s.default.gameData.part),l.fillRange=(p+1)/4,u.string=p+1+"/4";for(var m=0;m<=p;m++)(f=n.getChildByName("part"+m)).active=!0,(4==t||5==t)&&s.default.gameData.part>0?n.getChildByName("part0").active=!1:t>4&&(this.shipNode.getChildByName("ship4").getChildByName("parts").getChildByName("part0").active=!1)}else(f=n.getChildByName("part0")).active=!0,f.getChildByName("cat").opacity=255,l.fillRange=1,u.string="1/1"}}(this.scheduleOnce(function(){e.shipPageView.scrollToPage(s.default.gameData.ship-1,.5)}),1==s.default.gameData.ship)&&((a=this.shipNode.getChildByName("ship1").getChildByName("babble")).stopAllActions(),a.active=!1,this.upLvBtn.getChildByName("babble").active=!1);this.upLvBtnLab.string="x"+s.default.gameData.box_num;var g=function(){if(s.default.gameData.catBtnTips&&(e.closeBtn.active=!0),s.default.gameData.box_num>0&&e.upbtnAction(),1==s.default.gameData.ship&&s.default.gameData.box_num>0&&(e.upLvBtn.active=!0),s.default.gameData.ship_pao||1!=s.default.gameData.ship)e.closeBtn.active=!0;else{s.default.gameData.ship_pao=!0;var t=e.shipNode.getChildByName("ship1").getChildByName("babble");t.getChildByName("lab").getComponent(cc.Label).string=s.default.config.ship1_back,e.upLvBtn.getChildByName("babble").active=!0;var o=e.upLvBtn.getChildByName("finger");o.active=!0,o.runAction(cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.2,1)).repeatForever()),c.commonAction(t,.3,.1,function(){t.active=!1,e.upLvBtn.getChildByName("babble").active=!1},2)}},v=null;1==s.default.gameData.ship&&(v=this.shipNode.getChildByName("ship1").getChildByName("parts").getChildByName("part0").getComponent(cc.Animation)),v?(v.play(),v.once("finished",function(){g()},this)):g(),1!=s.default.gameData.ship||s.default.gameData.has_ship||(s.default.gameData.box_num+=1,s.default.gameData.box_num-=1,s.default.gameData.ship_part_un.ship1[0]=!0,s.default.gameData.ship_part_un.ship2[0]=!0,s.default.gameData.has_ship=!0,this.upLvBtnLab.string="x"+s.default.gameData.box_num),this.upLvBtnLab.string="x"+s.default.gameData.box_num},t.prototype.qipao=function(){var e=this.closeBtn.getChildByName("babble");e.getChildByName("lab").getComponent(cc.Label).string=s.default.config.ship2_back,e.active=!0,e.scale=0,e.runAction(cc.sequence(cc.scaleTo(.3,1.2,1.2),cc.scaleTo(.1,1,1),cc.delayTime(2),cc.callFunc(function(){e.active=!1})))},t.prototype.closeCat=function(){r.default.emit("showIcon",this.passOpencat?"pass":"home"),this.pageview.active=!1;var e=this.closeBtn.getChildByName("babble");e.stopAllActions(),e.active=!1,this.closeCatCabinet(),this.closeShipParts(),h.default.instance.showBanner()},t.prototype.openCatCabinet=function(){var e=this.shipPageView.getCurrentPageIndex();0!=e&&(this.openCabinet||(this.openCabinet=!0,this.cabinetNode.stopAllActions(),this.cabinetNode.runAction(cc.moveTo(.5,0,0)),console.log("\u5f53\u524d\u573a\u666f==",e),this.checkCatPos(e+1)))},t.prototype.closeCatCabinet=function(){this.openCabinet=!1,this.currClickAddPos&&this.currClickAddPos.stopAllActions(),this.currClickAddPos=null,this.cabinetNode.stopAllActions(),this.cabinetNode.runAction(cc.moveTo(.5,0,-964));var e=this.shipPageView.getCurrentPageIndex()+1,t=this.shipNode.getChildByName("ship"+e);if(t&&1!=e){var o=3;e==s.default.gameData.ship&&(o=s.default.gameData.part);for(var a=0;a<=o;a++){var i=t.getChildByName("parts").getChildByName("cat"+a);i&&(i.getChildByName("kuang").active=!1,i.getChildByName("zhuanhuan").active=!1,i.active=!0)}}},t.prototype.chackCat=function(){for(var e=s.default.gameData.cat,t=this.cabinetCats.childrenCount,o=1;o<t;o++)this.cabinetCats.children[o].name,e.indexOf(this.cabinetCats.children[o].name)>=0?(this.cabinetCats.children[o].active=!0,"cat0"==this.cabinetCats.children[o].name&&(this.cabinetCats.children[o].active=!1)):this.cabinetCats.children[o].active=!1},t.prototype.chackCabinet=function(){this.chackCat();var e=s.default.gameData.CatScene;for(var t in e)for(var o in e[t]){if("cat4"!=o)if(e[t][o])this.cabinetCats.getChildByName(e[t][o]).active=!1}},t.prototype.checkCatPos=function(e,t){var o=this.shipNode.getChildByName("ship"+e);if(o&&(o=o.getChildByName("parts"),1!=e)){var a=3;e==s.default.gameData.ship&&(a=s.default.gameData.part);for(var i=s.default.gameData.CatScene["ship"+e],n=0;n<=a;n++){var c=o.getChildByName("cat"+n),r=i["cat"+n];if(i.cat4&&(o.getChildByName("cat4").active=!0,o.getChildByName("part0").children[0].active=!1),(3!=e&&4!=e&&5!=e||!o.getChildByName("part0").active||0!=s.default.gameData.part)&&c){if(r&&(console.log("\u5f53\u524d\u573a\u666f\u4e0a\u732b\u540d\u5b57==",r),!c.getChildByName(r))){var d=this.cabinetCats.getChildByName(r),l=cc.instantiate(d);l.active=!0,c.insertChild(l,0),l.setPosition(10,-85),l.getComponent(cc.Button).interactable=!1}if(t)c.getChildByName("kuang").active=!1,c.getChildByName("zhuanhuan").active=!1;else{var u=c.children[0].name;c.getChildByName("kuang").active=!(u.indexOf("cat")>=0),c.getChildByName("zhuanhuan").active=u.indexOf("cat")>=0}c.active=!0}}}},t.prototype.receiveFreeCat=function(){var e=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){h.default.instance.showIosVideo(function(){e.FreeCatFun()})}else this.FreeCatFun()},t.prototype.FreeCatFun=function(){var e=this.shipPageView.getCurrentPageIndex()+1,t=s.default.gameData.CatScene["ship"+e];t&&(t.cat4="cat");var o=this.shipNode.getChildByName("ship"+e);o&&((o=o.getChildByName("parts")).getChildByName("cat4").active=!0,o.getChildByName("part0").children[0].active=!1,this.buyCat(),this.shuwGetCat(o.getChildByName("cat4")))},t.prototype.buyCat=function(){this.buyCatCoin.children[0].getComponent(cc.Label).string="x"+s.default.config.catgold,this.buyCatNodeShowByHide(!0),this.buyCatPanel.active=!0,this.buyCatSucc.removeAllChildren(),c.commonAction(this.buyCatUi)},t.prototype.buyCatNodeShowByHide=function(e){this.buyCatTitle.active=!e,this.buyCatBox.active=e,this.buyCatCoin.active=e,this.buyCatBtns.children[0].active=e,this.buyCatBtns.children[1].active=!e,this.buyCatBtns.children[2].active=!e},t.prototype.buyCatSuccFun=function(){if(s.default.gameData.glod<s.default.config.catgold)return r.default.emit("openTips","\u91d1\u5e01\u4e0d\u591f\u4e70\u732b\u54e6\uff0c\u5feb\u53bb\u9886\u53d6\u5427"),void u.default.instance.openWin(1);var e=c.goRepetition(s.default.gameData.cat,d.cat);if(e.length<=0)r.default.emit("openTips","\u732b\u5df2\u7ecf\u5168\u90e8\u4e70\u5b8c\u5566\uff0c\u771f\u662f\u592a\u5389\u5bb3\u4e86");else{r.default.emit("addGlod",-s.default.config.catgold);var t=e[c.getIndex(e)];s.default.gameData.cat.push(t);var o=this.cabinetCats.getChildByName(t);this.shuwGetCat(o)}},t.prototype.shuwGetCat=function(e){var t=e;if(t){t.active=!0,this.buyCatNodeShowByHide(!1);var o=cc.instantiate(t);o.off(cc.Node.EventType.TOUCH_START),this.buyCatSucc.addChild(o),o.setPosition(0,0)}},t.prototype.receiveBuyCat=function(){this.buyCatPanel.active=!1},t.prototype.shareyixia=function(){},t.prototype.catOnClick=function(e,t){if(this.currClickAddPos){var o=e.target,a=cc.instantiate(o),i=this.currClickAddPos.parent,n=i.children[0].name;n.indexOf("cat")>=0&&(i.getChildByName(n).destroy(),this.cabinetCats.getChildByName(n).active=!0),i.insertChild(a,0),a.setPosition(10,-85),a.getComponent(cc.Button).interactable=!1,o.active=!1,this.currClickAddPos&&this.currClickAddPos.stopAllActions(),this.currClickAddPos&&(this.currClickAddPos.active=!1),i.getChildByName("zhuanhuan").active=!0;var c=this.shipPageView.getCurrentPageIndex();s.default.gameData.CatScene["ship"+(c+1)][i.name]=t,console.log("\u732b\u6570\u636e===",s.default.gameData.CatScene)}else r.default.emit("openTips","\u8bf7\u5148\u9009\u62e9\u653e\u7f6e\u7684\u4f4d\u7f6e\uff0c\u70b9\u51fb\u767d\u8272\u5708\u5708")},t.prototype.addClick=function(e,t){this.currClickAddPos&&this.currClickAddPos.stopAllActions(),this.currClickAddPos=e.target,this.currClickAddPos.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.2,1)).repeatForever())},t.prototype.replacementClick=function(e,t){this.currClickAddPos&&this.currClickAddPos.stopAllActions(),this.currClickAddPos=e.target,this.currClickAddPos.runAction(cc.sequence(cc.scaleTo(.2,1.1),cc.scaleTo(.2,1)).repeatForever());var o=this.currClickAddPos.parent,a=o.children[0].name;if(a.indexOf("cat")>=0){o.getChildByName(a).destroy(),this.cabinetCats.getChildByName(a).active=!0;var i=this.shipPageView.getCurrentPageIndex();s.default.gameData.CatScene["ship"+(i+1)][o.name]=null}console.log("\u66f4\u6362\u70b9\u51fb\u732b\u6570\u636e===",s.default.gameData.CatScene)},t.prototype.openShipParts=function(){this.openCabinetParts||(this.openCabinetParts=!0,this.checkShipParts())},t.prototype.checkShipParts=function(){var e=this,t=this.shipPageView.getCurrentPageIndex();if(t&&0!=t){var o="different/shipParts/ship_"+(t+1);cc.loader.loadResDir(o,cc.SpriteFrame,function(o,a,i){if(a.length<=0&&i.length<=0)console.log("\u65e0\u8d44\u6e90",i);else{for(var n=e.getUnShip(),c=s.default.gameData.ship_part_un["ship"+(t+1)],r=function(o){var i=e.shipcabinetContent.children[o],r=i.children[1];if(1==c[o])r.getComponent(cc.Sprite).spriteFrame=a.filter(function(e){return e.name=="part"+o})[0],i.children[2].active=!0,i.children[3].active=!1,i.children[4].active=!0,i.children[3].children[4].active=!1;else{r.getComponent(cc.Sprite).spriteFrame=a.filter(function(e){return e.name=="part"+o+"_bg"})[0],i.children[2].active=!1,i.children[3].active=!0,i.children[4].active=!1;var l=d.catConfig[t+1][o].count,u=0,h=0;s.default.gameData.ship<n.dlv?(u=l,h=1,i.children[3].children[4].active=!0):(o==n.xlv&&(u=Math.floor(s.default.gameData.catRate*l),h=s.default.gameData.catRate),o<n.xlv&&(u=l,h=1,i.children[3].children[4].active=!0)),i.children[3].children[1].getComponent(cc.Sprite).fillRange=h,i.children[3].children[2].getComponent(cc.Label).string=u+"/"+l}},l=0;l<e.shipcabinetContent.childrenCount;l++)r(l);e.shipcabinetPageView.getComponent(cc.PageView).scrollToPage(parseInt(n.xlv),0),e.shipcabinetPageView.y<0&&(e.shipcabinetPageView.stopAllActions(),e.shipcabinetPageView.runAction(cc.moveTo(.5,0,0))),e.openCabinetParts=!1}})}},t.prototype.closeShipParts=function(){this.openCabinetParts=!1,this.shipcabinetPageView.runAction(cc.moveTo(.5,0,-817))},t.prototype.receiveMaterial=function(){this.isReceive=!0,u.default.instance.openWin(4)},t.prototype.showRed=function(){s.default.gameData.box_num>0?(this.reds[0].active=!0,this.reds[0].parent.stopAllActions(),this.reds[0].parent.runAction(cc.sequence(cc.scaleTo(1,1.1),cc.scaleTo(1,1)).repeatForever())):this.reds[0].active=!1},t.prototype.videoicon=function(){s.default.config.allow_share?s.default.gameData.videoCount>=s.default.config.video_number&&(s.default.config.allow_video=!1,r.default.emit("showVideoIcon",!1)):r.default.emit("showVideoIcon",!0)},t.prototype.openRoulette=function(e,t){var o=this;"pass"==t&&h.default.instance.hideBanner(),r.default.emit("hideIcon"),r.default.emit("showFortune");var a,i={},n=this.rouletteData();i=n,a=n.prizeList,i.source=t,i.onClose=function(){"pass"==t&&(h.default.instance.showBanner(),r.default.emit("showIcon","pass")),r.default.emit("hideFortune")},i.onTurnEnd=function(e,i){var n=a[e];console.log(a[e],i);var c={};c.sp=[n.spriteFrame],c.lab=[n.label],c.type=n.type,"mm"==n.type&&(c.lab=["\u606d\u559c\u83b7\u5f97\u4e00\u53ea\u732b\u54aa,\u53bb\u573a\u666f\u6253\u5f00\u770b\u770b\u5427"]),c.value=n.value,l.default.instance.openRev(c,1,"cat",function(){s.default.gameData.cat.length==o.cabinetCats.childrenCount&&o.openRoulette(null,t),"mm"==c.type&&o.chackCat()});var r={buttonType:1,coin:s.default.config.glod*s.default.gameData.rota_num*s.default.gameData.rota_coefficient};return s.default.gameData.rota_num>1&&(o.videoicon(),s.default.config.allow_video?r.buttonType=3:r.buttonType=2),r},i.onFree=function(e){s.default.config.glod,s.default.gameData.rota_num,s.default.gameData.rota_coefficient;s.default.gameData.rota_num+=1,e()},i.onVideo=function(e){if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){h.default.instance.showIosVideo(function(){e()})}else e()},i.onShare=function(e){if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){h.default.instance.showIosVideo(function(){e()})}else e()};cc.find("Canvas/panel/roulette").getComponent("PanelRoulette").openPanel(i)},t.prototype.rouletteData=function(){var e={},t=[],o=s.default.config.glod*s.default.gameData.rota_num*s.default.gameData.rota_coefficient;s.default.gameData.rota_num>1?(this.videoicon(),s.default.config.allow_video?e.buttonType=3:e.buttonType=2):e.buttonType=1;for(var a=0;a<10;a++){var i={},n={};a<7?n=c.getRandom(d.ordinary_rate):a>=7&&a<9?n=c.getRandom(d.rare_rate):(n=c.getRandom(d.precious_rate),s.default.gameData.cat.length==this.cabinetCats.childrenCount&&(n={icon:0,lab:"\u732b\u54aa",type:"ti",weight:100,number:5})),i.spriteFrame=this.rouIcon[n.icon],i.label=n.number+"",i.ratio=d.rate[a].ratio,i.value=n.number,i.type=n.type,t.push(i)}return e.coin=o,e.prizeList=t,e},t.prototype.openCoin=function(e,t){this.coinNode.active=!0,this.coinUi.scale=0,this.coinUi.getChildByName("bg").getChildByName("coinLab").getComponent(cc.Label).string=t+"",c.commonAction(this.coinUi,.25,.1),this._onVideoCallback=e},t.prototype.hideCoin=function(){this.coinNode.active=!1,cc.find("Canvas/panel/roulette").getComponent("PanelRoulette").closePanel(),this.closeCat(),h.default.instance.showBanner()},t.prototype.free=function(){var e=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){h.default.instance.showIosVideo(function(){e.coinNode.active=!1,e._onVideoCallback&&e._onVideoCallback()})}else this.coinNode.active=!1,this._onVideoCallback&&this._onVideoCallback()},__decorate([n(cc.Node)],t.prototype,"catNode",void 0),__decorate([n(cc.Node)],t.prototype,"pro_bg",void 0),__decorate([n(cc.Node)],t.prototype,"pro_tc",void 0),__decorate([n(cc.Label)],t.prototype,"pro_lab",void 0),__decorate([n(cc.Node)],t.prototype,"clickLab",void 0),__decorate([n(cc.Node)],t.prototype,"doublebutton",void 0),__decorate([n(cc.Prefab)],t.prototype,"particle",void 0),__decorate([n(cc.Node)],t.prototype,"startNode",void 0),__decorate([n(cc.Label)],t.prototype,"startlab",void 0),__decorate([n(cc.Node)],t.prototype,"catBtn",void 0),__decorate([n(cc.Node)],t.prototype,"upLvBtn",void 0),__decorate([n(cc.Node)],t.prototype,"upLvBtnImg",void 0),__decorate([n(cc.Label)],t.prototype,"upLvBtnLab",void 0),__decorate([n(cc.Node)],t.prototype,"pageview",void 0),__decorate([n(cc.Node)],t.prototype,"shipNode",void 0),__decorate([n(cc.Node)],t.prototype,"upgrade_ske",void 0),__decorate([n(cc.Node)],t.prototype,"tips",void 0),__decorate([n(cc.Node)],t.prototype,"catBtntips",void 0),__decorate([n(cc.Node)],t.prototype,"closeBtn",void 0),__decorate([n(cc.Node)],t.prototype,"openboxAnim",void 0),__decorate([n(cc.Node)],t.prototype,"no_unshipNode",void 0),__decorate([n(cc.Node)],t.prototype,"cabinetNode",void 0),__decorate([n(cc.Node)],t.prototype,"cabinetCats",void 0),__decorate([n(cc.PageView)],t.prototype,"shipPageView",void 0),__decorate([n(cc.SpriteFrame)],t.prototype,"rouIcon",void 0),__decorate([n(cc.Node)],t.prototype,"coinNode",void 0),__decorate([n(cc.Node)],t.prototype,"coinUi",void 0),__decorate([n(cc.Node)],t.prototype,"zhuanBtn",void 0),__decorate([n(cc.Node)],t.prototype,"catZhuanBtn",void 0),__decorate([n(cc.Node)],t.prototype,"cabinetBtn",void 0),__decorate([n(cc.Node)],t.prototype,"reds",void 0),__decorate([n(cc.Node)],t.prototype,"buyCatPanel",void 0),__decorate([n(cc.Node)],t.prototype,"buyCatUi",void 0),__decorate([n(cc.Node)],t.prototype,"buyCatTitle",void 0),__decorate([n(cc.Node)],t.prototype,"buyCatBox",void 0),__decorate([n(cc.Node)],t.prototype,"buyCatSucc",void 0),__decorate([n(cc.Node)],t.prototype,"buyCatBtns",void 0),__decorate([n(cc.Node)],t.prototype,"buyCatCoin",void 0),__decorate([n(cc.Node)],t.prototype,"leftArrow",void 0),__decorate([n(cc.Node)],t.prototype,"rightArrow",void 0),__decorate([n(cc.Node)],t.prototype,"shipcabinetPageView",void 0),__decorate([n(cc.Node)],t.prototype,"shipcabinetContent",void 0),t=o=__decorate([i],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../common/Const":"Const","../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/receive":"receive","../common/utils":"utils","../common/ws":"ws","./getGift":"getGift"}],dif_audio:[function(e,t,o){"use strict";cc._RF.push(t,"e066352jrdA4ajokdIMZ4sE","dif_audio"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=a.property,c=e("../common/Global"),r=(e("../common/wx"),function(e){function t(){var t=e.call(this)||this;return t.bgmAudio=null,t.FindRight0=null,t.FindRight1=null,t.FindRight2=null,t.FindRight3=null,t.FindRight4=null,t.Find_miss1Audio=null,t.win_sound=null,t.Time_alert=null,t.musicBtn=null,t.soundEffBtn=null,t.bgm=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.musicBtn.on(cc.Node.EventType.TOUCH_START,this.music,this),this.soundEffBtn.on(cc.Node.EventType.TOUCH_START,this.soundeff,this)},t.prototype.start=function(){this.loadAudio()},t.prototype.loadAudio=function(){var e=this;cc.loader.load(["audio/Find_miss1.mp3","audio/FindRight0.mp3","audio/FindRight1.mp3","audio/FindRight2.mp3","audio/FindRight3.mp3","audio/FindRight4.mp3","audio/gameplay_2min.mp3","audio/MenuMusic.mp3","audio/Time_alert.mp3","audio/win_sound.mp3"],function(t,o){t?console.log("\u5206\u5305\u97f3\u4e50\u52a0\u8f7d\u9519==",o):(e.Find_miss1Audio=o.getContent("audio/Find_miss1.mp3"),e.FindRight0=o.getContent("audio/FindRight0.mp3"),e.FindRight1=o.getContent("audio/FindRight1.mp3"),e.FindRight2=o.getContent("audio/FindRight2.mp3"),e.FindRight3=o.getContent("audio/FindRight3.mp3"),e.FindRight4=o.getContent("audio/FindRight4.mp3"),e.bgmAudio=o.getContent("audio/MenuMusic.mp3"),e.Time_alert=o.getContent("audio/Time_alert.mp3"),e.win_sound=o.getContent("audio/win_sound.mp3"))})},t.prototype.playClick=function(e){if(c.default.gameData.soundEnabled&&this[e])return cc.audioEngine.play(this[e],!1,1)},t.prototype.playBgm=function(){c.default.gameData.musicEnabled&&this.bgmAudio&&(null==this.bgm?this.bgm=cc.audioEngine.play(this.bgmAudio,!0,.4):cc.audioEngine.resume(this.bgm))},t.prototype.suspendPlayBgm=function(){null!=this.bgm&&cc.audioEngine.pause(this.bgm)},t.prototype.stopPlayBgm=function(){null!=this.bgm&&(cc.audioEngine.stop(this.bgm),this.bgm=null)},t.prototype.offBgm=function(){this.stopPlayBgm(),c.default.gameData.musicEnabled=!1},t.prototype.music=function(){this.musicBtn.children[0].active=!this.musicBtn.children[0].active,c.default.gameData.musicEnabled=this.musicBtn.children[0].active,c.default.gameData.musicEnabled?this.playBgm():this.stopPlayBgm()},t.prototype.soundeff=function(){this.soundEffBtn.children[0].active=!this.soundEffBtn.children[0].active,c.default.gameData.soundEnabled=this.soundEffBtn.children[0].active},__decorate([n({type:cc.AudioClip})],t.prototype,"bgmAudio",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"FindRight0",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"FindRight1",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"FindRight2",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"FindRight3",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"FindRight4",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"Find_miss1Audio",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"win_sound",void 0),__decorate([n({type:cc.AudioClip})],t.prototype,"Time_alert",void 0),__decorate([n(cc.Node)],t.prototype,"musicBtn",void 0),__decorate([n(cc.Node)],t.prototype,"soundEffBtn",void 0),t=o=__decorate([i],t)}(cc.Component));o.default=r,cc._RF.pop()},{"../common/Global":"Global","../common/wx":"wx"}],dif_game:[function(e,t,o){"use strict";cc._RF.push(t,"d5b0ba77M1FN4mhFHSsxGFy","dif_game"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../common/Global"),i=e("./dif_audio"),n=e("./downTime"),c=e("./blackWin"),r=(e("../common/ws"),e("../common/wx"),e("../StartPageControl")),s=e("../common/utils"),d=e("./Lottery"),l=e("../common/Event_Mgr"),u=e("./downTime"),h=e("./passPage"),f=e("../common/iosAd"),p=cc._decorator,m=p.ccclass,g=p.property,v=function(e){function t(){var t=e.call(this)||this;return t.downTimeNode=null,t.leveLab=null,t.upNodde=null,t.bottomNode=null,t.purposesNode=null,t.ShadowPrefab=null,t.tipsbtn=null,t.tipsKa=null,t.videoTipsKa=null,t.gaiTipsKa=null,t.correctIcon=null,t.correctIcon_h=null,t.particle=null,t.errEff=null,t.errTime=null,t.passPageNode=null,t.addTimeBtnVideoIcon=null,t.purposes_index=0,t.spot_arr=[],t.isTipsClick=!0,t.isPlaying=!1,t.imageCount=0,t.preimageCount=0,t.currCount=0,t.preCount=0,t.preLvConf=[],t.currLvConf=[],t.blackbtn=null,t.idiomBtn=null,t.download="https://coolant.oss-cn-shenzhen.aliyuncs.com/different/different2/",t.tutorial=null,t.errCount=0,t.confCount=0,t.v_thishiAnim=null,t.s_thishiAnim=null,t.isOpt=!0,t.wait=0,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.update=function(e){this.isOpt||(this.wait+=e,this.wait>=15&&(this.wait=0,this.v_thishiAnim.play("thishiAnim"),this.s_thishiAnim.play("thishiAnim")))},t.prototype.onLoad=function(){this.imageCount=0,this.preimageCount=0,a.default.levelNum=0},t.prototype.initGameData=function(){this.initGame(),this.videoshow(a.default.config.allow_video),this.regeditEvent(),this.reset()},t.prototype.initGame=function(e){e||(e=a.default.gameData.level,a.default.gameData.level>=2510&&(e=s.getRandomValues(300,2e3))),this.loadLv(e,"currLv")},t.prototype.Preloading=function(){var e=a.default.gameData.level+1;a.default.gameData.level>=2510&&(e=s.getRandomValues(300,2e3)),this.preLvConf=[],this.loadLv(e,"preLv")},t.prototype.start=function(){},t.prototype.startGame=function(){this.reset(),this.isPlaying=!0,n.default.instance.startCountdown(),i.default.instance.bgm||i.default.instance.playBgm(),!a.default.config.show_guide||a.default.config.newplayer_gift&&a.default.isNewUser||1==a.default.gameData.level&&this.showTutorial(),this.isOpt=!1,a.default.config.show_hammer&&a.default.gameData.hammerCount>0&&d.default.instance.showGameHammer()},t.prototype.videoshow=function(e){console.warn("55555555555555555555555",e,a.default.config.allow_video,a.default.config.allow_share),this.tipsbtn.children[0].active=e,this.tipsbtn.children[1].active=!e,this.addTimeBtnVideoIcon.active=e,a.default.config.allow_video&&a.default.config.online&&a.default.config.allow_share&&(this.addTimeBtnVideoIcon.active="boolean"==typeof a.default.config.zbt_overtime_video?a.default.config.zbt_overtime_video:e,this.tipsbtn.children[0].active="boolean"==typeof a.default.config.zbt_prompt_video?a.default.config.zbt_prompt_video:e,this.tipsbtn.children[1].active=!this.tipsbtn.children[0].active)},t.prototype.regeditEvent=function(){(a.default.gameData.level>1||!a.default.config.show_guide)&&this.tipsbtn.on(cc.Node.EventType.TOUCH_START,this.tipsClick,this),this.blackbtn.on(cc.Node.EventType.TOUCH_START,this.black,this),l.default.on("openPass",this,this.passLv)},t.prototype.reset=function(){this.isOpt=!0,this.wait=0,this.leveLab.string="\u5173\u5361\uff1a"+a.default.gameData.level,this.spot_arr=["spot1","spot2","spot3","spot4","spot5"],this.purposes_index=0,this.isTipsClick=!0,this.isPlaying=!1,this.imageCount=0,this.preimageCount=0,1==a.default.gameData.level&&this.hideTutorial();for(var e=0;e<this.upNodde.childrenCount;e++){(t=this.upNodde.children[e]).isClick=null,t.children[0].active=!1}for(e=0;e<this.bottomNode.childrenCount;e++){if((t=this.bottomNode.children[e]).isClick=null,t.children[0].active=!1,t.children[1])t.children[1].destroy()}for(e=0;e<this.purposesNode.childrenCount;e++){var t;(t=this.purposesNode.children[e]).children[0].active=!1,t.children[1].active=!1}this.Show_tipsKa()},t.prototype.Show_tipsKa=function(){this.tipsKa.children[0].getComponent(cc.Label).string="x"+a.default.gameData.hint_num,this.tipsKa.active=a.default.gameData.hint_num>0,this.videoTipsKa.children[0].getComponent(cc.Label).string="x"+a.default.gameData.hint_num,this.videoTipsKa.active=a.default.gameData.hint_num>0,this.gaiTipsKa.active=a.default.gameData.hint_num>0},t.prototype.showTutorial=function(){this.tutorial.active=!0,this.tutorialIdx=0,this.PormetFree();var e=this.tutorial.getChildByName("finger");e.active=!0,e.runAction(cc.sequence(cc.delayTime(.5),cc.scaleTo(.5,1.3),cc.scaleTo(.5,1)).repeatForever()),this.setTutorialText()},t.prototype.hideTutorial=function(){this.tutorialIdx=0;var e=this.tutorial.getChildByName("finger");e.stopAllActions(),this.tutorial.active=!1,e.active=!1},t.prototype.setTutorialFinger=function(e){var t=e.convertToWorldSpaceAR(new cc.Vec2(0,0)),o=this.tutorial.getChildByName("finger");o.setPosition(o.parent.convertToNodeSpaceAR(t)),o.active=!0},t.prototype.setTutorialText=function(){var e=this.tutorial.getChildByName("text");0==this.tutorialIdx?e.getComponent(cc.Label).string="\u8fd9\u662f\u7b2c1\u4e2a\u4e0d\u540c\uff0c\u8bf7\u70b9\u51fb\u624b\u6307\u5f15\u5bfc\u7684\u4f4d\u7f6e":e.getComponent(cc.Label).string="\u5f88\u597d\uff0c\u518d\u627e\u5230"+(5-this.tutorialIdx)+"\u4e2a\u4e0d\u540c\u5c31\u80fd\u8fc7\u5173\u4e86",e.active=!0},t.prototype.loadJson=function(e,t,o,a){var i;void 0===e&&(e="get"),void 0===o&&(o=!0),(i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).onreadystatechange=function(){4==i.readyState&&(200==i.status?(console.log(t," \u52a0\u8f7d\u5b8c\u6210",i.responseText),a(JSON.parse(i.responseText))):(console.log(t," \u52a0\u8f7d\u5931\u8d25",i.responseText),a(null)))},i.open(e,t,o),i.send(),console.log("\u53d1\u8d77\u8bf7\u6c42 ",t)},t.prototype.loadLv=function(e,t){var a=this;"currLv"==t?this.currCount=e:"preLv"==t&&(this.preCount=e);var i=o.instance.download+"levels/lv_"+e;cc.loader.load(i+"/level.json",function(e,o){if(e){if(console.log("\u52a0\u8f7d\u914d\u5173\u5361\u7f6e\u51fa\u9519",e),a.confCount++>5)return;"currLv"==t?(a.currLvConf=[],a.initGame()):a.Preloading()}else{a.confCount=0;var n=o.skins.slots;console.log("\u5173\u5361\u914d\u7f6e\uff1a==",o.skins.slots);for(var c=0;c<n.length;c++){var r="",s=n[c].name;r="layer"==s?i+"/images/"+n[c].name+".jpg":i+"/images/"+n[c].name+".png",a.assembleConfigDate(r,s,n[c],t)}}})},t.prototype.assembleConfigDate=function(e,t,o,a){var i=this,n={};cc.loader.load(e,function(c,s){if(c){if(console.log("\u52a0\u8f7d\u56fe\u7247\u51fa\u9519",c),i.errCount++>=5)return;i.assembleConfigDate(e,t,o,a)}else{r.default.instance.initStart+=.1,i.errCount=0;var d=new cc.SpriteFrame(s);n.width=o.width,n.height=o.height,n.x=o.x,n.y=o.y,n.name=t,n.SpriteFrame=d,"currLv"==a?(i.currLvConf.push(n),i.imageCount++):"preLv"==a&&(i.preLvConf.push(n),i.preimageCount++),"currLv"==a?(console.log("\u52a0\u8f7d\u8ba1\u6570\uff1a",i.imageCount,"\u7ec4\u88c5\u597d\u7684\u914d\u7f6e\uff1a",i.currLvConf),i.imageCount>=6&&(i.currloadCallback(),i.imageCount=0)):"preLv"==a&&(console.log("\u9884\u52a0\u8f7d\u8ba1\u6570\uff1a",i.preimageCount,"\u9884\u52a0\u8f7d\u7684\u914d\u7f6e\uff1a",i.preLvConf),i.preimageCount>=6&&(i.preloadCallback(),i.preimageCount=0))}})},t.prototype.currloadCallback=function(){this.Preloading(),this.renderGamePage(),r.default.instance.initStart=1,cc.find("Canvas/loadPage").active=!1,a.default.isNewUser&&(r.default.instance.start_diff(),a.default.config.newplayer_gift&&cc.find("Canvas/panel/giftPanel").getComponent("giftPanel").open({source:"new",pos:"getGift"}))},t.prototype.preloadCallback=function(){console.log("\u9884\u52a0\u8f7d\u5b8c\u6210")},t.prototype.renderGamePage=function(){var e=0;try{if(this.currLvConf.length<=0)return void console.log("\u5f53\u524d\u914d\u7f6e\u4e3a\u7a7a");d.default.instance.reset();for(var t=0;t<this.currLvConf.length;t++){var o=this.currLvConf[t];if("layer"==o.name)this.upNodde.getComponent(cc.Sprite).spriteFrame=null!=o.SpriteFrame?o.SpriteFrame:null,this.bottomNode.getComponent(cc.Sprite).spriteFrame=null!=o.SpriteFrame?o.SpriteFrame:null;else{var a=this.upNodde.children[e],i=this.bottomNode.children[e];i.getComponent(cc.Sprite).spriteFrame=null!=o.SpriteFrame?o.SpriteFrame:null,a.width=i.width=o.width,a.height=i.height=o.height,a.x=i.x=o.x,a.y=i.y=o.y,a.on(cc.Node.EventType.TOUCH_START,this.spotClick,this),this.upNodde.on(cc.Node.EventType.TOUCH_START,this.bgClick,this),i.on(cc.Node.EventType.TOUCH_START,this.spotClick,this),this.bottomNode.on(cc.Node.EventType.TOUCH_START,this.bgClick,this),e++,d.default.instance.randomHammer(i.name,e)}}}catch(e){console.log("\u6e32\u67d3\u9519\u8bef",e,"\u5f53\u524d\u914d\u7f6e\uff1a",this.currLvConf);var n=[];for(t=0;t<this.currLvConf.length;t++){var c={};c.name=this.currLvConf[t].name||"\u6ca1\u6709",c.index=t,n.push(c)}}},t.prototype.spotClick=function(e){var t=this;if(this.wait=0,this.isPlaying){var o=e.target||e;if(!o.isClick){if(a.default.config.show_guide&&1==a.default.gameData.level)this.tutorialIdx++,this.tutorial.getChildByName("finger").active=!1,this.tutorialIdx<5?(this.setTutorialText(),this.tutorialIdx<2?this.schedule(function(){t.PormetFree()},.8,0):this.tipsbtn.on(cc.Node.EventType.TOUCH_START,this.tipsClick,this)):this.hideTutorial();a.default.config.show_hammer&&d.default.instance.showGameHammer(o),this.isTipsClick=!0,i.default.instance.playClick("FindRight"+this.purposes_index),o.children[0].active=!0;var n=this.bottomNode.getChildByName(o.name).children[0];n.active=!0,this.bottomNode.getChildByName(o.name).isClick=!0;var c=this.upNodde.getChildByName(o.name).children[0];c.active=!0,this.upNodde.getChildByName(o.name).isClick=!0;var r=cc.sequence(cc.scaleTo(.2,1.5),cc.scaleTo(.3,.9),cc.scaleTo(.1,1));n.runAction(r.clone()),c.runAction(r.clone()),this.particleMove(o),this.spot_arr.splice(this.spot_arr.indexOf(o.name),1),this.v_thishiAnim.stop("thishiAnim"),this.s_thishiAnim.stop("thishiAnim"),this.s_thishiAnim.setCurrentTime(0,"thishiAnim"),this.v_thishiAnim.setCurrentTime(0,"thishiAnim")}}},t.prototype.bgClick=function(e){this.wait=0;var t,o=e.getLocation(),c=(t="upNodde"==e.target.name?this.upNodde:this.bottomNode).convertToNodeSpaceAR(o);t=this.bottomNode;for(var r=0;r<5;r++)if(this.distance_(c,t.children[r].position)<a.default.config.radius){var d=t.children[r];return console.log("cccccc",d.name),void this.spotClick(d)}i.default.instance.playClick("Find_miss1Audio");var l=cc.instantiate(this.errEff);l.setParent(t),l.position=c,this.scheduleOnce(function(){l.destroy()},.35);var u=cc.instantiate(this.errTime);u.setPosition(c.x,c.y+140),u.parent=t,u.scale=0;var h=s.localConvertLocalPointAR(t,this.downTimeNode),f=cc.sequence(cc.scaleTo(.1,3),cc.delayTime(.2),cc.moveTo(.5,h),cc.callFunc(function(){u.destroy(),n.default.instance.minus20(20)}));u.runAction(f),this.v_thishiAnim.stop("thishiAnim"),this.s_thishiAnim.stop("thishiAnim"),this.s_thishiAnim.setCurrentTime(0,"thishiAnim"),this.v_thishiAnim.setCurrentTime(0,"thishiAnim")},t.prototype.tipsClick=function(){var e=this;if(this.wait=0,cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&a.default.gameData.hint_num<=0){i.default.instance.suspendPlayBgm(),this.isPlaying=!1;f.default.instance.showIosVideo(function(){i.default.instance.playBgm(),e.PormetFree(),e.isTipsClick=!0,e.isPlaying=!0},function(){i.default.instance.playBgm(),e.isTipsClick=!0,e.isPlaying=!0})}else{if(!this.isTipsClick)return;a.default.gameData.hint_num--,a.default.gameData.hint_num<=0&&(a.default.gameData.hint_num=0),this.Show_tipsKa(),this.PormetFree()}},t.prototype.PormetFree=function(){if(this.isTipsClick){this.isTipsClick=!1;var e=Math.floor(Math.random()*this.spot_arr.length),t=this.spot_arr[e];if(t){var o=cc.instantiate(this.ShadowPrefab);this.bottomNode.getChildByName(t).addChild(o),o.on(cc.Node.EventType.TOUCH_START,this.shadowClick,this),a.default.config.show_guide&&1==a.default.gameData.level&&this.tutorialIdx<2&&this.setTutorialFinger(o.parent)}}},t.prototype.shadowClick=function(e){var t=e.target;this.spotClick(t.parent),t.destroy()},t.prototype.particleMove=function(e){var t=this,o=cc.instantiate(this.particle);o.parent=e;var a=this.purposesNode.children[this.purposes_index].children[0],i=s.worldConvertLocalPointAR(e,s.localConvertWorldPointAR(a));if(4==this.purposes_index){var n=new cc.Vec2(o.x+800,o.y+800),c=new cc.Vec2(o.x-800,o.y+400),r=new cc.Vec2(o.x+300,o.y+200),d=new cc.Vec2((i.x+r.x)/2+1e3,(i.y+r.y)/4);o.runAction(cc.sequence(cc.bezierTo(.45,[n,c,r]),cc.bezierTo(.5,[r,d,i]),cc.callFunc(function(){o.destroy(),a.active=!0,t.purposes_index>=5&&(t.purposes_index=0,t.isPlaying=!1,l.default.emit("openCat",{num:u.default.instance.recoveryInterval,numstr:u.default.instance.Timelabel.string}),t.isOpt=!0)})));for(var h=function(e){f.scheduleOnce(function(){var o=t.bottomNode.children[e].children[0];t.upNodde.children[e].children[0].runAction(cc.sequence(cc.scaleTo(.25,1.5),cc.delayTime(.2),cc.scaleTo(.25,1))),o.runAction(cc.sequence(cc.scaleTo(.25,1.5),cc.callFunc(function(){o.getComponent(cc.Sprite).spriteFrame=t.correctIcon_h}),cc.delayTime(.15),cc.scaleTo(.25,1),cc.callFunc(function(){o.getComponent(cc.Sprite).spriteFrame=t.correctIcon})))},e/5)},f=this,p=0;p<5;p++)h(p)}else o.runAction(cc.sequence(cc.moveTo(.6,i),cc.callFunc(function(){o.destroy(),a.active=!0,t.purposes_index>=5&&(t.purposes_index=0,t.isPlaying=!1,l.default.emit("openCat",{num:u.default.instance.recoveryInterval,numstr:u.default.instance.Timelabel.string}),t.isOpt=!0)})));this.purposes_index++,this.purposes_index<5||(this.upNodde.off(cc.Node.EventType.TOUCH_START),this.bottomNode.off(cc.Node.EventType.TOUCH_START),this.isPlaying=!1,this.isTipsClick=!1)},t.prototype.passLv=function(){for(var e=this,t=function(t){o.scheduleOnce(function(){e.purposesNode.children[t].children[1].active=!0},t/10)},o=this,i=0;i<this.purposesNode.childrenCount;i++)t(i);1==a.default.gameData.level&&this.hideTutorial(),a.default.gameData.level+=1,l.default.emit("updateGame",!1),a.default.gameData.level%5==0&&l.default.emit("updateGame",!0),a.default.honorNum+=1,this.currLvConf=[],a.default.gameData.level==this.preCount?(this.currLvConf=[].concat(this.preLvConf),this.Preloading(),console.log("\u5173\u5361\u5b8c\u6210\u4f7f\u7528\u9884\u52a0\u8f7d\u8d44\u6e90")):(a.default.isNewUser=!1,this.initGame(),console.log("\u5173\u5361\u5b8c\u6210\u9884\u52a0\u8f7d\u8d44\u6e90\u5931\u8d25\uff0c\u91cd\u65b0\u52a0\u8f7d")),h.default.instance.openPass()},t.prototype.distance_=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},t.prototype.black=function(){l.default.emit("hideGameHammer"),i.default.instance.stopPlayBgm(),this.isPlaying=!1,c.default.instance.openSelf()},__decorate([g(cc.Node)],t.prototype,"downTimeNode",void 0),__decorate([g(cc.Label)],t.prototype,"leveLab",void 0),__decorate([g(cc.Node)],t.prototype,"upNodde",void 0),__decorate([g(cc.Node)],t.prototype,"bottomNode",void 0),__decorate([g(cc.Node)],t.prototype,"purposesNode",void 0),__decorate([g(cc.Prefab)],t.prototype,"ShadowPrefab",void 0),__decorate([g(cc.Node)],t.prototype,"tipsbtn",void 0),__decorate([g(cc.Node)],t.prototype,"tipsKa",void 0),__decorate([g(cc.Node)],t.prototype,"videoTipsKa",void 0),__decorate([g(cc.Node)],t.prototype,"gaiTipsKa",void 0),__decorate([g(cc.SpriteFrame)],t.prototype,"correctIcon",void 0),__decorate([g(cc.SpriteFrame)],t.prototype,"correctIcon_h",void 0),__decorate([g(cc.Prefab)],t.prototype,"particle",void 0),__decorate([g(cc.Prefab)],t.prototype,"errEff",void 0),__decorate([g(cc.Prefab)],t.prototype,"errTime",void 0),__decorate([g(cc.Node)],t.prototype,"passPageNode",void 0),__decorate([g(cc.Node)],t.prototype,"addTimeBtnVideoIcon",void 0),__decorate([g(cc.Node)],t.prototype,"blackbtn",void 0),__decorate([g(cc.Node)],t.prototype,"idiomBtn",void 0),__decorate([g(cc.Node)],t.prototype,"tutorial",void 0),__decorate([g(cc.Animation)],t.prototype,"v_thishiAnim",void 0),__decorate([g(cc.Animation)],t.prototype,"s_thishiAnim",void 0),t=o=__decorate([m],t)}(cc.Component);o.default=v,cc._RF.pop()},{"../StartPageControl":"StartPageControl","../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/utils":"utils","../common/ws":"ws","../common/wx":"wx","./Lottery":"Lottery","./blackWin":"blackWin","./dif_audio":"dif_audio","./downTime":"downTime","./passPage":"passPage"}],dif_strength:[function(e,t,o){"use strict";cc._RF.push(t,"5c769x7jDlHdrK96EfN31We","dif_strength"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=a.property,c=e("../common/utils"),r=e("../common/Global"),s=e("../common/Event_Mgr"),d=e("./dif_game"),l=e("../common/iosAd"),u=function(e){function t(){var t=e.call(this)||this;return t.homeNumLabel=null,t.homeTimeLabel=null,t.strengthDeficiency=null,t.strengthDeficiency_=null,t.gainPower=null,t.gainPower_=null,t.buyBtn=null,t.addBtn=null,t.videoIcon1=null,t.videoIcon2=null,t.hammerDoubleIcon=null,t.hammerVideoIcon=null,t.offlinevideoIcon=null,t.unlockVideIcon=null,t.rouletteVideIcon=null,t.rouletteDoubVideIcon=null,t.ranVideIcon=null,t.pointVideIcon=null,t.receiveCatIcon=[],t.getStrengthIcon1=null,t.getStrengthIcon2=null,t.titleIcon=null,t.desc=null,t.game_name="dif_strength",t.lastTime="dif_lastTime",t.getStrength=0,t.source="",t.pos="zbt_energy",o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.openStrength(),this.videoshow(r.default.config.allow_video),s.default.on("openGainPower",this,this.openGainPower),s.default.on("addStrength",this,this.addStrengthNum),s.default.on("showVideoIcon",this,this.videoshow)},t.prototype.start=function(){},t.prototype.openStrength=function(e){this.node.active=!0,this.init(),this.getStrengthState()},t.prototype.videoshow=function(e){if(console.log("\u4f53\u529b\u89c6\u9891\u56fe\u6807==========",e,r.default.config.allow_video),this.videoIcon1.active=e,this.videoIcon2.active=e,this.hammerVideoIcon.active=e,this.hammerDoubleIcon.active=e,this.offlinevideoIcon.active=e,this.unlockVideIcon.active=e,this.rouletteVideIcon.active=e,this.rouletteDoubVideIcon.active=e,this.ranVideIcon.active=e,this.pointVideIcon.active=e,this.receiveCatIcon.filter(function(t){return t.active=e}),r.default.config.allow_video&&r.default.config.online&&r.default.config.allow_share){var t="boolean"==typeof r.default.config.zbt_energy_video?r.default.config.zbt_energy_video:e;this.videoIcon1.active=t,this.videoIcon2.active=t,this.offlinevideoIcon.active="boolean"==typeof r.default.config.offlinechest_video?r.default.config.offlinechest_video:e,this.hammerVideoIcon.active="boolean"==typeof r.default.config.addhammer_video?r.default.config.addhammer_video:e,this.hammerDoubleIcon.active="boolean"==typeof r.default.config.chestdouble_video?r.default.config.chestdouble_video:e,this.unlockVideIcon.active="boolean"==typeof r.default.config.unlock_video?r.default.config.unlock_video:e,this.ranVideIcon.active="boolean"==typeof r.default.config.getmaterial_video?r.default.config.getmaterial_video:e,this.pointVideIcon.active="boolean"==typeof r.default.config.wood_double_video?r.default.config.wood_double_video:e;var o="boolean"==typeof r.default.config.freecat_video?r.default.config.freecat_video:e;this.receiveCatIcon.filter(function(e){return e.active=o})}var a=cc.find("Canvas/GameNode").getChildByName("different");a&&a.getChildByName("game").getComponent("dif_game").videoshow(e)},t.prototype.init=function(){this.maxStrengthNum=r.default.config.first_energy,this.recoveryInterval=r.default.config.energy_time,this.strengthNum=0,this.strengthNotFullTime=0,this.timer=0,this.strengthNum=r.default.gameData[this.game_name],this.strengthNotFullTime=r.default.gameData[this.lastTime]<=0?Date.now():r.default.gameData[this.lastTime],this.finsh()},t.prototype.updateStrength=function(e){this.homeNumLabel.string=e.strengthNum+"/"+r.default.config.first_energy,this.homeTimeLabel.string=e.nextState,this.strengthNum>=this.maxStrengthNum?this.desc.string=e.nextState:this.desc.string="\u8fd8\u9700\u8981"+e.nextState+"\u5206\u949f\u6062\u590d\u4e00\u70b9\u4f53\u529b"},t.prototype.finsh=function(){console.log("Strength \u52a0\u8f7d\u7ed3\u675f")},t.prototype.offLineRecoveryStrength=function(){this.strengthNotFullTime=r.default.gameData[this.lastTime]||0;for(var e=(new Date).getTime()-this.strengthNotFullTime;e-this.recoveryInterval>=0;)if(this.strengthNotFullTime+=this.recoveryInterval,this.strengthNum++,this.strengthNum>=this.maxStrengthNum){this.strengthNotFullTime=0;break}this.saveLocal()},t.prototype.getStrengthState=function(){if(this.strengthNum>=this.maxStrengthNum){var e={strengthNum:this.strengthNum,nextState:"\u5df2\u6ee1"};this.updateStrength(e)}else this.onLineRecoveryStrength()},t.prototype.onLineRecoveryStrength=function(){var e=this,t=function(){var t=(new Date).getTime();if(t-e.strengthNotFullTime>=e.recoveryInterval&&(e.strengthNotFullTime+=e.recoveryInterval,e.strengthNum++,e.saveLocal()),e.strengthNum>=e.maxStrengthNum){e.strengthNum=e.maxStrengthNum,e.strengthNotFullTime=0,clearInterval(e.timer),e.timer=0;var o={strengthNum:e.strengthNum,nextState:"\u5df2\u6ee1"};e.updateStrength(o)}else{var a={strengthNum:e.strengthNum,nextState:c.conversionTime(e.recoveryInterval-(t-e.strengthNotFullTime)),ratio:(t-e.strengthNotFullTime)/e.recoveryInterval,totalState:c.conversionTime2((e.maxStrengthNum-e.strengthNum-1)*e.recoveryInterval+(e.recoveryInterval-(t-e.strengthNotFullTime)))};e.updateStrength(a)}};t(),clearInterval(this.timer),this.timer=0,this.timer=setInterval(t,1e3)},t.prototype.consumeStrength=function(e,t){if(this.strengthNum>0){if(this.strengthNum--,this.strengthNum<this.maxStrengthNum)this.timer||(this.strengthNotFullTime=(new Date).getTime(),this.onLineRecoveryStrength());else{clearInterval(this.timer),this.timer=0;var o={strengthNum:this.strengthNum,nextState:"\u5df2\u6ee1"};this.updateStrength(o)}e&&e(),this.saveLocal()}else t&&t()},t.prototype.saveLocal=function(){r.default.gameData[this.game_name]=this.strengthNum,r.default.gameData[this.lastTime]=this.strengthNotFullTime},t.prototype.addStrengthNum=function(e){if(this.strengthNum+=e,this.saveLocal(),this.strengthNum>=this.maxStrengthNum){clearInterval(this.timer),this.timer=0;var t={strengthNum:this.strengthNum,nextState:"\u5df2\u6ee1"};this.updateStrength(t)}},t.prototype.openStrengthDeficiency=function(e){this.pos=e,r.default.gameData.dif_strength>0?this.titleIcon.getComponent(cc.Sprite).spriteFrame=this.getStrengthIcon1:this.titleIcon.getComponent(cc.Sprite).spriteFrame=this.getStrengthIcon2;(new Date).getTime();this.buyBtn.active=!1,this.strengthDeficiency.active=!0,this.strengthDeficiency_.scale=0,this.strengthDeficiency_.runAction(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1),cc.callFunc(function(){s.default.emit("showSpirit")})))},t.prototype.closeStrengthDeficiency=function(){s.default.emit("hideSpirit"),this.strengthDeficiency.active=!1},t.prototype.goGet=function(){var e=this;if(r.default.gameData.dif_strength>=20)s.default.emit("openTips","\u4f53\u529b\u5df2\u8fbe\u4e0a\u9650");else if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){l.default.instance.showIosVideo(function(){e.openGainPower()})}else this.openGainPower()},t.prototype.openGainPower=function(e){this.gainPower.active=!0,this.gainPower_.scale=0;var t=e&&null!=e.num?e.num:r.default.config.share_energy;this.getStrength=e&&null!=e.num?e.num:0,this.source=e&&null!=e.source?e.source:"",this.pos=e&&null!=e.pos?e.pos:"zbt_energy",this.gainPower_.children[1].children[0].getComponent(cc.Label).string="x"+t,this.gainPower_.runAction(cc.sequence(cc.scaleTo(.3,1.1),cc.scaleTo(.3,1),cc.callFunc(function(){})))},t.prototype.get=function(){var e=0==this.getStrength?r.default.config.share_energy:this.getStrength;"new"==this.source&&(d.default.instance.isPlaying=!0,r.default.config.show_guide&&1==r.default.gameData.level&&d.default.instance.showTutorial()),this.addStrengthNum(e),this.getStrength=0,this.closeStren()},t.prototype.doubleGet=function(){var e=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){l.default.instance.showIosVideo(function(){var t=0==e.getStrength?r.default.config.share_energy:e.getStrength;"new"==e.source?(d.default.instance.isPlaying=!0,t*=2,r.default.config.show_guide&&1==r.default.gameData.level&&d.default.instance.showTutorial()):t*=2,e.addStrengthNum(t),e.getStrength=0,e.closeStren()})}else{var t=0==this.getStrength?r.default.config.share_energy:this.getStrength;"new"==this.source&&(d.default.instance.isPlaying=!0),this.addStrengthNum(2*t),this.getStrength=0,this.closeStren()}},t.prototype.closeGainPower=function(){this.gainPower.active=!1},t.prototype.closeStren=function(){this.closeStrengthDeficiency(),this.closeGainPower()},__decorate([n(cc.Label)],t.prototype,"homeNumLabel",void 0),__decorate([n(cc.Label)],t.prototype,"homeTimeLabel",void 0),__decorate([n(cc.Node)],t.prototype,"strengthDeficiency",void 0),__decorate([n(cc.Node)],t.prototype,"strengthDeficiency_",void 0),__decorate([n(cc.Node)],t.prototype,"gainPower",void 0),__decorate([n(cc.Node)],t.prototype,"gainPower_",void 0),__decorate([n(cc.Node)],t.prototype,"buyBtn",void 0),__decorate([n(cc.Node)],t.prototype,"addBtn",void 0),__decorate([n(cc.Node)],t.prototype,"videoIcon1",void 0),__decorate([n(cc.Node)],t.prototype,"videoIcon2",void 0),__decorate([n(cc.Node)],t.prototype,"hammerDoubleIcon",void 0),__decorate([n(cc.Node)],t.prototype,"hammerVideoIcon",void 0),__decorate([n(cc.Node)],t.prototype,"offlinevideoIcon",void 0),__decorate([n(cc.Node)],t.prototype,"unlockVideIcon",void 0),__decorate([n(cc.Node)],t.prototype,"rouletteVideIcon",void 0),__decorate([n(cc.Node)],t.prototype,"rouletteDoubVideIcon",void 0),__decorate([n(cc.Node)],t.prototype,"ranVideIcon",void 0),__decorate([n(cc.Node)],t.prototype,"pointVideIcon",void 0),__decorate([n(cc.Node)],t.prototype,"receiveCatIcon",void 0),__decorate([n(cc.SpriteFrame)],t.prototype,"getStrengthIcon1",void 0),__decorate([n(cc.SpriteFrame)],t.prototype,"getStrengthIcon2",void 0),__decorate([n(cc.Node)],t.prototype,"titleIcon",void 0),__decorate([n(cc.Label)],t.prototype,"desc",void 0),t=o=__decorate([i],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/utils":"utils","./dif_game":"dif_game"}],downTime:[function(e,t,o){"use strict";cc._RF.push(t,"fe749oYWe1OFJLIVYrfzIXj","downTime"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../common/utils"),i=e("./dif_audio"),n=e("../different/dif_game"),c=e("../common/Event_Mgr"),r=e("../common/Global"),s=e("../common/iosAd"),d=cc._decorator,l=d.ccclass,u=d.property,h=function(e){function t(){var t=e.call(this)||this;return t.Timelabel=null,t.timerOutNode=null,t.startTime=100,t.recoveryInterval=100,t.timer=0,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){r.default.config.mission_time&&(this.startTime=r.default.config.mission_time)},t.prototype.start=function(){},t.prototype.open=function(){this.timerOutNode.active=!0,cc.find("Canvas/panel/strengthUI/strengthBG").active=!0,cc.find("Canvas/panel/GlodUI/glodBG").active=!1,c.default.emit("hideGameHammer"),c.default.emit("hidePassProgress"),c.default.emit("showDrawer","game"),s.default.instance.showBanner(),n.default.instance.isPlaying=!1,i.default.instance.suspendPlayBgm(),this.updatimeLab("00:00")},t.prototype.startCountdown=function(){console.log("\u540e\u53f0\u914d\u7f6e\u6e38\u620f\u65f6\u95f4\uff1a",r.default.config.mission_time),r.default.config.mission_time&&(this.startTime=r.default.config.mission_time),this.recoveryInterval=this.startTime},t.prototype.updatimeLab=function(e){this.Timelabel.string=e},t.prototype.minus20=function(e){if(n.default.instance.isPlaying){if(this.recoveryInterval-=e,this.recoveryInterval<=0)return this.recoveryInterval=0,void(n.default.instance.spot_arr.length>0&&this.open());var t=a.CountdownFun(this.recoveryInterval);this.updatimeLab(t.minStr)}},t.prototype.add60=function(e){n.default.instance.isPlaying=!0,this.recoveryInterval+=e,s.default.instance.hideBanner(),c.default.emit("hideDrawer"),cc.find("Canvas/panel/strengthUI/strengthBG").active=!1,cc.find("Canvas/panel/GlodUI/glodBG").active=!1},t.prototype.update=function(e){if(this.timer+=e,n.default.instance.isPlaying&&this.timer>=1){if(this.timer=0,this.recoveryInterval--,this.recoveryInterval<=0)return this.recoveryInterval=0,void this.open();[40,20,10].indexOf(this.recoveryInterval)>=0&&i.default.instance.playClick("Time_alert");var t=a.CountdownFun(this.recoveryInterval);this.updatimeLab(t.minStr)}},__decorate([u(cc.Label)],t.prototype,"Timelabel",void 0),__decorate([u(cc.Node)],t.prototype,"timerOutNode",void 0),t=o=__decorate([l],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/utils":"utils","../different/dif_game":"dif_game","./dif_audio":"dif_audio"}],getGift:[function(e,t,o){"use strict";cc._RF.push(t,"d1ef41X+itBHbP5N+9QmvrH","getGift"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=a.property,c=e("../common/utils"),r=e("../common/Event_Mgr"),s=e("../common/Global"),d=e("../common/Const"),l=e("../common/receive"),u=e("./cat"),h=e("../common/iosAd"),f=function(e){function t(){var t=e.call(this)||this;return t.iconNode=null,t.panelNode=null,t.uiNode=null,t.iconSp=null,t.title=null,t.lab=null,t.uselab=null,t.icons=[],t.gifticons=[],t.icon_index=0,t.isTouch=!1,t.data={},o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){r.default.on("showIcon",this,this.showIcon),r.default.on("hideIcon",this,this.hideIcon),r.default.on("addTsk",this,this.addTsk),r.default.on("addJsk",this,this.addJsk),this.iconNode.on(cc.Node.EventType.TOUCH_START,this.icon_click,this),this.initData()},t.prototype.start=function(){},t.prototype.initData=function(){this.data={0:{type:"addStrength",icon:this.gifticons[0],lab:"\u4f53\u529b",number:2},1:{type:"addGlodAcion",icon:this.gifticons[1],lab:"\u91d1\u5e01",number:100},2:{type:"addTsk",icon:this.gifticons[2],lab:"\u63d0\u793a\u5361",number:1},3:{type:"addJsk",icon:this.gifticons[3],lab:"\u52a0\u65f6\u5361",number:1},4:{type:"mubanByRate",icon:this.gifticons[4],lab:"\u6728\u677f",number:20}},this.forIcon()},t.prototype.icon_click=function(){this.isTouch||(console.log("\u5f53\u524d\u7d22\u5f15===",this.icon_index),this.isTouch=!0,this.openWin(this.icon_index),this.icon_index++,this.icon_index==this.icons.length&&(this.icon_index=0),this.forIcon())},t.prototype.forIcon=function(){this.iconNode.getComponent(cc.Sprite).spriteFrame=this.icons[this.icon_index]},t.prototype.openWin=function(e){this.panelNode.active=!0;var t=this.data[e];if(this.curr_data=t,this.title.string="\u83b7\u5f97"+t.lab,this.uselab.string="","mubanByRate"==t.type){var o=u.default.instance.getUnShip();console.log("\u9886\u6728\u677fgetUnShip",o);var a=d.catConfig[o.dlv][o.xlv].count;t.number=a*s.default.config.receive_wood,this.uselab.string="\u6728\u677f\u53ef\u7528\u4e8e\u5347\u7ea7\u732b\u54aa\u573a\u666f\u54e6"}this.lab.string="\u83b7\u5f97"+t.number+"\u4e2a"+t.lab,this.iconSp.spriteFrame=t.icon,c.commonAction(this.uiNode)},t.prototype.closeWin=function(){this.isTouch=!1,this.panelNode.active=!1},t.prototype.showIcon=function(e){void 0===e&&(e="home"),"pass"==e?(this.iconNode.y=-150,this.iconNode.x=278):(this.iconNode.y=59,this.iconNode.x=-278),this.iconNode.active=!0},t.prototype.hideIcon=function(){this.iconNode.active=!1},t.prototype.getGiftFun=function(){var e=this;if("addTsk"==this.curr_data.type&&s.default.gameData.hint_click_num>=5)r.default.emit("openTips","\u63d0\u793a\u5361\u4eca\u5929\u9886\u53d6\u5df2\u8fbe\u4e0a\u9650");else if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){h.default.instance.showIosVideo(function(){e.GiftFun()})}else this.GiftFun()},t.prototype.GiftFun=function(){if("addStrength"==this.curr_data.type&&s.default.gameData.dif_strength>=20)r.default.emit("openTips","\u4f53\u529b\u5df2\u8fbe\u4e0a\u9650");else{"addTsk"==this.curr_data.type&&(s.default.gameData.hint_click_num+=1);var e=this.curr_data.number;"addGlodAcion"==this.curr_data.type?e={node:this.node,number:this.curr_data.number}:l.default.instance.openRev({sp:[this.curr_data.icon],lab:[this.curr_data.number],title:"\u606d\u559c\u83b7\u5f97",type:this.curr_data.type},1,"box"),r.default.emit(this.curr_data.type,e),this.closeWin(),this.curr_data=null}},t.prototype.addTsk=function(e){s.default.gameData.hint_num+=e},t.prototype.addJsk=function(e){s.default.gameData.overtime_num+=e},__decorate([n(cc.Node)],t.prototype,"iconNode",void 0),__decorate([n(cc.Node)],t.prototype,"panelNode",void 0),__decorate([n(cc.Node)],t.prototype,"uiNode",void 0),__decorate([n(cc.Sprite)],t.prototype,"iconSp",void 0),__decorate([n(cc.Label)],t.prototype,"title",void 0),__decorate([n(cc.Label)],t.prototype,"lab",void 0),__decorate([n(cc.Label)],t.prototype,"uselab",void 0),__decorate([n(cc.SpriteFrame)],t.prototype,"icons",void 0),__decorate([n(cc.SpriteFrame)],t.prototype,"gifticons",void 0),t=o=__decorate([i],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../common/Const":"Const","../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/receive":"receive","../common/utils":"utils","./cat":"cat"}],giftPanel:[function(e,t,o){"use strict";cc._RF.push(t,"524cdtTgDxMF6St29CEMrmc","giftPanel"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../common/Global"),i=e("./dif_game"),n=e("../common/Event_Mgr"),c=e("../common/iosAd"),r=cc._decorator,s=r.ccclass,d=r.property,l=function(e){function t(){var t=e.call(this)||this;return t.getgiftBtn=null,t.giveUpBtn=null,t.titleNode=null,t.boxIconNode=null,t.titleIcons=[],t.boxIcons=[],t.videoIcon=null,t.source="",o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.getgiftBtn.on(cc.Node.EventType.TOUCH_START,this.getFun,this),this.giveUpBtn.on(cc.Node.EventType.TOUCH_START,this.giveUp,this)},t.prototype.start=function(){},t.prototype.open=function(e){var t=this;this.node.active=!0;var o=this.node.children[1];o.scale=0,o.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.1,1))),i.default.instance.isPlaying=!1,this.source=e&&e.source,this.pos=e&&e.pos;var c=function(e){a.default.config.allow_video&&a.default.config.online&&a.default.config.allow_share?t.videoIcon.active=e:t.videoIcon.active=a.default.config.allow_video};e&&"new"==e.source?(this.titleNode.spriteFrame=this.titleIcons[0],this.boxIconNode.spriteFrame=this.boxIcons[0],this.boxIconNode.node.children[0].active=!0,this.videoIcon.active=!1):e&&"offline"==e.source?(this.titleNode.spriteFrame=this.titleIcons[1],this.boxIconNode.spriteFrame=this.boxIcons[0],this.boxIconNode.node.children[0].active=!0,c(a.default.config.offlinechest_video)):e&&"honor"==e.source&&(n.default.emit("showOffline"),this.titleNode.spriteFrame=this.titleIcons[2],this.boxIconNode.spriteFrame=this.boxIcons[1],this.boxIconNode.node.children[0].active=!1,c(a.default.config.honorchest_video))},t.prototype.hide=function(){this.node.active=!1,n.default.emit("hideOffline")},t.prototype.getFun=function(){var e={};"new"!=this.source?("offline"==this.source?e={source:"offline",num:a.default.config.offlinec_energy,pos:this.pos}:"honor"==this.source&&(e={source:"honor",num:a.default.config.honorc_energy,pos:this.pos}),this.getOfflineGift(e)):this.getNewGift()},t.prototype.getNewGift=function(){var e=this,t={source:"new",num:a.default.config.newgift_energy,pos:this.pos};if(i.default.instance.isPlaying=!1,cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){c.default.instance.showIosVideo(function(){n.default.emit("openGainPower",t),e.hide()})}else n.default.emit("openGainPower",t),a.default.config.show_guide&&1==a.default.gameData.level&&i.default.instance.showTutorial(),this.hide()},t.prototype.getOfflineGift=function(e){var t=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){c.default.instance.showIosVideo(function(){n.default.emit("openGainPower",e),t.hide()})}else n.default.emit("openGainPower",e),this.hide()},t.prototype.giveUp=function(){"new"==this.source&&(i.default.instance.isPlaying=!0,a.default.config.show_guide&&1==a.default.gameData.level&&i.default.instance.showTutorial()),this.hide()},__decorate([d(cc.Node)],t.prototype,"getgiftBtn",void 0),__decorate([d(cc.Node)],t.prototype,"giveUpBtn",void 0),__decorate([d(cc.Sprite)],t.prototype,"titleNode",void 0),__decorate([d(cc.Sprite)],t.prototype,"boxIconNode",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"titleIcons",void 0),__decorate([d(cc.SpriteFrame)],t.prototype,"boxIcons",void 0),__decorate([d(cc.Node)],t.prototype,"videoIcon",void 0),t=o=__decorate([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","./dif_game":"dif_game"}],glod:[function(e,t,o){"use strict";cc._RF.push(t,"dcf9bt2QudPBKqOz3ID1AJ/","glod"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("../common/Global"),i=e("../common/Event_Mgr"),n=e("../common/utils"),c=cc._decorator,r=c.ccclass,s=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.globLab=null,t.icon=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.updateGlod(),i.default.on("addGlod",this,this.updateGlod),i.default.on("addGlodAcion",this,this.glodAcion)},t.prototype.start=function(){},t.prototype.updateGlod=function(e){void 0===e&&(e=0),a.default.gameData.glod+=e,a.default.gameData.glod<=0&&(a.default.gameData.glod=0),this.globLab.string=""+a.default.gameData.glod,i.default.emit("showRed")},t.prototype.glodAcion=function(e){var t=this;if(e&&e.number&&e.node){var o=1,a=e.number;e.number>30&&(a=30);for(var i=function(i){var r=cc.instantiate(c.icon);o=-o,r.parent=e.node.parent;var s=n.localConvertLocalPointAR(e.node.parent,c.globLab.node.parent);r.x=320*Math.random()*o,r.runAction(cc.sequence(cc.moveTo(.05*i,s),cc.callFunc(function(){r.destroy(),i==a-1&&t.updateGlod(e.number)})))},c=this,r=0;r<a;r++)i(r)}},__decorate([s(cc.Label)],t.prototype,"globLab",void 0),__decorate([s(cc.Node)],t.prototype,"icon",void 0),t=__decorate([r],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/utils":"utils"}],iosAd:[function(e,t,o){"use strict";cc._RF.push(t,"c9bb2wUDKtCXYTjCEisOFsY","iosAd"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=(a.property,function(e){function t(){var t=e.call(this)||this;return t.ios_video_succ_cb=null,t.ios_video_fail_cb=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.showIosVideo=function(e,t){cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&(console.log("callStaticMethod ios, show video"),this.ios_video_succ_cb=e,this.ios_video_fail_cb=t,jsb.reflection.callStaticMethod("AppController","showRewardVideoAd:",""))},t.prototype.iosShowVideoCallBack=function(e){console.log("show video callback,",e),"success"===e?(this.ios_video_succ_cb&&this.ios_video_succ_cb(),this.ios_video_succ_cb=null):(this.ios_video_fail_cb&&this.ios_video_fail_cb(),this.ios_video_fail_cb=null)},t.prototype.showBanner=function(){cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&(console.log("callStaticMethod ios, show banner"),jsb.reflection.callStaticMethod("AppController","showBannerAd:",""))},t.prototype.hideBanner=function(){cc.sys.isNative&&cc.sys.os==cc.sys.OS_IOS&&(console.log("callStaticMethod ios, hide banner"),jsb.reflection.callStaticMethod("AppController","hideBannerAd:",""))},t=o=__decorate([i],t)}(cc.Component));o.default=n,cc._RF.pop()},{}],passPage:[function(e,t,o){"use strict";cc._RF.push(t,"818ec6rSARC2o/htRthFU2m","passPage"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./dif_game"),i=e("../common/Global"),n=e("./dif_audio"),c=e("./downTime"),r=(e("../common/ws"),e("../common/Ad")),s=e("../StartPageControl"),d=e("./dif_strength"),l=e("./blackWin"),u=e("../common/Event_Mgr"),h=e("./Lottery"),f=e("../different/unlock"),p=e("../common/iosAd"),m=cc._decorator,g=m.ccclass,v=m.property,_=function(e){function t(){var t=e.call(this)||this;return t.passPre=null,t.blackBtn=null,t.nextBtn=null,t.isStartGame=!0,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.node.children[0].addChild(cc.instantiate(this.passPre)),this.blackBtn.on(cc.Node.EventType.TOUCH_START,this.blackHome,this),u.default.on("hideNextBtn",this,this.hideBtn),u.default.on("showNextBtn",this,this.showBtn)},t.prototype.start=function(){},t.prototype.openPass=function(){var e=this;this.node.active=!0,n.default.instance.suspendPlayBgm(),i.default.config.show_hammer?(u.default.emit("hideGameHammer"),u.default.emit("updatePassProgress",i.default.gameData.hammerCount),u.default.emit("showPassProgress")):p.default.instance.showBanner(),cc.find("Canvas/panel/strengthUI/strengthBG").active=!0,cc.find("Canvas/panel/GlodUI/glodBG").active=!0,n.default.instance.playClick("win_sound"),u.default.emit("hideCatBtn"),this.scheduleOnce(function(){s.default.instance.addGrade("pass"),u.default.emit("showDrawer","game"),i.default.config.show_zhuanpan&&u.default.emit("showZhuanbtn"),u.default.emit("showRed"),u.default.emit("showIcon","pass")},0),this.scheduleOnce(function(){e.nextBtn.active=!0,e.blackBtn.active=!0,console.log("4\u79d2\u4e86")},5)},t.prototype.hideBtn=function(){this.nextBtn.stopAllActions(),this.nextBtn.active=!1,this.blackBtn.active=!1},t.prototype.showBtn=function(){this.nextBtn.stopAllActions(),this.nextBtn.active=!0,this.nextBtn.scale=.6,this.nextBtn.runAction(cc.sequence(cc.scaleTo(.3,1),cc.scaleTo(.1,.8))),this.blackBtn.active=!0},t.prototype.next=function(e){h.default.instance.kk||s.default.instance.gradeUpBox()||this.isStartGame&&(this.isStartGame=!1,i.default.gameData.level%i.default.config.unlock_number==0&&(i.default.unlockNext=i.default.gameData.level+1),console.log(i.default.gameData.level,i.default.unlockNext),i.default.gameData.level==i.default.unlockNext?f.default.instance.openUnlock("pass"):this.startFunc())},t.prototype.startFunc=function(){var e=this;d.default.instance.consumeStrength(function(){s.default.instance.strengthAction(e.nextBtn,function(){e.isStartGame=!0,e.nextFun(),i.default.gameData.dif_unlockLevel=i.default.gameData.level})},function(){e.isStartGame=!0,s.default.instance.strengthInsufficient()}),p.default.instance.hideBanner()},t.prototype.nextFun=function(){this.unscheduleAllCallbacks(),this.hideBtn(),this.initNext(),a.default.instance.isPlaying=!0,cc.find("Canvas/panel/strengthUI/strengthBG").active=!1,cc.find("Canvas/panel/GlodUI/glodBG").active=!1,u.default.emit("hidePassProgress"),u.default.emit("hideCatBtn"),u.default.emit("hideIcon"),u.default.emit("hideZhuanBtn"),c.default.instance.startCountdown(),n.default.instance.playBgm(),!i.default.VIP&&i.default.config.show_screenad&&this.insertAd(),i.default.config.show_hammer&&i.default.gameData.hammerCount>0&&h.default.instance.showGameHammer()},t.prototype.blackHome=function(){this.initNext(),this.node.active=!1,l.default.instance.quitGameOnclick()},t.prototype.initNext=function(){6==a.default.instance.currLvConf.length?(a.default.instance.reset(),a.default.instance.renderGamePage()):(a.default.instance.currLvConf=[],a.default.instance.reset(),a.default.instance.initGame()),this.node.children[0].addChild(cc.instantiate(this.passPre)),this.node.active=!1,s.default.instance.hideGrade()},t.prototype.insertAd=function(){console.log("\u6b21\u6570",i.default.levelNum)},t.prototype.showInsretAd=function(){i.default.levelNum=0,r.posShowInterAd("passPage"),i.default.gameData.insertAdCount+=1},__decorate([v(cc.Prefab)],t.prototype,"passPre",void 0),__decorate([v(cc.Node)],t.prototype,"blackBtn",void 0),__decorate([v(cc.Node)],t.prototype,"nextBtn",void 0),t=o=__decorate([g],t)}(cc.Component);o.default=_,cc._RF.pop()},{"../StartPageControl":"StartPageControl","../common/Ad":"Ad","../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","../common/ws":"ws","../different/unlock":"unlock","./Lottery":"Lottery","./blackWin":"blackWin","./dif_audio":"dif_audio","./dif_game":"dif_game","./dif_strength":"dif_strength","./downTime":"downTime"}],receive:[function(e,t,o){"use strict";cc._RF.push(t,"bc064vEzR1GaJnbF0X3NSB1","receive"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=a.property,c=e("../common/utils"),r=e("./Global"),s=e("./Event_Mgr"),d=e("./Const"),l=e("./iosAd"),u=function(e){function t(){var t=e.call(this)||this;return t.guang0=null,t.guang1=null,t.guang2=null,t.ui=null,t.doubleBtn=null,t.oneBtn=null,t.confirmBtn=null,t.title=null,t.giftNodes=[],t.currgfitObj={},t.cb=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.doubleBtn.on(cc.Node.EventType.TOUCH_START,this.doubleReceive,this),this.oneBtn.on(cc.Node.EventType.TOUCH_START,this.oneReceive,this),this.confirmBtn.on(cc.Node.EventType.TOUCH_START,this.boxClose,this)},t.prototype.start=function(){},t.prototype.openRev=function(e,t,o,a){void 0===t&&(t=0),"cat"==o?(this.doubleBtn.active=!0,this.oneBtn.active=!0,this.confirmBtn.active=!1,this.title.active=!1,"mm"==e.type&&(this.doubleBtn.active=!1)):"box"==o&&(this.doubleBtn.active=!1,this.oneBtn.active=!1,this.confirmBtn.active=!0,this.title.getComponent(cc.Label).string=e.title,this.title.active=!0),this.currgfitObj=e,this.node.active=!0,this.ui.scale=0;for(var i=0;i<t;i++)this["guang"+i].active=!0,this.giftNodes[i].spriteFrame=e.sp[i],this.giftNodes[i].node.children[0].getComponent(cc.Label).string=e.lab[i]+"";c.commonAction(this.ui,.25,.1),this.cb=a},t.prototype.hideRev=function(){this.guang0.active=!1,this.guang1.active=!1,this.guang2.active=!1,this.node.active=!1},t.prototype.receiveFun=function(e){var t=this.currgfitObj.type;if("jb"==t)s.default.emit("addGlodAcion",{node:this.node,number:this.currgfitObj.value*e});else if("tl"==t)s.default.emit("addStrength",this.currgfitObj.value*e);else if("mm"==t){2==e&&s.default.emit("addGlodAcion",{node:this.node,number:1e3});var o=c.goRepetition(r.default.gameData.cat,d.cat),a=o[c.getIndex(o)];r.default.gameData.cat.push(a),console.log("\u83b7\u5f97\u732b\u54aa==",a,r.default.gameData.cat),this.cb&&this.cb()}else"tsk"==t?s.default.emit("addTsk",this.currgfitObj.value*e):"jsk"==t&&s.default.emit("addJsk",this.currgfitObj.value*e);this.hideRev()},t.prototype.oneReceive=function(){this.receiveFun(1)},t.prototype.doubleReceive=function(){var e=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){l.default.instance.showIosVideo(function(){e.receiveFun(2)})}else this.receiveFun(2)},t.prototype.boxClose=function(){var e=this.currgfitObj.type;"jb"==e?s.default.emit("addGlodAcion",{node:this.node,number:this.currgfitObj.lab[0]}):"tl"==e&&s.default.emit("addStrength",this.currgfitObj.lab[0]),this.hideRev(),this.currgfitObj.cb&&this.currgfitObj.cb()},__decorate([n(cc.Node)],t.prototype,"guang0",void 0),__decorate([n(cc.Node)],t.prototype,"guang1",void 0),__decorate([n(cc.Node)],t.prototype,"guang2",void 0),__decorate([n(cc.Node)],t.prototype,"ui",void 0),__decorate([n(cc.Node)],t.prototype,"doubleBtn",void 0),__decorate([n(cc.Node)],t.prototype,"oneBtn",void 0),__decorate([n(cc.Node)],t.prototype,"confirmBtn",void 0),__decorate([n(cc.Node)],t.prototype,"title",void 0),__decorate([n(cc.Sprite)],t.prototype,"giftNodes",void 0),t=o=__decorate([i],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../common/utils":"utils","./Const":"Const","./Event_Mgr":"Event_Mgr","./Global":"Global","./iosAd":"iosAd"}],setting:[function(e,t,o){"use strict";cc._RF.push(t,"24a1fscJPNNG4NcOlGPsFqc","setting"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Global"),i=cc._decorator,n=i.ccclass,c=i.property,r=function(e){function t(){var t=e.call(this)||this;return t.musicBtn=null,t.soundEffBtn=null,t.closeBtn=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.musicBtn.on(cc.Node.EventType.TOUCH_START,this.music,this),this.soundEffBtn.on(cc.Node.EventType.TOUCH_START,this.soundeff,this),this.closeBtn.on(cc.Node.EventType.TOUCH_START,this.hide,this)},t.prototype.start=function(){},t.prototype.open=function(){this.node.active=!0;var e=this.node.getChildByName("noenergybg");e.scale=0,e.runAction(cc.sequence(cc.scaleTo(.2,1.2),cc.scaleTo(.15,1))),this.musicBtn.children[0].active=a.default.gameData.musicEnabled,this.soundEffBtn.children[0].active=a.default.gameData.soundEnabled},t.prototype.hide=function(){this.node.active=!1},t.prototype.music=function(){this.musicBtn.children[0].active=!this.musicBtn.children[0].active,a.default.gameData.musicEnabled=this.musicBtn.children[0].active},t.prototype.soundeff=function(){this.soundEffBtn.children[0].active=!this.soundEffBtn.children[0].active,a.default.gameData.soundEnabled=this.soundEffBtn.children[0].active},__decorate([c(cc.Node)],t.prototype,"musicBtn",void 0),__decorate([c(cc.Node)],t.prototype,"soundEffBtn",void 0),__decorate([c(cc.Node)],t.prototype,"closeBtn",void 0),t=o=__decorate([n],t)}(cc.Component);o.default=r,cc._RF.pop()},{"./Global":"Global"}],timerOutNode:[function(e,t,o){"use strict";cc._RF.push(t,"4b5ecfKr/pL/ravxuolDU/3","timerOutNode"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./downTime"),i=e("../common/Global"),n=e("./dif_game"),c=e("./dif_audio"),r=e("./dif_strength"),s=e("../StartPageControl"),d=e("./blackWin"),l=e("../common/Event_Mgr"),u=e("../common/iosAd"),h=cc._decorator,f=h.ccclass,p=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.addTimeBtn=null,t.addkaIcon=null,t.resetBtn=null,t.blackBtn=null,t.isStartGame=!0,t}return __extends(t,e),t.prototype.onLoad=function(){this.blackBtn.on(cc.Node.EventType.TOUCH_START,this.blackHome,this),l.default.on("ovtimeIcon",this,this.ovtimeIcon)},t.prototype.start=function(){},t.prototype.onEnable=function(){this.ovtimeIcon()},t.prototype.ovtimeIcon=function(){i.default.config.allow_video?(this.addkaIcon.parent=this.addTimeBtn,this.addkaIcon.y=22):(this.addkaIcon.parent=this.addTimeBtn.children[0],this.addkaIcon.y=0),this.addkaIcon.children[0].getComponent(cc.Label).string="x"+i.default.gameData.overtime_num,this.addkaIcon.active=i.default.gameData.overtime_num>0},t.prototype.reset=function(e){var t=this;this.isStartGame&&(this.isStartGame=!1,r.default.instance.consumeStrength(function(){s.default.instance.strengthAction(e.target,function(){cc.find("Canvas/panel/strengthUI/strengthBG").active=!1,cc.find("Canvas/panel/GlodUI/glodBG").active=!1,c.default.instance.playBgm(),t.isStartGame=!0,t.resetFun()})},function(){t.isStartGame=!0,s.default.instance.strengthInsufficient()}),u.default.instance.hideBanner())},t.prototype.resetFun=function(){n.default.instance.currLvConf&&(n.default.instance.reset(),l.default.emit("hammer_reset"),l.default.emit("randomHammer"),l.default.emit("hideDrawer"),a.default.instance.startCountdown(),n.default.instance.isPlaying=!0,i.default.config.show_guide&&1==i.default.gameData.level&&n.default.instance.showTutorial(),this.node.active=!1)},t.prototype.blackHome=function(){this.node.active=!1,d.default.instance.quitGameOnclick()},t.prototype.addTime=function(){var e=this;if(console.log("\u8d85\u65f6=============",i.default.gameData.videoCount,i.default.config.video_number),cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os&&i.default.gameData.overtime_num<=0){c.default.instance.suspendPlayBgm();u.default.instance.showIosVideo(function(){a.default.instance.add60(60),e.node.active=!1,u.default.instance.hideBanner(),c.default.instance.playBgm()},function(){u.default.instance.hideBanner(),c.default.instance.playBgm()})}else i.default.gameData.overtime_num--,i.default.gameData.overtime_num<=0&&(i.default.gameData.overtime_num=0),a.default.instance.add60(60),this.node.active=!1},__decorate([p(cc.Node)],t.prototype,"addTimeBtn",void 0),__decorate([p(cc.Node)],t.prototype,"addkaIcon",void 0),__decorate([p(cc.Node)],t.prototype,"resetBtn",void 0),__decorate([p(cc.Node)],t.prototype,"blackBtn",void 0),t=__decorate([f],t)}(cc.Component);o.default=m,cc._RF.pop()},{"../StartPageControl":"StartPageControl","../common/Event_Mgr":"Event_Mgr","../common/Global":"Global","../common/iosAd":"iosAd","./blackWin":"blackWin","./dif_audio":"dif_audio","./dif_game":"dif_game","./dif_strength":"dif_strength","./downTime":"downTime"}],tips:[function(e,t,o){"use strict";cc._RF.push(t,"54716nDLLdPxIOMBlQ3fhfl","tips"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./Event_Mgr"),i=cc._decorator,n=i.ccclass,c=i.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text=null,t.bg=null,t}return __extends(t,e),t.prototype.onLoad=function(){a.default.on("openTips",this,this.open)},t.prototype.start=function(){},t.prototype.open=function(e){this.bg.stopAllActions(),this.bg.opacity=0,this.bg.active=!0,this.text.string=e,this.bg.runAction(cc.sequence(cc.fadeIn(.4),cc.delayTime(1),cc.fadeOut(.2)))},__decorate([c(cc.Label)],t.prototype,"text",void 0),__decorate([c(cc.Node)],t.prototype,"bg",void 0),t=__decorate([n],t)}(cc.Component);o.default=r,cc._RF.pop()},{"./Event_Mgr":"Event_Mgr"}],unlock:[function(e,t,o){"use strict";cc._RF.push(t,"4a35fentRdBepTOHCkpPcCs","unlock"),Object.defineProperty(o,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,n=a.property,c=e("../common/utils"),r=e("../StartPageControl"),s=e("../common/Global"),d=e("./passPage"),l=e("../common/iosAd"),u=function(e){function t(){var t=e.call(this)||this;return t.bg=null,t.unlockBtn=null,t.startfun=null,o.instance=t,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){this.unlockBtn.on(cc.Node.EventType.TOUCH_START,this.unlockFun,this)},t.prototype.start=function(){},t.prototype.openUnlock=function(e){this.startfun=e,this.node.active=!0,c.commonAction(this.bg,.25,.1)},t.prototype.hideUnlock=function(){this.node.active=!1,r.default.instance.isStartGame=!0,d.default.instance.isStartGame=!0},t.prototype.unlockFun=function(){var e=this;if(cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os){l.default.instance.showIosVideo(function(){e.unlocksucc(),r.default.instance.isStartGame=!0,d.default.instance.isStartGame=!0},function(){r.default.instance.isStartGame=!0,d.default.instance.isStartGame=!0})}else this.unlocksucc()},t.prototype.unlocksucc=function(){s.default.unlockNext=0,"home"==this.startfun?r.default.instance.startFunc():d.default.instance.startFunc(),this.hideUnlock()},__decorate([n(cc.Node)],t.prototype,"bg",void 0),__decorate([n(cc.Node)],t.prototype,"unlockBtn",void 0),t=o=__decorate([i],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../StartPageControl":"StartPageControl","../common/Global":"Global","../common/iosAd":"iosAd","../common/utils":"utils","./passPage":"passPage"}],utils:[function(e,t,o){"use strict";cc._RF.push(t,"76e64ifQzZEi4D8ajuNyjjI","utils");var a=this;Object.defineProperty(o,"__esModule",{value:!0});var i=0;o.getIsCanClick=function(){var e=(new Date).getTime();return e-i<400||(i=e,!1)},o.randomIndex=function(e,t,o){void 0===t&&(t="weight"),void 0===o&&(o=0);var a=[],i=0;if(e&&e.length)for(var n=0;n<e.length;n++){var c=e[n],r=Number(c[t])||o||0;a[n]=[i,i+r],i+=r}if(i>0){var s=Math.random()*i;for(n=0;n<a.length;n++){var d=a[n];if(d[0]<=s&&s<d[1])return n}}return 0},o.getRandom=function(e,t,a){return void 0===t&&(t="weight"),void 0===a&&(a=0),e&&e.length?e[o.randomIndex(e,t,a)]:null},o.getArrRandomly=function(e){for(var t=e.length-1;t>=0;t--){var o=Math.floor(Math.random()*(t+1)),a=e[o];e[o]=e[t],e[t]=a}return e},o.getRandomValues=function(e,t){if(!(e>t))return e+Math.floor(Math.random()*(t-e+1))},o.worldConvertLocalPointAR=function(e,t){return e?e.convertToNodeSpaceAR(t):null},o.localConvertWorldPointAR=function(e){return e?e.convertToWorldSpaceAR(cc.v2(0,0)):null},o.localConvertLocalPointAR=function(e,t){return e&&t?e.convertToNodeSpaceAR(t.convertToWorldSpaceAR(cc.v2(0,0))):null},o.isSameDay=function(e,t){var o=new Date(e),a=""+o.getFullYear()+(o.getMonth()+1)+o.getDate(),i=new Date(t);return a===""+i.getFullYear()+(i.getMonth()+1)+i.getDate()},o.conversionTime=function(e){var t=Math.floor(e/1e3);return(Math.floor(t/60)<10?"0"+Math.floor(t/60):Math.floor(t/60))+":"+(t%60<10?"0"+t%60:t%60)},o.conversionTime2=function(e){var t=Math.floor(e/1e3);return Math.floor(t/3600)+"\u5c0f\u65f6"+Math.floor(t%3600/60)+"\u5206"},o.CountdownFun=function(e){var t=e,o=Math.floor(t/60/60),a=Math.floor(t%3600/60),i=Math.floor(t%60);return a<10&&(a="0"+a),i<10&&(i="0"+i),{minStr:a+":"+i,hourStr:o+"\u5c0f\u65f6"+a+"\u5206"}},o.arrayToRichText=function(e){for(var t="",o=0;o<e.length;o++)t+="<color="+e[o].color+">"+e[o].string+"</c>";return t},o.deepCopy=function(e){return JSON.parse(JSON.stringify(e))},o.getArrayXiaoyu0=function(e){for(var t=0,o=0;o<e.length&&(t++,!(e[o]<0));o++);return t},o.base64Decode=function(e){for(var t,o,a,i,n,c,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s=0,d=(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length,l=[];s<d;)t=r.indexOf(e.charAt(s++))<<2|(i=r.indexOf(e.charAt(s++)))>>4,o=(15&i)<<4|(n=r.indexOf(e.charAt(s++)))>>2,a=(3&n)<<6|(c=r.indexOf(e.charAt(s++))),l.push(t),64!=n&&l.push(o),64!=c&&l.push(a);return l},o.utf8Decode=function(e){for(var t,o,a="",i=0,n=t=o=0,c=e.length;i<c;)(n=e[i])<128?(a+=String.fromCharCode(n),i++):n>191&&n<224?(t=e[i+1],a+=String.fromCharCode((31&n)<<6|63&t),i+=2):(t=e[i+1],o=e[i+2],a+=String.fromCharCode((15&n)<<12|(63&t)<<6|63&o),i+=3);return a},o.createUUID=function(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},o.getLocalUUID=function(){var e=cc.sys.localStorage.getItem("LOCAL_UUID_KEY");return e||(e=a.createUUID(),cc.sys.localStorage.setItem("LOCAL_UUID_KEY",e)),e},o.commonAction=function(e,t,o,a,i){void 0===t&&(t=.25),void 0===o&&(o=.1),void 0===i&&(i=0),e.active=!0,e.scale=0,e.runAction(cc.sequence(cc.scaleTo(t,1.2),cc.scaleTo(o,1),cc.delayTime(i),cc.callFunc(a)))},o.goRepetition=function(e,t){for(var o=[],a=0;a<t.length;a++)-1===e.indexOf(t[a])&&o.push(t[a]);return o},o.getIndex=function(e){return Math.floor(Math.random()*e.length)},cc._RF.pop()},{}],wssdk:[function(e,t,o){"use strict";cc._RF.push(t,"96b01Chv11Dr7msIED2uD0I","wssdk");var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports.default=function(e){var t={};function o(a){if(t[a])return t[a].exports;var i=t[a]={exports:{},id:a,loaded:!1};return e[a].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}return o.m=e,o.c=t,o.p="",o(0)}([function(e,t,o){var a,i=(a=o(1))&&a.__esModule?a:{default:a},n=o(4),c=o(5),r=o(6),s=o(7),d=o(8),l=o(9),u=o(10),h=o(11),f=o(12),p=o(13),m=o(2),g=o(14);(0,m.initUtil)(i.default),(0,n.initHTTP)(i.default),(0,c.initUser)(i.default),(0,r.initConfig)(i.default),(0,s.initData)(i.default),(0,d.initShare)(i.default),(0,l.initProcess)(i.default),(0,u.initPayment)(i.default),(0,h.initAD)(i.default),(0,f.initHook)(i.default),(0,p.initInvite)(i.default),(0,g.initEvent)(i.default),e.exports=window.ws=i.default},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e},n=(a=o(2))&&a.__esModule?a:{default:a},c={tmp:{},options:{scheme:"https://",host:"api.websdk.cn",apiVersion:"v1",USER_KEY:"ws_user",CONF_KEY:"ws_conf",DATA_KEY:"ws_data",share10:!0,commonDuration:120,allowAld:!1},conf:{},user:{},data:{},version:"1.0.1",mode:"default",debug:!0,shareCallbackData:{},shareTempData:{},shareGiftTempData:{},_initCallbacks:[],_showCallbacks:[],_hideCallbacks:[],_afterHideCallbacks:[],_shareCallbacks:[],_openFromShareCallbacks:[],_openFromCodeCallbacks:[],_onInit:function(){var e=!0,t=!1,o=void 0;try{for(var a,i=this._initCallbacks[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var n=a.value;n&&n()}}catch(e){t=!0,o=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw o}}},_onShow:function(e){if(console.log("onShow:",e,"mode:",this.mode),"default"!==this.mode)this.shareCallbackData&&this.shareCallbackData.callback&&"shareAppMessage"==this.mode&&(this.shareCallbackData.callback(e,Date.now()-this.shareCallbackData.ms),this.shareCallbackData={}),this.mode="default";else{var t=!0,o=!1,a=void 0;try{for(var i,n=this._showCallbacks[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var r=i.value;r&&r(e)}}catch(e){o=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(o)throw a}}if(e.query&&"share"===e.query.type?c._openFromShare("onShow",e.query,e):e.query&&e.query.scene&&"code_"===e.query.scene.substring(0,5)&&c._openFromCode("onShow",e.query.scene,e),this.user&&e.shareTicket&&e.query&&e.query.uid==this.user.id)for(var s in this.shareTempData)s==e.query.share_tid&&c._shareCallback(this.shareTempData[s],e)}},_onHide:function(e){if(console.log("onHide:",e,"mode:",this.mode),"default"===this.mode){var t=!0,o=!1,a=void 0;try{for(var i,n=this._hideCallbacks[Symbol.iterator]();!(t=(i=n.next()).done);t=!0){var c=i.value;c&&c(e)}}catch(e){o=!0,a=e}finally{try{!t&&n.return&&n.return()}finally{if(o)throw a}}var r=!0,s=!1,d=void 0;try{for(var l,u=this._afterHideCallbacks[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var h=l.value;h&&h(e)}}catch(e){s=!0,d=e}finally{try{!r&&u.return&&u.return()}finally{if(s)throw d}}}},_openFromShare:function(e,t,o){var a=!0,i=!1,n=void 0;try{for(var c,r=this._openFromShareCallbacks[Symbol.iterator]();!(a=(c=r.next()).done);a=!0){var s=c.value;s&&s({from:e,query:t,options:o})}}catch(e){i=!0,n=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw n}}},_openFromCode:function(e,t,o){c.get({url:"/share/qrcode",data:{scene:t},success:function(a){var i=!0,n=!1,r=void 0;try{for(var s,d=c._openFromCodeCallbacks[Symbol.iterator]();!(i=(s=d.next()).done);i=!0){var l=s.value;l&&l({from:e,scene:t,options:o,query:a.data})}}catch(e){n=!0,r=e}finally{try{!i&&d.return&&d.return()}finally{if(n)throw r}}}})},_shareCallback:function(e,t){wx.getShareInfo({shareTicket:t.shareTicket,success:function(o){e.onShareTicketSuccess&&e.onShareTicketSuccess(o),c.shareLog(e,"click",t.shareTicket,o,t)}.bind(this),fail:function(o){e.onShareTicketFail&&e.onShareTicketFail(o),c.shareLog(e,"click",t.shareTicket,{},t)}.bind(this)})},onInit:function(e){this._initCallbacks.push(e)},onShow:function(e){this._showCallbacks.push(e)},onHide:function(e){this._hideCallbacks.push(e)},afterHide:function(e){this._afterHideCallbacks.push(e)},openFromShare:function(e){this._openFromShareCallbacks.push(e)},openFromCode:function(e){this._openFromCodeCallbacks.push(e)},init:function(e){this.options=i({},n.default.copy(e,this.options)),this.systemInfo=wx.getSystemInfoSync(),this.launchOptions=wx.getLaunchOptionsSync(),this.user=wx.getStorageSync(this.options.USER_KEY),this.conf=wx.getStorageSync(this.options.CONF_KEY),this.data=wx.getStorageSync(this.options.DATA_KEY),this.log("conf:",this.conf),wx.onShow(this._onShow.bind(this)),wx.onHide(this._onHide.bind(this))},onLogined:function(){var e=this.launchOptions;e.query&&"share"===e.query.type?c._openFromShare("onLaunch",e.query,e):e.query&&e.query.scene&&"code_"===e.query.scene.substring(0,5)&&c._openFromCode("onLaunch",e.query.scene,e),this._onInit()}};t.default=c},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==a(Symbol.iterator)?function(e){return void 0===e?"undefined":a(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":a(e)};t.initUtil=function(e){e.checkSDK=function(e,t){var o=this;return function(a,i){return o.requireSDK(e)?t.apply(o,[a]):(o.log("\u5fae\u4fe1SDK\u7248\u672c\u8fc7\u4f4e\uff1a"+o.systemInfo.SDKVersion+",\u9700\u8981\u66f4\u65b0\u81f3"+e),void(i&&"function"==typeof i&&i([o.systemInfo.SDKVersion,e])))}},e.requireSDK=function(e){return r.compareVersion(this.systemInfo.SDKVersion,e)},e.requireSystemVersion=function(e){return r.compareVersion(this.systemInfo.version,e)},e.isIPhoneX=function(){return this.systemInfo&&-1!=this.systemInfo.model.indexOf("iPhone X")},e.isIOS=function(){return this.systemInfo&&-1!=this.systemInfo.system.indexOf("iOS")},e.isAndroid=function(){return this.systemInfo&&-1!=this.systemInfo.system.indexOf("Android")},e.toFixed=function(e,t){for(var o=e.toFixed(t)+"";"0"===o[o.length-1];)if("."===(o=o.substring(0,o.length-1))[o.length-1]){o=o.substring(0,o.length-1);break}return o},e.log=function(){try{if(this.debug&&console&&console.log){for(var e=arguments.length,t=Array(e),o=0;o<e;o++)t[o]=arguments[o];return console.log.apply(console,t)}}catch(e){}},e.setAlertCallback=function(t){e._alertCallback=t},e.alert=function(t){e._alertCallback?e._alertCallback(t):wx.showModal({content:t})},e.trace=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.post({url:"/log/trace",data:{key:e,pos:t,data:o}})},e.getServerTime=function(){return e.conf&&e.conf.server_time?e.conf.server_time:0}};var n,c=(n=o(3))&&n.__esModule?n:{default:n},r={sign:function(e,t){if("string"==typeof e)return r.signSort(e,t);if("object"==(void 0===e?"undefined":i(e))){var o=[];for(var a in e)o.push(a+"="+e[a]);return r.signSort(o.join("&"),t)}},signSort:function(e,t){var o=e.split("&").sort().join("&")+"&key="+t;return(0,c.default)(o).toUpperCase()},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},guid:function(){return Date.now()+"-"+r.S4()},compareVersion:function(e,t){var o=parseFloat(e),a=parseFloat(t),i=e.replace(o+".",""),n=t.replace(a+".","");return o>a||!(o<a)&&i>=n},copy:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||(e&&e.push?[]:{});for(var o in e)t[o]="object"===i(e[o])?r.copy(e[o]):e[o];return t},randomSort:function(e){for(var t,o=0;o<e.length;o++){var a=parseInt(Math.random()*e.length+"");t=e[a],e[a]=e[o],e[o]=t}return e}};t.default=r},function(e,t,o){var a;"function"==typeof Symbol&&Symbol.iterator,function(i){function n(e,t){var o=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(o>>16)<<16|65535&o}function c(e,t,o,a,i,c){return n((r=n(n(t,e),n(a,c)))<<(s=i)|r>>>32-s,o);var r,s}function r(e,t,o,a,i,n,r){return c(t&o|~t&a,e,t,i,n,r)}function s(e,t,o,a,i,n,r){return c(t&a|o&~a,e,t,i,n,r)}function d(e,t,o,a,i,n,r){return c(t^o^a,e,t,i,n,r)}function l(e,t,o,a,i,n,r){return c(o^(t|~a),e,t,i,n,r)}function u(e,t){var o,a,i,c,u;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var h=1732584193,f=-271733879,p=-1732584194,m=271733878;for(o=0;o<e.length;o+=16)a=h,i=f,c=p,u=m,h=l(h=d(h=d(h=d(h=d(h=s(h=s(h=s(h=s(h=r(h=r(h=r(h=r(h,f,p,m,e[o],7,-680876936),f=r(f,p=r(p,m=r(m,h,f,p,e[o+1],12,-389564586),h,f,e[o+2],17,606105819),m,h,e[o+3],22,-1044525330),p,m,e[o+4],7,-176418897),f=r(f,p=r(p,m=r(m,h,f,p,e[o+5],12,1200080426),h,f,e[o+6],17,-1473231341),m,h,e[o+7],22,-45705983),p,m,e[o+8],7,1770035416),f=r(f,p=r(p,m=r(m,h,f,p,e[o+9],12,-1958414417),h,f,e[o+10],17,-42063),m,h,e[o+11],22,-1990404162),p,m,e[o+12],7,1804603682),f=r(f,p=r(p,m=r(m,h,f,p,e[o+13],12,-40341101),h,f,e[o+14],17,-1502002290),m,h,e[o+15],22,1236535329),p,m,e[o+1],5,-165796510),f=s(f,p=s(p,m=s(m,h,f,p,e[o+6],9,-1069501632),h,f,e[o+11],14,643717713),m,h,e[o],20,-373897302),p,m,e[o+5],5,-701558691),f=s(f,p=s(p,m=s(m,h,f,p,e[o+10],9,38016083),h,f,e[o+15],14,-660478335),m,h,e[o+4],20,-405537848),p,m,e[o+9],5,568446438),f=s(f,p=s(p,m=s(m,h,f,p,e[o+14],9,-1019803690),h,f,e[o+3],14,-187363961),m,h,e[o+8],20,1163531501),p,m,e[o+13],5,-1444681467),f=s(f,p=s(p,m=s(m,h,f,p,e[o+2],9,-51403784),h,f,e[o+7],14,1735328473),m,h,e[o+12],20,-1926607734),p,m,e[o+5],4,-378558),f=d(f,p=d(p,m=d(m,h,f,p,e[o+8],11,-2022574463),h,f,e[o+11],16,1839030562),m,h,e[o+14],23,-35309556),p,m,e[o+1],4,-1530992060),f=d(f,p=d(p,m=d(m,h,f,p,e[o+4],11,1272893353),h,f,e[o+7],16,-155497632),m,h,e[o+10],23,-1094730640),p,m,e[o+13],4,681279174),f=d(f,p=d(p,m=d(m,h,f,p,e[o],11,-358537222),h,f,e[o+3],16,-722521979),m,h,e[o+6],23,76029189),p,m,e[o+9],4,-640364487),f=d(f,p=d(p,m=d(m,h,f,p,e[o+12],11,-421815835),h,f,e[o+15],16,530742520),m,h,e[o+2],23,-995338651),p,m,e[o],6,-198630844),f=l(f=l(f=l(f=l(f,p=l(p,m=l(m,h,f,p,e[o+7],10,1126891415),h,f,e[o+14],15,-1416354905),m,h,e[o+5],21,-57434055),p=l(p,m=l(m,h=l(h,f,p,m,e[o+12],6,1700485571),f,p,e[o+3],10,-1894986606),h,f,e[o+10],15,-1051523),m,h,e[o+1],21,-2054922799),p=l(p,m=l(m,h=l(h,f,p,m,e[o+8],6,1873313359),f,p,e[o+15],10,-30611744),h,f,e[o+6],15,-1560198380),m,h,e[o+13],21,1309151649),p=l(p,m=l(m,h=l(h,f,p,m,e[o+4],6,-145523070),f,p,e[o+11],10,-1120210379),h,f,e[o+2],15,718787259),m,h,e[o+9],21,-343485551),h=n(h,a),f=n(f,i),p=n(p,c),m=n(m,u);return[h,f,p,m]}function h(e){var t,o="",a=32*e.length;for(t=0;t<a;t+=8)o+=String.fromCharCode(e[t>>5]>>>t%32&255);return o}function f(e){var t,o=[];for(o[(e.length>>2)-1]=void 0,t=0;t<o.length;t+=1)o[t]=0;var a=8*e.length;for(t=0;t<a;t+=8)o[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return o}function p(e){var t,o,a="";for(o=0;o<e.length;o+=1)t=e.charCodeAt(o),a+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return a}function m(e){return unescape(encodeURIComponent(e))}function g(e){return function(e){return h(u(f(e),8*e.length))}(m(e))}function v(e,t){return function(e,t){var o,a,i=f(e),n=[],c=[];for(n[15]=c[15]=void 0,i.length>16&&(i=u(i,8*e.length)),o=0;o<16;o+=1)n[o]=909522486^i[o],c[o]=1549556828^i[o];return a=u(n.concat(f(t)),512+8*t.length),h(u(c.concat(a),640))}(m(e),m(t))}function _(e,t,o){return t?o?v(t,e):p(v(t,e)):o?g(e):p(g(e))}void 0===(a=function(){return _}.call(t,o,t,e))||(e.exports=a)}()},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initHTTP=function(e){e.request=c,e.get=r,e.post=s,e.put=d,e.delete=l,e.formatURL=u};var a=n(o(1)),i=n(o(2));function n(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.success,o=e.fail;return"GET"==e.method?e.url=u(e.url,e.data):e.url=u(e.url),e.header||(e.header={}),e.header.Authorization=a.default.isLogined()?a.default.user.token:"",e.success=function(i){"LOGIN_REQUIRED"===i.data.key?(a.default.log("login required:",e.url,e,i),a.default.doLogin()):0===i.data.code?(a.default.log("success:",e.url,e,i),t&&t(i.data)):o?(a.default.log("fail:",e.url,e,i),o(i.data)):a.default.log("unknown:",e.url,e,i)},e.fail=function(t){a.default.log("error:",e.url,e,t),o&&o(t)},wx.request(e)}function r(e){return e.method="GET",c(e)}function s(e){return e.method="POST",c(e)}function d(e){return e.method="PUT",c(e)}function l(e){return e.method="DELETE",c(e)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){-1==e.indexOf("?")&&(e+="?");var o=[];if(a.default.isLogined()&&o.push("user="+a.default.user.id),a.default.launchOptions){var n=a.default.launchOptions.query;n&&(n.uid&&o.push("uid="+n.uid),n.channel&&o.push("channel="+n.channel),n.share_id&&o.push("share_id="+n.share_id),n.share_tid&&o.push("share_tid="+n.share_tid),n.pos&&o.push("share_pos="+n.pos),n.scene&&o.push("scene="+decodeURIComponent(n.scene)))}o.push("v="+a.default.version),o.push("version="+a.default.options.version),o.push("appid="+a.default.options.appid),o.push("t="+Date.now()),"?"!==e.charAt(e.length-1)&&"&"!==e.charAt(e.length-1)&&(e+="&");var c=(e+=o.join("&")).split("?")[1];if(t){var r=[];for(var s in t)r.push(s+"="+t[s]);c+="&"+r.join("&")}if((e+="&sign="+i.default.sign(c,a.default.options.secret)).startsWith("/"))return a.default.options.scheme+a.default.options.host+"/"+a.default.options.apiVersion+e}return e}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initUser=function(e){e.isLogined=function(){return e.user&&e.user.token},e.getLoginStatus=function(){return e.isLogined()?"success":e.isCheckSession||e.isLogining?"logining":"fail"},e.login=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t?e.doLogin(t):(e.isCheckSession=!0,wx.checkSession({success:function(){e.checkLogin(t),e.isCheckSession=!1}.bind(e),fail:function(){e.doLogin(t),e.isCheckSession=!1}.bind(e)}))},e.checkLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.isLogined()?(e.loginSuccess(),!e.requireSDK("2.0.3")&&e.needUserInfo()&&e.getUserInfo()):e.doLogin(t)},e.checkCode2access=function(t){var o=t.session_key?t:null;e.post({url:"/oauth/code2access_token",data:t,success:function(t){e.isLogining=!1,e.saveUser(t.data),e.checkLogin(o)}.bind(e),fail:e.loginFail.bind(e)})},e.doLogin=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.isLogining||(e.isLogining=!0,e.user=null,t?e.checkCode2access(t):wx.login({success:function(t){t.code?e.checkCode2access({code:t.code}):e.loginFail(t)}.bind(e),fail:e.loginFail.bind(e)}))},e.loginSuccess=function(t){var o=e.conf&&e.conf.last?e.conf.last:0;!o||Date.now()-o>1e3*e.options.commonDuration?e.getCommon(t):(e.doLoginSuccess(t),e.onLogined())},e.getCommon=function(t){e.get({url:"/common",success:function(o){e.conf=o.data.conf,e.conf.last=Date.now(),wx.setStorage({key:e.options.CONF_KEY,data:e.conf}),e.data||(e.data=o.data.data,wx.setStorage({key:e.options.DATA_KEY,data:e.data})),(t=t||{}).data=o.data.data,e.doLoginSuccess(t),e.onLogined()}.bind(e),fail:function(t){e.loginFail(t)}.bind(e)})},e.doLoginSuccess=function(t){e.isLogining=!1,e.loginCompleteCallback&&e.loginCompleteCallback(t),e.loginSuccessCallback&&e.loginSuccessCallback(t)},e.loginFail=function(t){e.isLogining=!1,e.loginCompleteCallback&&e.loginCompleteCallback(t),e.loginFailCallback&&e.loginFailCallback(t)},e.onLoginSuccess=function(t){e.loginSuccessCallback=t},e.onLoginFail=function(t){e.loginFailCallback=t},e.onLoginComplete=function(t){e.loginCompleteCallback=t},e.checkUserInfo=function(){e.needUserInfo()&&e.getUserInfo()},e.needUserInfo=function(){return!e.user||!e.user.nickname||!e.user.avatar},e.getUserInfo=function(){wx.getUserInfo({withCredentials:!0,success:function(t){return e.post({url:"/oauth/update_userinfo",data:t,success:function(t){e.saveUser(t.data),e.needUserInfo()?e.getUserInfoFail(t):e.getUserInfoSuccess()}.bind(e),fail:e.getUserInfoFail.bind(e)}),t}.bind(e),fail:e.getUserInfoFail.bind(e)})},e.getUserInfoSuccess=function(e){},e.getUserInfoFail=function(e){},e.saveUser=function(t){e.user=t,e.user.last=Date.parse(new Date),wx.setStorage({key:e.options.USER_KEY,data:e.user})}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initConfig=function(e){e.getConfig=n};var a,i=(a=o(1))&&a.__esModule?a:{default:a};function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return i.default.conf&&void 0!==i.default.conf[e]?i.default.conf[e]:t}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initData=function(e){e.getData=n,e.setData=c,e.setAllData=r,e.incData=s,e.postData=d,e.postGameScore=l,e.getScoreRank=u};var a,i=(a=o(1))&&a.__esModule?a:{default:a};function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i.default.data&&void 0!==i.default.data[e]?i.default.data[e]:t}function c(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i.default.data||(i.default.data={}),i.default.data[e]=t,o&&i.default.postData(e)}function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];i.default.data=e,t&&i.default.postData()}function s(e,t){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=i.default.getData(e,a)+t;return i.default.setData(e,n,o),n}function d(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],wx.setStorage({key:i.default.options.DATA_KEY,data:i.default.data}),i.default.data=function e(t){for(var o in t)t[o]instanceof Array?t[o]=t[o].slice():t[o]instanceof Object&&(t[o]=e(t[o]));return t}(i.default.data),i.default.post({url:"/data",data:i.default.data})}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"default",c={};if(e instanceof Object){var r=e;c={id:r.id,score:r.score,time:r.time,version:i.default.options.version,data:r.data,key:r.key}}else c={id:e,score:t,time:o,version:i.default.options.version,data:a,key:n};i.default.post({url:"/score",data:c,success:function(e){i.default.log("\u63d0\u4ea4\u5206\u6570\u6210\u529f\uff1a",t,e)},fail:function(e){i.default.log("\u63d0\u4ea4\u5206\u6570\u5931\u8d25\uff1a",t,e)}})}function u(e){var t=e.key,o=void 0===t?"default":t,a=e.scale,n=void 0===a?"week":a,c=e.skip,r=void 0===c?0:c,s=e.limit,d=void 0===s?10:s,l=e.success,u=void 0===l?null:l,h=e.fail,f=void 0===h?null:h;i.default.get({url:"/score",data:{score_key:o,scale:n,skip:r,limit:d},success:function(e){u&&u(e.data)},fail:function(e){f&&f(e)}})}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initShare=function(e){e.share=function(t){e.options.allowAld?e.aldShareAppMessage(this.createShareOptions(t)):e.shareAppMessage(this.createShareOptions(t)),this.options.share10&&(this.log("share10"),this.shareLog(t,"share10","",{},{})),t.onShareBack&&(e.shareCallbackData={callback:t.onShareBack,ms:Date.now()})},e.createShareOptions=function(t){t.pos||(t.pos="default");var o=this.getShareInfo(t);t.shareId=o.shareId,t.imageUrlId=o.imageUrlId,t.title||(t.title=o.title),t.imageUrl||(t.imageUrl=o.imageUrl),t.success||(t.success=o.success),t.fail||(t.fail=o.fail),t.onHttpError||(t.onHttpError=o.onHttpError),t.tid||(t.tid=""+Date.now());var a="type=share&pos="+t.pos+"&share_id="+o.shareId+"&share_tid="+t.tid;this.isLogined()&&(a+="&uid="+this.user.id),t.gift&&(a+="&gift="+t.gift),t.query?"&"==t.query.indexOf(0)?(t.query=a+t.query,e.log("new share query: "+t.query)):(t.query=a+"&"+t.query,e.log("new share query: "+t.query)):t.query=a,e.shareTempData[t.tid]=t;var i={title:t.title,imageUrl:t.imageUrl,query:t.query,success:this.shareSuccess(t),fail:this.shareFail(t),complete:t.complete};return e.requireSDK("2.4.3")&&t.imageUrlId&&(i.imageUrlId=t.imageUrlId),i},e.getShareInfo=function(e){var t="",o="";this.options.share&&(t=this.options.share.title,o=this.options.share.imageUrl);var a,i=0,n=null;return e.defaultTitle&&(t=e.defaultTitle),this.conf&&this.conf.shares&&(this.conf.shares[e.pos]?a=this.conf.shares[e.pos]:this.conf.shares.default&&(a=this.conf.shares.default),a&&(a.title&&(t=a.title),a.image&&(o=a.image),a.id&&(i=a.id),a.image_id&&(n=a.image_id))),{title:t,imageUrl:o,shareId:i,imageUrlId:n,success:function(){wx.showToast({title:"\u5206\u4eab\u6210\u529f\uff01",icon:"success"})},fail:function(){wx.showToast({title:"\u5206\u4eab\u5931\u8d25\uff01",icon:"fail"})},onHttpError:function(){wx.showToast({title:"\u7f51\u7edc\u51fa\u9519\uff01",icon:"fail"})}}},e.shareSuccess=function(t){return function(o){console.log("shareSuccess"),delete e.shareTempData[t.tid];var a=!0;t.onShareSuccess&&(a=t.onShareSuccess(o)),a&&(o.shareTickets&&o.shareTickets.length>0?wx.getShareInfo({shareTicket:o.shareTickets[0],success:function(e){t.onShareTicketSuccess&&t.onShareTicketSuccess(e),this.shareLog(t,"success",o.shareTickets[0],e,o)}.bind(this),fail:function(e){t.onShareTicketFail&&t.onShareTicketFail(e),this.shareLog(t,"success",o.shareTickets[0],{},o)}.bind(this)}):(t.onShareTicketFail&&t.onShareTicketFail(),this.shareLog(t,"success","",{},o)))}.bind(this)},e.shareFail=function(e){return function(t){console.log("shareFail");var o=!0;e.onShareFail&&(o=e.onShareFail(t)),o&&this.shareLog(e,"fail","",{},t)}.bind(this)},e.shareLog=function(t,o,a,i,n){this.post({url:"/log/share",data:{share_id:t.shareId,title:t.title,query:t.query,image:t.imageUrl,pos:t.pos,tid:t.tid,status:o,shareTicket:a,info:i,error:n.errMsg,system_version:e.systemInfo.system,sdk_version:e.systemInfo.SDKVersion},success:function(a){"success"!==o&&"click"!==o||!t.success?"fail"===o&&t.fail&&t.fail(a,n):(t.success(a,n),delete e.shareTempData[t.tid])},fail:function(e){"success"!==o&&"click"!==o||!t.onHttpError?"fail"===o&&t.fail&&t.fail(e,n):t.onHttpError(e,n)}})},e.isEnableShare=function(){return!(!e.conf||!e.conf.allow_share||e.requireSystemVersion("6.7.0"))}}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e};t.initProcess=function(e){e.onShow(function(e){s=Date.now(),r.showOptions=JSON.stringify(e)}),e.afterHide(function(t){var o=Date.now(),i=r=a({},r,{times:r.times+1,showDuration:s?o-s:o-r.initStartAt,duration:o-r.initStartAt}),n=(i.hasInited,i.initStartAt,function(e,t){var o={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=e[a]);return o}(i,["hasInited","initStartAt"]));r.hasInited?l(n):(r.hasInited=!0,l(a({systemInfo:JSON.stringify(e.systemInfo),launchOptions:JSON.stringify(e.launchOptions)},n)))}),e.setProcess=d};var i=c(o(1)),n=c(o(2));function c(e){return e&&e.__esModule?e:{default:e}}var r={hasInited:!1,initStartAt:Date.now(),showOptions:"",times:0,uuid:n.default.guid(),duration:0,showDuration:0,process:"init",processDuration:0},s=0;function d(e){"string"==typeof e?(r.process=e,r.processDuration=Date.now()-r.initStartAt):i.default.log("setProcess():  \u53c2\u6570\u7c7b\u578b\u9519\u8bef")}function l(e){i.default.post({url:"/log/process",data:e,success:function(e){i.default.log("\u63d0\u4ea4\u6e38\u620f\u8fdb\u5ea6\u6570\u636e\u6210\u529f\uff1a",e)},fail:function(e){i.default.log("\u63d0\u4ea4\u6e38\u620f\u8fdb\u5ea6\u6570\u636e\u5931\u8d25\uff1a",e)}})}},function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.initPayment=function(e){e.getPaymentResult=function(e){var t=e.success,o=void 0===t?null:t,a=e.fail,i=void 0===a?null:a;this.get({url:"/payment/result",success:function(e){this.log("\u83b7\u53d6\u5145\u503c\u6570\u636e\u6210\u529f",e),o&&o(e.data)}.bind(this),fail:function(e){this.log("\u83b7\u53d6\u5145\u503c\u6570\u636e\u5931\u8d25",e),i&&i(e)}.bind(this)})},e.requestMPPayment=function(t){var o=this,a=t.title,i=void 0===a?"\u70b9\u51fb\u5145\u503c\u94fe\u63a5\u8fdb\u5165\u5145\u503c":a,n=t.pos,c=void 0===n?"default":n,r=t.image,s=void 0===r?null:r,d=t.success,l=void 0===d?null:d,u=t.fail,h=void 0===u?null:u,f=t.complete,p=void 0===f?null:f;this.log("\u6253\u5f00\u5ba2\u670d\u5bf9\u8bdd"),e.openCustomerServiceConversation({sessionFrom:c,showMessageCard:!0,sendMessageTitle:i,sendMessagePath:"?type=message",sendMessageImg:s||e.conf.shares.default.image,success:function(e){o.log("\u6253\u5f00\u5145\u503c\u4f1a\u8bdd\u6210\u529f",e),p&&p(),l&&l()},fail:function(e){o.log("\u6253\u5f00\u5145\u503c\u4f1a\u8bddfail",e),p&&p(),h&&h()}})},e.requestMPPayment=e.checkSDK("2.0.3",e.requestMPPayment)}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e};t.initAD=function(e){e.onShow(function(){for(var t in r){var o=r[t];o.isShow&&(e.createBanner({pos:o.pos,style:o.style,ms:o.ms,onResize:o.onResize}),o.isShow=!1)}for(var a=0;a<h.length;a++){var i=h[a];u[i].showed=!0,u[i].total_ms=0,u[i].last=Date.now()}h=[]}),e.afterHide(function(){for(var e in r){var t=r[e];t.isShow=t.showed,t.isShow&&p(t.pos),t.duration>0&&m(t)}for(var o in u)u[o].showed&&(P(o),h.push(o));for(var a in function(e){var t=e.ads,o=void 0===t?null:t,a=e.ad,i=void 0===a?null:a;if(!o&&!i)return!1;function n(e){var t=[],o=0,a=null;if(e.logs&&e.logs.length>0)for(var i=0;i<e.logs.length;i++)e.logs[i].posted||(o+=e.logs[i].ms,a=e.logs[i].last);if(!o||!e.data||0===e.data.length)return t;var n={pos:e.pos,tid:e.data[0].tid,commit:"show",last:a,ms:o,data:[]},c={};if(e.preload&&e.show_logs&&e.show_logs.length>0)for(var r in e.show_logs)c[e.show_logs[r].id]||(n.data.push({id:e.show_logs[r].id,cid:e.show_logs[r].cid,action:e.show_logs[r].action}),c[e.show_logs[r].id]=1);else for(var s=0;s<e.data.length;s++)c[e.data[s].id]||(n.data.push({id:e.data[s].id,cid:e.data[s].cid,action:e.data[s].action}),c[e.data[s].id]=1);return 0===n.data.length?t:(t.push(n),t)}function c(e,t){var o=[],a={},i={},n=null;if(!t.click_logs||0===t.click_logs.length)return o;for(var c=0,r=null;c<t.click_logs.length;c++)a[(n=t.click_logs[c]).id]||(r={pos:e,tid:n.tid,commit:"click",data:[n]},o.push(r),a[n.id]=1);if(t.open_logs&&t.open_logs.length>0)for(var s=0,d=null;s<t.open_logs.length;s++)i[(n=t.open_logs[s]).id]||(d={pos:e,tid:n.tid,commit:"open",data:[n]},o.push(d),i[n.id]=1);return o}var r=[];if(o)for(var s in o)r=(r=r.concat(n(o[s]))).concat(c(s,o[s]));else i&&(r=n(i));r.length>0&&L(r)}({ads:u}),d)d[a]&&d[a].count&&(b(d[a]),d[a]=null)}),e.createBanner=e.checkSDK("2.0.4",f),e.closeBanner=e.checkSDK("2.0.4",p),e.createVideo=e.checkSDK("2.0.4",v),e.createInterstitialAd=e.checkSDK("2.6.0",y),e.showInterstitialAd=e.checkSDK("2.6.0",N),e.postInterstitialData=e.checkSDK("2.6.0",b),e.isEnableVideo=g,e.getMoreGame=C,e.showMoreGame=w,e.getGameAd=x,e.hideGameAd=P,e.tapGameAd=k,e.fetchGameAd=I,e.getPromoGameAd=D,e.postAdClick=F,e.showGameAd=A};var i=c(o(1)),n=c(o(2));function c(e){return e&&e.__esModule?e:{default:e}}var r={},s={},d={},l={},u={},h=[];function f(e){var t=e.pos,o=e.style,n=void 0===o?null:o,c=e.ms,d=void 0===c?0:c,l=e.force,u=void 0!==l&&l,h=e.forceTimeout,g=void 0===h?600:h,v=e.onResize,_=void 0===v?null:v,y=e.onError,N=void 0===y?null:y;if(i.default.conf&&i.default.conf.banners&&i.default.conf.banners[t]){var b=i.default.conf.banners[t];if(b.enable){var C=void 0,w=r[t];w&&(C=s[w.adUnitId])&&(w.showed&&p(w.pos),(u||Date.now()-C.created>1e3*g)&&function(e){var t=s[e.adUnitId];if(t)t.hide(),t.destroy(),delete s[e.adUnitId]}(w)),d||(d=i.default.getConfig("banner_ms",120)),w||(w={adUnitId:b.adUnitId,pos:t,count:0,ms:d,duration:0,style:n,width:b.width?b.width>1?1:b.width:1,window:"*",data:[],onResize:_,onError:N,created:Date.now()},r[t]=w),w.count+=1,w.status="success",(C=s[w.adUnitId])||(C=s[w.adUnitId]=function(e){var t=e.banner,o=e.style,n=void 0===o?null:o,c=i.default.systemInfo.screenWidth*t.width,s=(i.default.systemInfo.screenHeight,wx.createBannerAd({adUnitId:t.adUnitId,style:a({left:0,top:0,width:c,height:180*c/750},n)}));return s.created=Date.now(),s.onError(function(e){t.status="error",t.error=e,t.timeout&&clearTimeout(t.timeout),t.timeout=null,t.showed=null,t.count=1,m(t,"error"),i.default.log("banner \u521b\u5efa\u5931\u8d25",t),r[t.pos]&&delete r[t.pos],t.onError&&t.onError(e)}),s.onResize(function(e){t.onResize&&t.onResize(e,s)}),s.onLoad(function(e){i.default.log("banner \u52a0\u8f7d\u5b8c\u6210",t),s.created=Date.now()}),s}({banner:w,style:n})),C&&(w.showed=Date.now(),setTimeout(function(){C.show()},.01),w.ms&&b.is_loop&&(w.timeout&&clearTimeout(w.timeout),w.timeout=setTimeout(function(){f({pos:t,style:n,ms:d,force:!0,onResize:_})},1e3*d)))}}else i.default.log("createBanner \u6ca1\u6709\u914d\u7f6e: "+t)}function p(e){var t=r[e];if(t&&t.showed){var o=s[t.adUnitId];if(o){var a=o.style,i=a.realWidth,n=a.realHeight,c=Date.now()-t.showed;return o.hide(),t.duration+=c,t.timeout&&clearTimeout(t.timeout),t.timeout=null,t.showed=null,t.window=i+"*"+Math.round(n),!0}}return!1}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"onHide",o={adUnitId:e.adUnitId,pos:e.pos,ms:e.ms,count:e.count,duration:e.duration,window:e.window,status:e.status,error:e.error,commit:t};e.count=0,e.duration=0,e.status="success",e.error="",e.data=[],i.default.log("postBannerData",o),i.default.post({url:"/log/ad/banner",data:o,success:function(e){i.default.log("\u63d0\u4ea4banner\u6570\u636e\u6210\u529f\uff1a",e)},fail:function(e){i.default.log("\u63d0\u4ea4banner\u6570\u636e\u5931\u8d25\uff1a",e)}})}function g(e){return i.default.conf&&i.default.conf.videos&&i.default.conf.videos[e]?i.default.conf.allow_video?!!i.default.conf.videos[e].enable:(i.default.log("\u89c6\u9891\u672a\u5f00\u542f\uff0c\u8bf7\u8f6c\u5230\u914d\u7f6eallow_video"),!1):(i.default.log("createVideo \u6ca1\u6709\u914d\u7f6e: "+e),!1)}function v(e){var t=e.pos,o=e.success,a=void 0===o?null:o,n=e.fail,c=void 0===n?null:n,r=e.complete,s=void 0===r?null:r;if(!g(t))return!1;var d={adUnitId:i.default.conf.videos[t].adUnitId,pos:t,status:"success",created:Date.now(),duration:0},l=wx.createRewardedVideoAd({adUnitId:d.adUnitId});function u(e){d.status="error",d.error=e,_(d),s&&s(e),c&&c(e),p()}function h(e){d.created=Date.now()}function f(e){s&&s(e),d.duration=Date.now()-d.created,e&&e.isEnded||void 0===e?a&&a({isEnded:!0,duration:d.duration}):(d.status="cancel",a&&a({isEnded:!1,duration:d.duration})),_(d),p()}function p(){l.offError(u),l.offLoad(h),l.offClose(f)}return l.onError(u),l.onLoad(h),l.onClose(f),l.show().catch(function(e){console.log("ws.createVideo error:",e),l.load().then(function(){return l.show()})}),!0}function _(e){i.default.post({url:"/log/ad/rewardedvideo",data:e,success:function(e){i.default.log("\u63d0\u4ea4\u6fc0\u52b1\u89c6\u9891\u6570\u636e\u6210\u529f\uff1a",e)},fail:function(e){i.default.log("\u63d0\u4ea4\u6fc0\u52b1\u89c6\u9891\u6570\u636e\u5931\u8d25\uff1a",e)}})}function y(e){var t=e.pos,o=e.success,a=void 0===o?null:o,n=e.fail,c=void 0===n?null:n,r=e.complete,s=void 0===r?null:r,u=e.show,h=void 0===u||u;if(!function(e){return i.default.conf&&i.default.conf.interstices&&i.default.conf.interstices[e]?!!i.default.conf.interstices[e].enable:(i.default.log("createInterstitialAd \u6ca1\u6709\u914d\u7f6e: "+e),!1)}(t))return!1;var f=d[t];if(!f){var p=i.default.conf.interstices[t];f={adUnitId:p.adUnitId,pos:t,status:"success",created:Date.now(),duration:0,count:0},d[t]=f}var m=l[t];function g(e){f.status="error",f.error=e,f.count=1,b(f),s&&s(e),c&&c(e),y()}function v(e){console.log("interstitial load."),f.created=Date.now(),f.count+=1}function _(e){s&&s(e),f.duration+=Date.now()-f.created,y(),a&&a()}function y(){m.offError(g),m.offLoad(v),m.offClose(_)}return m&&!m._destroyed||(m=wx.createInterstitialAd({adUnitId:f.adUnitId}),l[t]=m,f.created=Date.now()),m.onError(g),m.onLoad(v),m.onClose(_),h&&m.show().catch(function(e){console.log("ws.createInterstitialAd error:",e),f.count>0&&f.count--,i.default.requireSDK("2.8.0")&&m.load().then(function(){return m.show()})}),!0}function N(e){var t=l[e];return!t||t._destroyed?(console.log("had no ad or interstice destroyed."),!1):(t.show(),!0)}function b(e){i.default.post({url:"/log/ad/interstitial",data:e,success:function(e){i.default.log("\u63d0\u4ea4\u63d2\u5c4f\u5e7f\u544a\u6570\u636e\u6210\u529f\uff1a",e)},fail:function(e){i.default.log("\u63d0\u4ea4\u63d2\u5c4f\u5e7f\u544a\u6570\u636e\u5931\u8d25\uff1a",e)}})}function C(e){var t;if(i.default.conf&&i.default.conf.games&&(i.default.conf.games[e]?t=i.default.conf.games[e]:i.default.conf.games.default&&(t=i.default.conf.games.default),t&&t.length>0)){i.default.tmp.getMoreGame||(i.default.tmp.getMoreGame={});var o=i.default.tmp.getMoreGame[e];return(!o||o>=t.length)&&(o=0),i.default.tmp.getMoreGame[e]=o+1,t[o]}}function w(e){var t;if(i.default.conf&&i.default.conf.games)if(i.default.conf.games[e]?t=i.default.conf.games[e]:i.default.conf.games.default&&(t=i.default.conf.games.default),t&&t.length>0){for(var o=[],a=0;a<t.length;a++)o.push(t[a].image);i.default.previewImage({urls:n.default.randomSort(o)})}else wx.showToast({title:"\u6ca1\u6709\u66f4\u591a\u6e38\u620f\uff01",icon:"info"});else wx.showToast({title:"\u6ca1\u6709\u66f4\u591a\u6e38\u620f\uff01",icon:"info"})}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;function t(e){var t=Date.now(),o=t-e.last;e.logs.push({ms:o,last:e.last,posted:!1}),e.total_ms+=o,e.last=t}if(!e||u[e])if(e)t(u[e]);else for(var o in u)t(u[o])}function B(e){return u&&u[e]?(u[e].showed&&P(e),u[e]):null}function T(e,t){var o=!1;for(var a in e)o=t[a]&&t[a].preload||!1,u[a]={pos:a,data:e[a]?e[a]:[],last:Date.now(),duration:0,total_ms:0,preload:o,logs:[],show_logs:[],click_logs:[],open_logs:[],showed:!o}}function x(e){var t=e.pos,o=void 0===t?"default":t,a=e.count,n=void 0===a?1:a,c=e.success,r=void 0===c?null:c,s=e.fail,d=void 0===s?null:s,l=e.force,h=void 0!==l&&l,f=e.preload,p=void 0!==f&&f,m=B(o);m&&!h?(p||(u[o].showed=!0),r&&r({code:0,data:m.data,key:"SUCCESS"})):i.default.get({url:"/game/ad",data:{pos:o,count:n},success:function(e){if(0==e.code){if(!Array.isArray(e.data)||Array.isArray(e.data)&&0!=e.data.length){var t={},a={};t[o]=e.data,a[o]={preload:p},T(t,a)}r&&r(e)}else d&&d(e)},fail:function(e){d&&d(e)}})}function I(e){var t=e.data,o=void 0===t?[{pos:"default",count:1,preload:!1}]:t,a=e.success,n=void 0===a?null:a,c=e.fail,r=void 0===c?null:c,s=e.force,d=void 0!==s&&s,l=!1,h=!0,f=!1,p=void 0;try{for(var m,g=o[Symbol.iterator]();!(h=(m=g.next()).done);h=!0)B(m.value.pos)&&!d||(l=!0)}catch(e){f=!0,p=e}finally{try{!h&&g.return&&g.return()}finally{if(f)throw p}}if(l)i.default.post({url:"/game/ad",data:{pos:o},success:function(e){if(0==e.code){if(e.data){var t={};for(var a in o)t[o[a].pos]={preload:o[a].preload||!1};T(e.data,t)}n&&n(e)}else r&&r(e)},fail:function(e){r&&r(e)}});else{var v={},_=!0,y=!1,N=void 0;try{for(var b,C=o[Symbol.iterator]();!(_=(b=C.next()).done);_=!0){var w=b.value;w.preload||(u[w.pos].showed=!0),v[w.pos]=u[w.pos].data}}catch(e){y=!0,N=e}finally{try{!_&&C.return&&C.return()}finally{if(y)throw N}}n&&n({code:0,data:v,key:"SUCCESS"})}}function D(e){var t=e.pos,o=void 0===t?"default":t,a=e.count,n=void 0===a?1:a,c=e.success,r=void 0===c?null:c,s=e.fail,d=void 0===s?null:s,l=e.force,h=void 0===l||l,f=e.preload,p=void 0!==f&&f,m=B(o);!h&&m?(p||(u[o].showed=!0),r&&r({code:0,data:m.data,key:"SUCCESS"})):i.default.get({url:"/game/ad/feature",data:{pos:o,count:n},success:function(e){if(0==e.code){if(!Array.isArray(e.data)||Array.isArray(e.data)&&0!=e.data.length){var t={},a={};t[o]=e.data,a[o]={preload:p},T(t,a)}r&&r(e)}else d&&d(e)},fail:function(e){d&&d(e)}})}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";S(e),u[e]&&(u[e].showed=!1)}function A(e){var t=e.pos,o=e.ad,a=void 0===o?null:o;if(!t||!u[t]||!u[t].preload)return!1;if(a){if(u[t].show_logs&&u[t].show_logs.length>0)for(var i in u[t].show_logs)if(u[t].show_logs[i].id===a.id)return!1;u[t].show_logs.push(a)}else u.last=Date.now(),u[t].showed=!0;return S(t),!0}function k(e){var t=e.ad,o=e.pos,a=void 0===o?"default":o,n=e.redirect,c=void 0!==n&&n,r=e.success,s=void 0===r?null:r,d=e.fail,l=void 0===d?null:d,h=e.complete,f=void 0===h?null:h,p=e.isPostLog,m=void 0===p||p,g=t;function v(e){e.image?i.default.previewImage({urls:[e.image],success:function(t){i.default.log("tapGameAD, success"),i.default.conf.allow_ad_opened_log&&O({ad:e,pos:a}),s&&s(t)},fail:function(e){i.default.log("tapGameAD, fail"),l&&l(e)},complete:function(e){i.default.log("tapGameAD, complete"),f&&f(e)}}):i.default.log("tapGameAD\uff0cad\u53c2\u6570\u5185image\u5c5e\u6027\u7f3a\u5931")}function _(e){i.default.requireSDK("2.2.0")?e.appid?wx.navigateToMiniProgram({appId:e.appid,path:e.path,success:function(t){i.default.log("tapGameAD, success"),i.default.conf.allow_ad_opened_log&&O({ad:e,pos:a}),s&&s(t)},fail:function(e){i.default.log("tapGameAD, fail"),l&&l(e)},complete:function(e){i.default.log("tapGameAD, complete"),f&&f(e)}}):i.default.log("tapGameAD, ad\u53c2\u6570\u5185appid\u5c5e\u6027\u7f3a\u5931"):e.image?v(e):i.default.alert("\u5f53\u524d\u5fae\u4fe1\u7248\u672c\u8fc7\u4f4e\uff0c\u65e0\u6cd5\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u8bf7\u5347\u7ea7\u5230\u6700\u65b0\u5fae\u4fe1\u7248\u672c\u540e\u91cd\u8bd5\u3002")}u&&u[a]&&g?(m&&F({ad:g,pos:a}),"code"==g.action?v(g):"navigate"==g.action?_(g):c?_(g):v(g)):i.default.log("tapGameAD pos\u65e0\u6548\uff0c\u6ca1\u6709\u5bf9\u5e94\u6570\u636e\uff0c\u6216\u672a\u4f20ad\u53c2\u6570")}function L(e){i.default.post({url:"/game/ad/log",data:e,success:function(t){for(var o=0;o<e.length;o++){var a=e[o];a.pos in u&&("show"==a.commit?(u[a.pos].logs=[],u[a.pos].show_logs=[]):"click"==a.commit?u[a.pos].click_logs=[]:"open"==a.commit&&(u[a.pos].open_logs=[]))}i.default.log("\u5e7f\u544a\u6570\u636e\u63d0\u4ea4\u6210\u529f\uff01")},fail:function(e){i.default.log("\u5e7f\u544a\u6570\u636e\u63d0\u4ea4\u5931\u8d25\uff01")}})}function F(e){var t=e.ad,o=e.pos,a=void 0===o?"default":o,i=e.post,n=void 0!==i&&i;if(!t||!t.cid||!t.id)return!1;var c={cid:t.cid,id:t.id,action:t.action};if(!n)return c.tid=t.tid,u[a].click_logs.push(c),!1;L([{pos:a||"default",tid:t.tid,commit:"click",data:[c]}])}function O(e){var t=e.ad,o=e.pos,a=void 0===o?"default":o,i=e.post,n=void 0!==i&&i;if(!t||!t.cid||!t.id)return!1;var c={cid:t.cid,id:t.id,action:t.action};if(!n)return c.tid=t.tid,u[a].open_logs.push(c),!1;L([{pos:a||"default",tid:t.tid,commit:"open",data:[c]}])}},function(e,t,o){var a;function i(e,t){e[t]=function(){var o;return e.mode=t,"aldShareAppMessage"==t&&(e.mode="shareAppMessage"),(o=wx)[t].apply(o,arguments)}}Object.defineProperty(t,"__esModule",{value:!0}),t.initHook=function(e){e.setMode=function(t){e.mode=t},i(e,"previewImage"),i(e,"openCustomerServiceConversation"),i(e,"shareAppMessage"),i(e,"aldShareAppMessage")},(a=o(1))&&a.__esModule},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(e[a]=o[a])}return e};t.initInvite=function(e){e.getInviteCount=r,e.getInviteUsers=s,e.receiveInviteGift=d,e.receiveInviteGifts=l,e.openFromShare(h),e.openFromCode(f),e.onShareGift=p,e.requestShareGift=m,e.receiveShareGift=g,e.getWXACode=v,e.saveWXACode=_};var i,n=(i=o(1))&&i.__esModule?i:{default:i};function c(e,t){var o={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(o[a]=e[a]);return o}function r(e){var t=e.pos,o=void 0===t?null:t,a=e.success,i=void 0===a?null:a,c=e.fail,r=void 0===c?null:c,s={};o&&(s.pos=o),n.default.get({url:"/invited/users/count",data:s,success:function(e){i&&i(e.data.count)},fail:function(e){r&&r(e)}})}function s(e){var t=e.pos,o=void 0===t?null:t,a=e.receive,i=void 0===a||a,c=e.skip,r=void 0===c?0:c,s=e.limit,d=void 0===s?-1:s,l=e.success,u=void 0===l?null:l,h=e.fail,f=void 0===h?null:h,p={skip:r,limit:d,receive:i};o&&(p.pos=o),n.default.get({url:"/invited/users",data:p,success:function(e){u&&u(e.data)},fail:function(e){f&&f(e)}})}function d(e){var t=e.user,o=e.pos,a=void 0===o?null:o,i=e.success,c=void 0===i?null:i,r=e.fail,s=void 0===r?null:r,d={users:[{id:t.id,gift:t.gift}]};a&&(d.pos=a),n.default.post({url:"/invited/gift/receive",data:d,success:function(e){c&&c(e.data.receive[0])},fail:function(e){s&&s(e)}})}function l(e){var t=e.users,o=e.pos,a=void 0===o?null:o,i=e.success,c=void 0===i?null:i,r=e.fail,s=void 0===r?null:r,d={users:[]},l=!0,u=!1,h=void 0;try{for(var f,p=t[Symbol.iterator]();!(l=(f=p.next()).done);l=!0){var m=f.value;d.users.push({id:m.id,gift:m.gift})}}catch(e){u=!0,h=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw h}}a&&(d.pos=a),n.default.post({url:"/invited/gift/receive",data:d,success:function(e){c&&c(e.data.receive)},fail:function(e){s&&s(e)}})}function u(e,t){if(t&&t.gift){var o={type:e,gift:t.gift,uid:t.uid,share_tid:t.share_tid},a=n.default.conf[t.gift];a&&(o.receive=!0),n.default.post({url:"/share/gift/log",data:o,success:function(e){if(a){var i=e.data;i.is_self&&a.not_allow_self?n.default.alert(a.not_allow_self_tip||"\u4e0d\u80fd\u9886\u53d6\u81ea\u5df1\u9001\u51fa\u7684\u793c\u7269\uff5e"):i.user_count>=(a.date_limit||2)?n.default.alert(a.date_limit_tip||"\u4eca\u5929\u5df2\u7ecf\u9886\u53d6\u592a\u591a\u6b21\u4e86\uff5e"):i.user_share_count>=(a.share_date_limit||1)?n.default.alert(a.share_date_limit_tip||"\u5df2\u7ecf\u9886\u53d6\u8fc7\u8be5\u793c\u7269\u4e86\uff5e"):i.count>=(a.limit||10)?n.default.alert(a.limit_tip||"\u8be5\u793c\u7269\u88ab\u9886\u5149\u4e86\uff5e"):(e={gift:t.gift,query:t,conf:a,options:o,data:i},n.default._onGiftCallback&&n.default._onGiftCallback(e))}}})}}function h(e){e.from;var t=e.query;e.options,u("share",t)}function f(e){e.from,e.scene,e.options,u("code",e.query)}function p(e){n.default._onGiftCallback=e}function m(e){var t=e.gifts,o=e.users,a=void 0===o||o,i=e.receive,c=void 0===i||i,r=e.dateLimit,s=void 0===r?0:r,d=e.cache,l=void 0===d?60:d,u=e.limit,h=void 0===u?0:u,f=e.success,p=void 0===f?null:f,m=e.fail,g=void 0===m?null:m;if("boolean"==typeof a&&"boolean"==typeof c&&"number"==typeof s&&"number"==typeof l&&"number"==typeof h){var v=!0,_=[t.sort().toString(),a,c,s,h].join("-");n.default.shareGiftTempData&&n.default.shareGiftTempData[_]&&Date.now()-n.default.shareGiftTempData[_].ms<1e3*l&&(v=!1),v?n.default.post({url:"/share/gift/receive",data:{gifts:t,is_users:a,receive:c,date_limit:s,limit:h},success:function(e){n.default.shareGiftTempData[_]={data:e.data,ms:Date.now()},p&&p(e.data)},fail:g}):p&&p(n.default.shareGiftTempData[_].data)}else n.default.log("requestShareGift, \u53c2\u6570\u683c\u5f0f\u5f02\u5e38")}function g(e){var t=e.users,o=e.success,a=void 0===o?null:o,i=e.fail,c=void 0===i?null:i;Array.isArray(t)?n.default.post({url:"/share/gift/receive2",data:{users:t},success:function(e){a&&a(e)},fail:function(e){c&&c(e)}}):n.default.log("receiveShareGift, users\u53c2\u6570\u683c\u5f0f\u9519\u8bef")}function v(e){var t=e.pos,o=e.bg,i=void 0===o||o,r=e.success,s=void 0===r?null:r,d=e.fail,l=void 0===d?null:d,u=c(e,["pos","bg","success","fail"]);n.default.post({url:"/share/qrcode",data:a({pos:t,bg:i,uid:n.default.user.id,share_tid:Date.now()+""},u),success:function(e){s&&s(e.data)},fail:l})}function _(e){var t=e.pos,o=e.bg,i=void 0===o||o,r=e.filePath,s=void 0===r?"":r,d=e.success,l=void 0===d?null:d,u=e.fail,h=void 0===u?null:u,f=e.complete,p=void 0===f?null:f,m=c(e,["pos","bg","filePath","success","fail","complete"]);v(a({pos:t,bg:i,success:function(e){!function(e){var t=e.codeUrl;wx.downloadFile({url:t,filePath:s,success:function(e){200==e.statusCode&&(n.default.alert("download success",e.tempFilePath),n.default.log("download success",e.tempFilePath),s||(s=e.tempFilePath,wx.saveImageToPhotosAlbum({filePath:e.tempFilePath,success:function(e){l&&l(e)},fail:function(e){h&&h(e)},complete:function(e){p&&p(e)}})))},fail:function(e){h&&h(e)},complete:function(e){p&&p(e)}})}(e)},fail:h},m))}},function(e,t,o){Object.defineProperty(t,"__esModule",{value:!0}),t.initEvent=function(e){e.afterHide(function(){i.default.post({url:"/log/event",data:n,success:function(e){0==e.code&&(n.events=[]),i.default.log("\u4e8b\u4ef6\u65e5\u5fd7\u63d0\u4ea4\u6210\u529f\uff01")},fail:function(e){i.default.log("\u4e8b\u4ef6\u65e5\u5fd7\u63d0\u4ea4\u5931\u8d25\uff01")}})}),e.traceEvent=c};var a,i=(a=o(1))&&a.__esModule?a:{default:a},n={index:0,events:[]};function c(e,t){n.index+=1,n.events.push({event:e,data:t?JSON.stringify(t):null,tm:Date.now()})}}]),cc._RF.pop()},{}],ws:[function(e,t,o){"use strict";cc._RF.push(t,"04d590mJptPWLTsx02pKyNs","ws"),Object.defineProperty(o,"__esModule",{value:!0});var a=e("./wssdk.js").default;o.default=a,cc._RF.pop()},{"./wssdk.js":"wssdk"}],wx:[function(e,t,o){"use strict";cc._RF.push(t,"838cfBpv9xHeIR/hQanr2Y/","wx"),Object.defineProperty(o,"__esModule",{value:!0}),o.default=window.wx,cc._RF.pop()},{}]},{},["PanelRoulette","StartPageControl","Ad","Const","Event_Mgr","Global","Grade","Loading","Navigator","Reward","ScrollViewBetter","buyPanel","iosAd","receive","setting","tips","utils","ws","wssdk","wx","Lottery","blackWin","cat","dif_audio","dif_game","dif_strength","downTime","getGift","giftPanel","glod","passPage","timerOutNode","unlock"]);